!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).neo4j=t()}(this,function(){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function D(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var L={},U={},e={},t={},F={},n={},B=(Object.defineProperty(n,"__esModule",{value:!0}),n.createBrokenObject=function(r,e){void 0===e&&(e={});function n(){throw r}return new Proxy(e,{get:function(e,t){return t===B||(t===V?r:void("toJSON"!==t&&n()))},set:n,apply:n,construct:n,defineProperty:n,deleteProperty:n,getOwnPropertyDescriptor:n,getPrototypeOf:n,has:n,isExtensible:n,ownKeys:n,preventExtensions:n,setPrototypeOf:n})},n.isBrokenObject=function(e){return null!==e&&"object"==typeof e&&!0===e[B]},n.getBrokenObjectReason=function(e){return e[V]},"__isBrokenObject__"),V="__reason__";Object.defineProperty(F,"__esModule",{value:!0}),F.stringify=function(e,t){return JSON.stringify(e,function(e,r){return(0,q.isBrokenObject)(r)?{__isBrokenObject__:!0,__reason__:(0,q.getBrokenObjectReason)(r)}:"bigint"==typeof r?"".concat(r,"n"):!0!==(null==t?void 0:t.sortedElements)||"object"!=typeof r||Array.isArray(r)?!0!==(null==t?void 0:t.useCustomToString)||"object"!=typeof r||Array.isArray(r)||"function"!=typeof r.toString||r.toString===Object.prototype.toString?r:null==r?void 0:r.toString():Object.keys(r).sort().reduce(function(e,t){return e[t]=r[t],e},{})})};var q=n;var W,z,H,G={},o=(o=G,Object.defineProperty(o,"__esModule",{value:!0}),o.rawPolyfilledDiagnosticRecord=void 0,o.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(o.rawPolyfilledDiagnosticRecord),r&&r.__extends||(W=function(e,t){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}W(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),Y=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),K=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=r&&r.__importStar||(z=function(e){return(z=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=z(e),n=0;n<r.length;n++)"default"!==r[n]&&Y(t,e,r[n]);return K(t,e),t}),Z=(Object.defineProperty(t,"__esModule",{value:!0}),t.PROTOCOL_ERROR=t.SESSION_EXPIRED=t.SERVICE_UNAVAILABLE=t.GQLError=t.Neo4jError=t.isRetryableError=t.isRetriableError=void 0,t.newError=function(e,t,r,n,o,i){return new oe(e,null!=t?t:ee,null!=n?n:"50N42",null!=o?o:"error: general processing exception - unexpected error. "+e,null!=i?i:Q.rawPolyfilledDiagnosticRecord,r)},t.newGQLError=function(e,t,r,n,o){return new te(e,null!=r?r:"50N42",null!=n?n:"error: general processing exception - unexpected error. "+e,null!=o?o:Q.rawPolyfilledDiagnosticRecord,t)},i(F)),Q=G,i={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"},X=(Object.freeze(i),Object.values(i)),J="ServiceUnavailable",$=(t.SERVICE_UNAVAILABLE=J,"SessionExpired"),ee=(t.SESSION_EXPIRED=$,t.PROTOCOL_ERROR="ProtocolError","N/A"),te=(H=Error,o(re,H),re.prototype.containsGqlCause=function(e){return void 0!==this.findByGqlStatus(e)},re.prototype.findByGqlStatus=function(e){return this.gqlStatus===e?this:void 0!==this.cause&&(this.cause instanceof re||this.cause instanceof oe)?this.cause.findByGqlStatus(e):void 0},Object.defineProperty(re.prototype,"diagnosticRecordAsJsonString",{get:function(){return Z.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),re);function re(e,t,r,n,o){e=H.call(this,e,null!=o?{cause:o}:void 0)||this;return e.constructor=re,e.__proto__=re.prototype,e.cause=null!=o?o:void 0,e.gqlStatus=t,e.gqlStatusDescription=r,e.diagnosticRecord=n,e.classification=void 0!==(o=e.diagnosticRecord)&&void 0!==o._classification&&X.includes(o._classification)?null==o?void 0:o._classification:"UNKNOWN",e.rawClassification=null!=(t=null==n?void 0:n._classification)?t:void 0,e.name="GQLError",e}t.GQLError=te;o(ie,ne=te),ie.isRetriable=function(e){return this.isRetryable(e)},ie.isRetryable=function(e){return null!=e&&e instanceof ie&&e.retryable};var ne,oe=ie;function ie(e,t,r,n,o,i){e=ne.call(this,e,r,n,o,i)||this,e.constructor=ie,e.__proto__=ie.prototype,e.code=t,e.name="Neo4jError",n=(r=t)===J||r===$||"Neo.ClientError.Security.AuthorizationExpired"===r||function(e){return!0===(null==e?void 0:e.includes("TransientError"))}(r);return e.retriable=n,e.retryable=n,e}i=(t.Neo4jError=oe).isRetriable,t.isRetriableError=i,o=oe.isRetryable;t.isRetryableError=o;var i={},ue=(Object.defineProperty(i,"__esModule",{value:!0}),i.toString=i.toNumber=i.inSafeRange=i.isInt=i.int=void 0,t),ae=new Map,o=(d.prototype.inSafeRange=function(){return this.greaterThanOrEqual(d.MIN_SAFE_VALUE)&&this.lessThanOrEqual(d.MAX_SAFE_VALUE)},d.prototype.toInt=function(){return this.low},d.prototype.toNumber=function(){return this.high*ye+(this.low>>>0)},d.prototype.toBigInt=function(){var e;return this.isZero()?BigInt(0):this.isPositive()?BigInt(this.high>>>0)*BigInt(ye)+BigInt(this.low>>>0):(e=this.negate(),BigInt(-1)*(BigInt(e.high>>>0)*BigInt(ye)+BigInt(e.low>>>0)))},d.prototype.toNumberOrInfinity=function(){return this.lessThan(d.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(d.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},d.prototype.toString=function(e){if((e=null!=e?e:10)<2||36<e)throw RangeError("radix out of range: "+e.toString());if(this.isZero())return"0";var t,r,n;if(this.isNegative())return this.equals(d.MIN_VALUE)?(t=d.fromNumber(e),n=(r=this.div(t)).multiply(t).subtract(this),r.toString(e)+n.toInt().toString(e)):"-"+this.negate().toString(e);for(var o=d.fromNumber(Math.pow(e,6)),i=(n=this,"");;){var u=n.div(o),a=(n.subtract(u.multiply(o)).toInt()>>>0).toString(e);if((n=u).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},d.prototype.valueOf=function(){return this.toBigInt()},d.prototype.getHighBits=function(){return this.high},d.prototype.getLowBits=function(){return this.low},d.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(d.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high?this.high:this.low,t=0,t=31;0<t&&0==(e&1<<t);t--);return 0!==this.high?t+33:t+1},d.prototype.isZero=function(){return 0===this.high&&0===this.low},d.prototype.isNegative=function(){return this.high<0},d.prototype.isPositive=function(){return 0<=this.high},d.prototype.isOdd=function(){return 1==(1&this.low)},d.prototype.isEven=function(){return 0==(1&this.low)},d.prototype.equals=function(e){e=d.fromValue(e);return this.high===e.high&&this.low===e.low},d.prototype.notEquals=function(e){return!this.equals(e)},d.prototype.lessThan=function(e){return this.compare(e)<0},d.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},d.prototype.greaterThan=function(e){return 0<this.compare(e)},d.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},d.prototype.compare=function(e){e=d.fromValue(e);if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r||(t||!r)&&this.subtract(e).isNegative()?-1:1},d.prototype.negate=function(){return this.equals(d.MIN_VALUE)?d.MIN_VALUE:this.not().add(d.ONE)},d.prototype.add=function(e){var e=d.fromValue(e),t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,u=65535&e.high,a=e.low>>>16,s=0,c=0,l=0,f=0;return c+=(l=l+((f+=o+(65535&e.low))>>>16)+(n+a))>>>16,d.fromBits((l&=65535)<<16|(f&=65535),((s+=(c+=r+u)>>>16)+(t+i)&65535)<<16|(c&=65535))},d.prototype.subtract=function(e){e=d.fromValue(e);return this.add(e.negate())},d.prototype.multiply=function(e){if(this.isZero())return d.ZERO;e=d.fromValue(e);if(e.isZero())return d.ZERO;if(this.equals(d.MIN_VALUE))return e.isOdd()?d.MIN_VALUE:d.ZERO;if(e.equals(d.MIN_VALUE))return this.isOdd()?d.MIN_VALUE:d.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(ve)&&e.lessThan(ve))return d.fromNumber(this.toNumber()*e.toNumber());var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,u=65535&e.high,a=e.low>>>16,e=65535&e.low,s=0,c=0,l=0,f=(f=0)+((c=c+((l+=o*e)>>>16)+n*e)>>>16)+((c=(c&65535)+o*a)>>>16);return d.fromBits((c&=65535)<<16|(l&=65535),((s+=(f+=r*e)>>>16)+((f=(f&65535)+n*a)>>>16)+((f=(f&65535)+o*u)>>>16)+(t*e+r*a+n*u+o*i)&65535)<<16|(f&=65535))},d.prototype.div=function(e){var t,r,n,o=d.fromValue(e);if(o.isZero())throw(0,ue.newError)("division by zero");if(this.isZero())return d.ZERO;{if(this.equals(d.MIN_VALUE))return o.equals(d.ONE)||o.equals(d.NEG_ONE)?d.MIN_VALUE:o.equals(d.MIN_VALUE)?d.ONE:(n=this.shiftRight(1).div(o).shiftLeft(1)).equals(d.ZERO)?o.isNegative()?d.ONE:d.NEG_ONE:(t=this.subtract(o.multiply(n)),n.add(t.div(o)));if(o.equals(d.MIN_VALUE))return d.ZERO}if(this.isNegative())return o.isNegative()?this.negate().div(o.negate()):this.negate().div(o).negate();if(o.isNegative())return this.div(o.negate()).negate();for(r=d.ZERO,t=this;t.greaterThanOrEqual(o);){n=Math.max(1,Math.floor(t.toNumber()/o.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),u=i<=48?1:Math.pow(2,i-48),a=d.fromNumber(n),s=a.multiply(o);s.isNegative()||s.greaterThan(t);)s=(a=d.fromNumber(n-=u)).multiply(o);a.isZero()&&(a=d.ONE),r=r.add(a),t=t.subtract(s)}return r},d.prototype.modulo=function(e){e=d.fromValue(e);return this.subtract(this.div(e).multiply(e))},d.prototype.not=function(){return d.fromBits(~this.low,~this.high)},d.prototype.and=function(e){e=d.fromValue(e);return d.fromBits(this.low&e.low,this.high&e.high)},d.prototype.or=function(e){e=d.fromValue(e);return d.fromBits(this.low|e.low,this.high|e.high)},d.prototype.xor=function(e){e=d.fromValue(e);return d.fromBits(this.low^e.low,this.high^e.high)},d.prototype.shiftLeft=function(e){e=d.toNumber(e);return 0==(e&=63)?d.ZERO:e<32?d.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):d.fromBits(0,this.low<<e-32)},d.prototype.shiftRight=function(e){var t=d.toNumber(e),e=d.toNumber(e);return 0==(t&=63)?d.ZERO:e<32?d.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):d.fromBits(this.high>>t-32,0<=this.high?0:-1)},d.isInteger=function(e){return!0===(null==e?void 0:e.__isInteger__)},d.fromInt=function(e){if(-128<=(e|=0)&&e<128&&null!=(t=ae.get(e)))return t;var t=new d(e,e<0?-1:0);return-128<=e&&e<128&&ae.set(e,t),t},d.fromBits=function(e,t){return new d(e,t)},d.fromNumber=function(e){return isNaN(e)||!isFinite(e)?d.ZERO:e<=-_e?d.MIN_VALUE:_e<=e+1?d.MAX_VALUE:e<0?d.fromNumber(-e).negate():new d(e%ye|0,e/ye|0)},d.fromString=function(e,t,r){var n=(void 0===r?{}:r).strictStringValidation;if(0===e.length)throw(0,ue.newError)("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return d.ZERO;if((t=null!=t?t:10)<2||36<t)throw(0,ue.newError)("radix out of range: "+t.toString());if(0<(r=e.indexOf("-")))throw(0,ue.newError)('number format error: interior "-" character: '+e);if(0===r)return d.fromString(e.substring(1),t).negate();for(var o,i,u=d.fromNumber(Math.pow(t,8)),a=d.ZERO,s=0;s<e.length;s+=8){var c,l=Math.min(8,e.length-s),f=e.substring(s,s+l),p=parseInt(f,t);if(!0===n&&(o=f,c=p,i=t,Number.isNaN(o)||Number.isNaN(c)||function(e,t,r){e=e.toString(t),t=Math.max(r-e.length,0),r="0".repeat(t);return"".concat(r).concat(e)}(c,i,o.length)!==o.toLowerCase()))throw(0,ue.newError)('number format error: "'.concat(f,'" is NaN in radix ').concat(t,": ").concat(e));a=l<8?(c=d.fromNumber(Math.pow(t,l)),a.multiply(c).add(d.fromNumber(p))):(a=a.multiply(u)).add(d.fromNumber(p))}return a},d.fromValue=function(e,t){return void 0===t&&(t={}),e instanceof d?e:"number"==typeof e?(!0===t.ceilFloat&&(e=Math.ceil(e)),d.fromNumber(e)):"string"==typeof e?d.fromString(e,void 0,t):"bigint"==typeof e?d.fromString(e.toString()):new d(e.low,e.high)},d.toNumber=function(e){switch(typeof e){case"number":return e;case"bigint":return Number(e);default:return d.fromValue(e).toNumber()}},d.toString=function(e,t){return d.fromValue(e).toString(t)},d.inSafeRange=function(e){return d.fromValue(e).inSafeRange()},d.ZERO=d.fromInt(0),d.ONE=d.fromInt(1),d.NEG_ONE=d.fromInt(-1),d.MAX_VALUE=d.fromBits(-1,2147483647),d.MIN_VALUE=d.fromBits(0,-2147483648),d.MIN_SAFE_VALUE=d.fromBits(1,-2097152),d.MAX_SAFE_VALUE=d.fromBits(-1,2097151),d.__isInteger__=!0,d);function d(e,t){this.low=null!=e?e:0,this.high=null!=t?t:0}Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var se,a,ce,le,fe,s,pe,de,he,be,ye=4294967296,_e=ye*ye/2,ve=o.fromInt(1<<24),u=o.fromValue,u=(i.int=u,o.isInteger),u=(i.isInt=u,o.inSafeRange),u=(i.inSafeRange=u,o.toNumber),u=(i.toNumber=u,o.toString),u=(i.toString=u,i.default=o,{}),o={},c={},me=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),ge=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=r&&r.__importStar||(se=function(e){return(se=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=se(e),n=0;n<r.length;n++)"default"!==r[n]&&me(t,e,r[n]);return ge(t,e),t}),Oe=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},we=(Object.defineProperty(c,"__esModule",{value:!0}),c.ENCRYPTION_OFF=c.ENCRYPTION_ON=void 0,c.isEmptyObjectOrNull=function(e){if(null===e)return!0;if(!Pe(e))return!1;for(var t in e)if(void 0!==e[t])return!1;return!0},c.isObject=Pe,c.isString=Se,c.assertObject=function(e,t){if(Pe(e))return e;throw new TypeError(t+" expected to be an object but was: "+(0,Ee.stringify)(e))},c.assertString=Te,c.assertNumber=function(e,t){if("number"==typeof e)return e;throw new TypeError(t+" expected to be a number but was: "+(0,Ee.stringify)(e))},c.assertNumberOrInteger=function(e,t){if("number"==typeof e||"bigint"==typeof e||(0,we.isInt)(e))return e;throw new TypeError(t+" expected to be either a number or an Integer object but was: "+(0,Ee.stringify)(e))},c.assertValidDate=function(e,t){if("[object Date]"!==Object.prototype.toString.call(e))throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+(0,Ee.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+(0,Ee.stringify)(e));return e},c.toNumber=function(e){return e instanceof we.default?e.toNumber():"bigint"==typeof e?(0,we.int)(e).toNumber():e},c.validateQueryAndParameters=function(e,t,r){var n="",t=null!=t?t:{},r=null!=(r=null==r?void 0:r.skipAsserts)&&r;"string"==typeof e?n=e:e instanceof String?n=e.toString():"object"==typeof e&&null!=e.text&&(n=e.text,t=null!=(e=e.parameters)?e:{});r||(function(e){if(Te(e,"Cypher query"),0===e.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.")}(n),function(e){{var t;if(!Pe(e))throw t=null!=e.constructor?" "+e.constructor.name:"",new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(t," ").concat(JSON.stringify(e)))}}(t));return{validatedQuery:n,params:t}},c.equals=function e(t,r){var n,o;if(t===r)return!0;if(null===t||null===r)return!1;if("object"==typeof t&&"object"==typeof r){var i=Object.keys(t),u=Object.keys(r);if(i.length!==u.length)return!1;try{for(var a=Oe(i),s=a.next();!s.done;s=a.next()){var c=s.value;if(!e(t[c],r[c]))return!1}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return!0}return!1},l(i)),Ee=F;c.ENCRYPTION_ON="ENCRYPTION_ON";function Pe(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function Te(e,t){if(Se(e))return e;throw new TypeError((0,Ee.stringify)(t)+" expected to be string but was: "+(0,Ee.stringify)(e))}function Se(e){return"[object String]"===Object.prototype.toString.call(e)}function je(e,t){this._minNumber=e,this._maxNumber=t,this._minInteger=(0,s.int)(e),this._maxInteger=(0,s.int)(t)}function Ce(e){return(0,s.int)(e).div(12)}function Ie(e){return(0,s.int)(e).modulo(12)}function Re(e,t){return(0,s.int)(t).greaterThan(0)&&(0,s.int)(e).lessThan(0)&&(e=(0,s.int)(e).add(1)),(0,s.int)(e).div(a.SECONDS_PER_HOUR)}function Ae(e,t){(0,s.int)(t).greaterThan(0)&&(0,s.int)(e).lessThan(0)&&(e=(0,s.int)(e).add(1));t=(0,s.int)(e).div(a.SECONDS_PER_MINUTE),e=t.isNegative();return De(t=e?t.negate():t,a.MINUTES_PER_HOUR).multiply(e?-1:1)}function ke(e,t,r){e=(0,s.int)(e),t=(0,s.int)(t),r=(0,s.int)(r);var n=e.multiply(365);return n=(n=(n=e.greaterThanOrEqual(0)?n.add(e.add(3).div(4).subtract(e.add(99).div(100)).add(e.add(399).div(400))):n.subtract(e.div(-4).subtract(e.div(-100)).add(e.div(-400)))).add(t.multiply(367).subtract(362).div(12))).add(r.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),function(e){if((e=(0,s.int)(e)).modulo(4).equals(0))return!e.modulo(100).equals(0)||!!e.modulo(400).equals(0)}(e)||(n=n.subtract(1))),n.subtract(a.DAYS_0000_TO_1970)}function Me(e,t){return 1===e?t%400==0||t%4==0&&t%100!=0?29:28:[0,2,4,6,7,9,11].includes(e)?31:30}function Ne(e,t,r){if((0,de.assertNumberOrInteger)(e,r),t.contains(e))return e;throw(0,pe.newError)("".concat(r," is expected to be in range ").concat(t.toString()," but was: ").concat(e.toString()))}function xe(e,t){e=(0,s.int)(e),t=(0,s.int)(t);var r=e.div(t);return r=e.isPositive()!==t.isPositive()&&r.multiply(t).notEquals(e)?r.subtract(1):r}function De(e,t){return e=(0,s.int)(e),t=(0,s.int)(t),e.subtract(xe(e,t).multiply(t))}function Le(e){return(e=(0,s.int)(e)).equals(0)?"":"."+Ue(e,9)}function Ue(e,t,r){var n=(e=(0,s.int)(e)).isNegative(),o=(e=n?e.negate():e).toString();if(null!=t)for(;o.length<t;)o="0"+o;return n?"-"+o:!0===(null==r?void 0:r.usePositiveSign)?"+"+o:o}c.ENCRYPTION_OFF="ENCRYPTION_OFF",a=o,le=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),fe=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=r&&r.__importStar||(ce=function(e){return(ce=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=ce(e),n=0;n<r.length;n++)"default"!==r[n]&&le(t,e,r[n]);return fe(t,e),t}),Object.defineProperty(a,"__esModule",{value:!0}),a.SECONDS_PER_DAY=a.DAYS_PER_400_YEAR_CYCLE=a.DAYS_0000_TO_1970=a.NANOS_PER_HOUR=a.NANOS_PER_MINUTE=a.NANOS_PER_MILLISECOND=a.NANOS_PER_SECOND=a.SECONDS_PER_HOUR=a.SECONDS_PER_MINUTE=a.MINUTES_PER_HOUR=a.NANOSECOND_OF_SECOND_RANGE=a.SECOND_OF_MINUTE_RANGE=a.MINUTE_OF_HOUR_RANGE=a.HOUR_OF_DAY_RANGE=a.DAY_OF_MONTH_RANGE=a.MONTH_OF_YEAR_RANGE=a.YEAR_RANGE=void 0,a.normalizeYearsForDuration=Ce,a.normalizeMonthsForDuration=Ie,a.normalizeHoursForDuration=Re,a.normalizeMinutesForDuration=Ae,a.normalizeSecondsForDuration=function(e,t){return(0,s.int)(e).add(xe(t,a.NANOS_PER_SECOND))},a.normalizeNanosecondsForDuration=function(e){return De(e,a.NANOS_PER_SECOND)},a.localTimeToNanoOfDay=function(e,t,r,n){e=(0,s.int)(e),t=(0,s.int)(t),r=(0,s.int)(r),n=(0,s.int)(n);e=e.multiply(a.NANOS_PER_HOUR);return(e=(e=e.add(t.multiply(a.NANOS_PER_MINUTE))).add(r.multiply(a.NANOS_PER_SECOND))).add(n)},a.localDateTimeToEpochSecond=function(e,t,r,n,o,i,u){e=ke(e,t,r),t=function(e,t,r){e=(0,s.int)(e),t=(0,s.int)(t),r=(0,s.int)(r);e=e.multiply(a.SECONDS_PER_HOUR);return(e=e.add(t.multiply(a.SECONDS_PER_MINUTE))).add(r)}(n,o,i);return e.multiply(a.SECONDS_PER_DAY).add(t)},a.dateToEpochDay=ke,a.durationToIsoString=function(e,t,r,n){if((0,s.int)(e).equals(0)&&(0,s.int)(t).equals(0)&&(0,s.int)(r).equals(0)&&(0,s.int)(n).equals(0))return"PT0S";var o=Ue(Ce(e)),e=Ue(Ie(e)),t=Ue(t),i=Ue(Re(r,n)),u=Ue(Ae(r,n)),r=function(e,t){e=(0,s.int)(e),t=(0,s.int)(t);var r,n=e.isNegative(),o=t.greaterThan(0);e=n&&o?(e=e.add(1).negate().modulo(60).negate(),e.equals(0)?"-0":e.toString()):e.modulo(60).toString();o&&(r=Le((n?t.negate().add(2*a.NANOS_PER_SECOND):t.add(a.NANOS_PER_SECOND)).modulo(a.NANOS_PER_SECOND)));return null!=r?e+r:e}(r,n);return"P".concat("0"!==o?o+"Y":"")+"".concat("0"!==e?e+"M":"")+"".concat("0"!==t?t+"D":"","T")+"".concat("0"!==i?i+"H":"")+"".concat("0"!==u?u+"M":"")+"".concat("0"!==r?r+"S":"")},a.timeToIsoString=function(e,t,r,n){e=Ue(e,2),t=Ue(t,2),r=Ue(r,2),n=Le(n);return"".concat(e,":").concat(t,":").concat(r).concat(n)},a.timeZoneOffsetToIsoString=function(e){if((e=(0,s.int)(e)).equals(0))return"Z";var t=e.isNegative();t&&(e=e.multiply(-1));var t=t?"-":"+",r=Ue(e.div(a.SECONDS_PER_HOUR),2),n=Ue(e.div(a.SECONDS_PER_MINUTE).modulo(a.MINUTES_PER_HOUR),2),e=e.modulo(a.SECONDS_PER_MINUTE),e=e.equals(0)?null:Ue(e,2);return null!=e?"".concat(t).concat(r,":").concat(n,":").concat(e):"".concat(t).concat(r,":").concat(n)},a.dateToIsoString=function(e,t,r){e=function(e){e=(0,s.int)(e);if(e.isNegative()||e.greaterThan(9999))return Ue(e,6,{usePositiveSign:!0});return Ue(e,4)}(e),t=Ue(t,2),r=Ue(r,2);return"".concat(e,"-").concat(t,"-").concat(r)},a.isoStringToStandardDate=function(e){return new Date(e)},a.toStandardDate=function(e){return new Date(e)},a.newDate=function(e){return new Date(e)},a.totalNanoseconds=function(e,t){t=null!=t?t:0;e=e.getMilliseconds()*a.NANOS_PER_MILLISECOND;return function(e,t){{if(e instanceof s.default)return e.add(t);if("bigint"==typeof e)return e+BigInt(t)}return e+t}(t,e)},a.timeZoneOffsetInSeconds=function(e){var t=e.getSeconds()-e.getUTCSeconds(),r=e.getMinutes()-e.getUTCMinutes(),n=e.getHours()-e.getUTCHours(),e=function(e){return e.getMonth()===e.getUTCMonth()?e.getDate()-e.getUTCDate():e.getFullYear()>e.getUTCFullYear()||e.getMonth()>e.getUTCMonth()&&e.getFullYear()===e.getUTCFullYear()?e.getDate()+Me(e.getUTCMonth(),e.getUTCFullYear())-e.getUTCDate():e.getDate()-(e.getUTCDate()+Me(e.getMonth(),e.getFullYear()))}(e);return n*a.SECONDS_PER_HOUR+r*a.SECONDS_PER_MINUTE+t+e*a.SECONDS_PER_DAY},a.assertValidYear=function(e){return Ne(e,a.YEAR_RANGE,"Year")},a.assertValidMonth=function(e){return Ne(e,a.MONTH_OF_YEAR_RANGE,"Month")},a.assertValidDay=function(e){return Ne(e,a.DAY_OF_MONTH_RANGE,"Day")},a.assertValidHour=function(e){return Ne(e,a.HOUR_OF_DAY_RANGE,"Hour")},a.assertValidMinute=function(e){return Ne(e,a.MINUTE_OF_HOUR_RANGE,"Minute")},a.assertValidSecond=function(e){return Ne(e,a.SECOND_OF_MINUTE_RANGE,"Second")},a.assertValidNanosecond=function(e){return Ne(e,a.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")},a.assertValidZoneId=function(t,r){var e=he.get(r);if(!0!==e){if(!1===e)throw be(r,t);try{Intl.DateTimeFormat(void 0,{timeZone:r}),he.set(r,!0)}catch(e){throw he.set(r,!1),be(r,t)}}},a.floorDiv=xe,a.floorMod=De,s=l(i),pe=t,de=c,je.prototype.contains=function(e){var t;return(0,s.isInt)(e)&&e instanceof s.default?e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger):"bigint"==typeof e?(t=(0,s.int)(e)).greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger):e>=this._minNumber&&e<=this._maxNumber},je.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},l=je,a.YEAR_RANGE=new l(-999999999,999999999),a.MONTH_OF_YEAR_RANGE=new l(1,12),a.DAY_OF_MONTH_RANGE=new l(1,31),a.HOUR_OF_DAY_RANGE=new l(0,23),a.MINUTE_OF_HOUR_RANGE=new l(0,59),a.SECOND_OF_MINUTE_RANGE=new l(0,59),a.NANOSECOND_OF_SECOND_RANGE=new l(0,999999999),a.MINUTES_PER_HOUR=60,a.SECONDS_PER_MINUTE=60,a.SECONDS_PER_HOUR=a.SECONDS_PER_MINUTE*a.MINUTES_PER_HOUR,a.NANOS_PER_SECOND=1e9,a.NANOS_PER_MILLISECOND=1e6,a.NANOS_PER_MINUTE=a.NANOS_PER_SECOND*a.SECONDS_PER_MINUTE,a.NANOS_PER_HOUR=a.NANOS_PER_MINUTE*a.MINUTES_PER_HOUR,a.DAYS_0000_TO_1970=719528,a.DAYS_PER_400_YEAR_CYCLE=146097,a.SECONDS_PER_DAY=86400,he=new Map,be=function(e,t){return(0,pe.newError)("".concat(t,' is expected to be a valid ZoneId but was: "').concat(e,'"'))};var Fe,Be=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),Ve=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=r&&r.__importStar||(Fe=function(e){return(Fe=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Fe(e),n=0;n<r.length;n++)"default"!==r[n]&&Be(t,e,r[n]);return Ve(t,e),t}),qe=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},f=(Object.defineProperty(u,"__esModule",{value:!0}),u.DateTime=u.LocalDateTime=u.Date=u.Time=u.LocalTime=u.Duration=void 0,u.isDuration=function(e){return ot(e,Ge)},u.isLocalTime=function(e){return ot(e,Ye)},u.isTime=function(e){return ot(e,Ke)},u.isDate=function(e){return ot(e,Ze)},u.isLocalDateTime=function(e){return ot(e,Qe)},u.isDateTime=function(e){return ot(e,Xe)},l(o)),We=c,ze=t,He=l(i),l={value:!0,enumerable:!1,configurable:!1,writable:!1},Ge="__isDuration__",Ye="__isLocalTime__",Ke="__isTime__",Ze="__isDate__",Qe="__isLocalDateTime__",Xe="__isDateTime__",p=(Je.prototype.toString=function(){return f.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},Je);function Je(e,t,r,n){this.months=(0,We.assertNumberOrInteger)(e,"Months"),this.days=(0,We.assertNumberOrInteger)(t,"Days"),(0,We.assertNumberOrInteger)(r,"Seconds"),(0,We.assertNumberOrInteger)(n,"Nanoseconds"),this.seconds=f.normalizeSecondsForDuration(r,n),"number"==typeof r&&(0,He.isInt)(this.seconds)&&(this.seconds=this.seconds.toNumber()),"bigint"==typeof r&&(0,He.isInt)(this.seconds)&&(this.seconds=this.seconds.toBigInt()),this.nanoseconds=f.normalizeNanosecondsForDuration(n),"number"==typeof n&&(0,He.isInt)(this.nanoseconds)&&(this.nanoseconds=this.nanoseconds.toNumber()),"bigint"==typeof n&&(0,He.isInt)(this.nanoseconds)&&(this.nanoseconds=this.nanoseconds.toBigInt()),Object.freeze(this)}u.Duration=p,Object.defineProperty(p.prototype,Ge,l);$e.fromStandardDate=function(e,t){ut(e,t);t=f.totalNanoseconds(e,t);return new $e(e.getHours(),e.getMinutes(),e.getSeconds(),t instanceof He.default?t.toInt():"bigint"==typeof t?(0,He.int)(t).toInt():t)},$e.prototype.toString=function(){return f.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)};p=$e;function $e(e,t,r,n){this.hour=f.assertValidHour(e),this.minute=f.assertValidMinute(t),this.second=f.assertValidSecond(r),this.nanosecond=f.assertValidNanosecond(n),Object.freeze(this)}u.LocalTime=p,Object.defineProperty(p.prototype,Ye,l);et.fromStandardDate=function(e,t){return ut(e,t),new et(e.getHours(),e.getMinutes(),e.getSeconds(),(0,He.toNumber)(f.totalNanoseconds(e,t)),f.timeZoneOffsetInSeconds(e))},et.prototype.toString=function(){return f.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+f.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)};p=et;function et(e,t,r,n,o){this.hour=f.assertValidHour(e),this.minute=f.assertValidMinute(t),this.second=f.assertValidSecond(r),this.nanosecond=f.assertValidNanosecond(n),this.timeZoneOffsetSeconds=(0,We.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}u.Time=p,Object.defineProperty(p.prototype,Ke,l);tt.fromStandardDate=function(e){return this.fromStandardDateLocal(e)},tt.fromStandardDateLocal=function(e){return ut(e),new tt(e.getFullYear(),e.getMonth()+1,e.getDate())},tt.fromStandardDateUTC=function(e){return ut(e),new tt(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate())},tt.prototype.toStandardDate=function(){return f.isoStringToStandardDate(this.toString())},tt.prototype.toString=function(){return f.dateToIsoString(this.year,this.month,this.day)};p=tt;function tt(e,t,r){this.year=f.assertValidYear(e),this.month=f.assertValidMonth(t),this.day=f.assertValidDay(r),Object.freeze(this)}u.Date=p,Object.defineProperty(p.prototype,Ze,l);rt.fromStandardDate=function(e,t){return ut(e,t),new rt(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,He.toNumber)(f.totalNanoseconds(e,t)))},rt.prototype.toStandardDate=function(){return f.isoStringToStandardDate(this.toString())},rt.prototype.toString=function(){return it(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)};p=rt;function rt(e,t,r,n,o,i,u){this.year=f.assertValidYear(e),this.month=f.assertValidMonth(t),this.day=f.assertValidDay(r),this.hour=f.assertValidHour(n),this.minute=f.assertValidMinute(o),this.second=f.assertValidSecond(i),this.nanosecond=f.assertValidNanosecond(u),Object.freeze(this)}u.LocalDateTime=p,Object.defineProperty(p.prototype,Qe,l);nt.fromStandardDate=function(e,t){return ut(e,t),new nt(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,He.toNumber)(f.totalNanoseconds(e,t)),f.timeZoneOffsetInSeconds(e),null)},nt.prototype.toStandardDate=function(){return f.toStandardDate(this._toUTC())},nt.prototype.toString=function(){var e;return it(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(null!=this.timeZoneOffsetSeconds?f.timeZoneOffsetToIsoString(null!=(e=this.timeZoneOffsetSeconds)?e:0):"")+(null!=this.timeZoneId?"[".concat(this.timeZoneId,"]"):"")},nt.prototype._toUTC=function(){if(void 0===this.timeZoneOffsetSeconds)throw new Error("Requires DateTime created with time zone offset");var e=f.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract(null!=(e=this.timeZoneOffsetSeconds)?e:0);return(0,He.int)(e).multiply(1e3).add((0,He.int)(this.nanosecond).div(1e6)).toNumber()};p=nt;function nt(e,t,r,n,o,i,u,a,s){this.year=f.assertValidYear(e),this.month=f.assertValidMonth(t),this.day=f.assertValidDay(r),this.hour=f.assertValidHour(n),this.minute=f.assertValidMinute(o),this.second=f.assertValidSecond(i),this.nanosecond=f.assertValidNanosecond(u);e=qe(function(e,t){var r=null!=e,n=null!=t&&""!==t;if(!r&&!n)throw(0,ze.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(t));var o=[void 0,void 0];r&&((0,We.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e);n&&((0,We.assertString)(t,"Time zone ID"),f.assertValidZoneId("Time zone ID",t),o[1]=t);return o}(a,s),2),t=e[0],r=e[1];this.timeZoneOffsetSeconds=t,this.timeZoneId=null!=r?r:void 0,Object.freeze(this)}function ot(e,t){return null!=e&&!0===e[t]}function it(e,t,r,n,o,i,u){return f.dateToIsoString(e,t,r)+"T"+f.timeToIsoString(n,o,i,u)}function ut(e,t){(0,We.assertValidDate)(e,"Standard date"),null!=t&&(0,We.assertNumberOrInteger)(t,"Nanosecond")}u.DateTime=p,Object.defineProperty(p.prototype,Xe,l);var at,st,ct,lt,ft,pt,p={},l={},dt={},ht=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bt=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};function yt(e,t,r,n){var o=pt(r),e=_t(e.get(null!=(e=null==n?void 0:n.from)?e:o),"".concat(t.constructor.name,"#").concat(r),n);t[r]=null!=e?e:t[r]}function _t(e,t,r){return!0===(null==r?void 0:r.optional)&&null==e?e:("function"==typeof(null==r?void 0:r.validate)&&r.validate(e,t),null!=(null==r?void 0:r.convert)?r.convert(e,t):e)}Object.defineProperty(dt,"__esModule",{value:!0}),dt.nameConventions=dt.StandardCase=void 0,dt.StandardCase={SnakeCase:"snake_case",KebabCase:"kebab-case",ScreamingSnakeCase:"SCREAMING_SNAKE_CASE",PascalCase:"PascalCase",CamelCase:"camelCase"},dt.nameConventions={snake_case:{tokenize:function(e){return e.split("_")},encode:function(e){return e.join("_")}},"kebab-case":{tokenize:function(e){return e.split("-")},encode:function(e){return e.join("-")}},PascalCase:{tokenize:function(e){return e.split(/(?=[A-Z])/).map(function(e){return e.toLowerCase()})},encode:function(e){var t,r,n="";try{for(var o=ht(e),i=o.next();!i.done;i=o.next()){var u=i.value;n+=u=u.charAt(0).toUpperCase()+u.slice(1)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}},camelCase:{tokenize:function(e){return e.split(/(?=[A-Z])/).map(function(e){return e.toLowerCase()})},encode:function(e){var t,r,n="";try{for(var o=ht(e.entries()),i=o.next();!i.done;i=o.next()){var u=bt(i.value,2),a=u[0],s=u[1];n+=s=0!==a?s.charAt(0).toUpperCase()+s.slice(1):s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}},SCREAMING_SNAKE_CASE:{tokenize:function(e){return e.split("_").map(function(e){return e.toLowerCase()})},encode:function(e){return e.join("_").toUpperCase()}}},at=l,st=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ct=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Object.defineProperty(at,"__esModule",{value:!0}),at.RecordObjectMapping=at.rulesRegistry=void 0,at.as=function(e,t,r){var n,o,i,u,a="function"==typeof t?t:Object,s=function(e,t){t="object"==typeof e?e:t;return null==t?"object"!=typeof e?at.rulesRegistry[e.name]:void 0:t}(t,r),c=[],l=new a;try{for(var f=st(Object.entries(null!=s?s:{})),p=f.next();!p.done;p=f.next()){var d=ct(p.value,2),h=d[0],b=d[1];c.push(h),yt(e,l,h,b)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}try{for(var y=st(Object.getOwnPropertyNames(l)),_=y.next();!_.done;_=y.next()){h=_.value;c.includes(h)||yt(e,l,h,null==s?void 0:s[h])}}catch(e){i={error:e}}finally{try{_&&!_.done&&(u=y.return)&&u.call(y)}finally{if(i)throw i.error}}return l},at.valueAs=_t,lt=t,ft=dt,at.rulesRegistry={},pt=function(e){return e},at.RecordObjectMapping=Object.freeze({clearMappingRegistry:function(){at.rulesRegistry={}},getCaseTranslator:function(t,r){var e=Object.keys(ft.nameConventions);if(!e.includes(t))throw(0,lt.newError)("Naming convention ".concat(t," is not recognized, \n      please provide a recognized name convention or manually provide a translation function."));if(e.includes(r))return function(e){return ft.nameConventions[t].encode(ft.nameConventions[r].tokenize(e))};throw(0,lt.newError)("Naming convention ".concat(r," is not recognized, \n      please provide a recognized name convention or manually provide a translation function."))},register:function(e,t){at.rulesRegistry[e.name]=t},translateIdentifiers:function(e){pt=e}}),Object.defineProperty(p,"__esModule",{value:!0}),p.PathSegment=p.Path=p.UnboundRelationship=p.Relationship=p.Node=void 0,p.isNode=function(e){return St(e,Ot)},p.isRelationship=function(e){return St(e,wt)},p.isUnboundRelationship=function(e){return St(e,Et)},p.isPath=function(e){return St(e,Pt)},p.isPathSegment=function(e){return St(e,Tt)};var vt=F,mt=l,gt={value:!0,enumerable:!1,configurable:!1,writable:!1},Ot="__isNode__",wt="__isRelationship__",Et="__isUnboundRelationship__",Pt="__isPath__",Tt="__isPathSegment__";function St(e,t){return null!=e&&!0===e[t]}Ct.prototype.as=function(e,t){var r=this;return(0,mt.as)({get:function(e){return r.properties[e]}},e,t)},Ct.prototype.toString=function(){for(var e="("+this.elementId,t=0;t<this.labels.length;t++)e+=":"+this.labels[t];var r=Object.keys(this.properties);if(0<r.length){e+=" {";for(t=0;t<r.length;t++)0<t&&(e+=","),e+=r[t]+":"+(0,vt.stringify)(this.properties[r[t]]);e+="}"}return e+=")"};var jt=Ct;function Ct(e,t,r,n){this.identity=e,this.labels=t,this.properties=r,this.elementId=Nt(n,function(){return e.toString()})}p.Node=jt,Object.defineProperty(jt.prototype,Ot,gt);Rt.prototype.as=function(e,t){var r=this;return(0,mt.as)({get:function(e){return r.properties[e]}},e,t)},Rt.prototype.toString=function(){var e="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+(0,vt.stringify)(this.properties[t[r]]);e+="}"}return e+="]->("+this.endNodeElementId+")"};var It=Rt;function Rt(e,t,r,n,o,i,u,a){this.identity=e,this.start=t,this.end=r,this.type=n,this.properties=o,this.elementId=Nt(i,function(){return e.toString()}),this.startNodeElementId=Nt(u,function(){return t.toString()}),this.endNodeElementId=Nt(a,function(){return r.toString()})}p.Relationship=It,Object.defineProperty(It.prototype,wt,gt);At.prototype.bind=function(e,t){return new It(this.identity,e,t,this.type,this.properties,this.elementId)},At.prototype.bindTo=function(e,t){return new It(this.identity,e.identity,t.identity,this.type,this.properties,this.elementId,e.elementId,t.elementId)},At.prototype.as=function(e,t){var r=this;return(0,mt.as)({get:function(e){return r.properties[e]}},e,t)},At.prototype.toString=function(){var e="-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+(0,vt.stringify)(this.properties[t[r]]);e+="}"}return e+="]->"};jt=At;function At(e,t,r,n){this.identity=e,this.type=t,this.properties=r,this.elementId=Nt(n,function(){return e.toString()})}p.UnboundRelationship=jt,Object.defineProperty(jt.prototype,Et,gt);function kt(e,t,r){this.start=e,this.relationship=t,this.end=r}p.PathSegment=kt,Object.defineProperty(kt.prototype,Tt,gt);function Mt(e,t,r){this.start=e,this.end=t,this.segments=r,this.length=r.length}function Nt(e,t){return null==e?t():e}p.Path=Mt,Object.defineProperty(Mt.prototype,Pt,gt);var jt={},xt=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},Dt=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Lt=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Ut=(Object.defineProperty(jt,"__esModule",{value:!0}),t),Ft=l;function Bt(e,t,r){var n;this.keys=e,this.length=e.length,this._fields=t,this._fieldLookup=null!=r?r:(n={},e.forEach(function(e,t){n[e]=t}),n)}Bt.prototype.forEach=function(e){var t,r;try{for(var n=Dt(this.entries()),o=n.next();!o.done;o=n.next()){var i=Lt(o.value,2),u=i[0];e(i[1],u,this)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},Bt.prototype.map=function(e){var t,r,n=[];try{for(var o=Dt(this.entries()),i=o.next();!i.done;i=o.next()){var u=Lt(i.value,2),a=u[0],s=u[1];n.push(e(s,a,this))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},Bt.prototype.as=function(e,t){return(0,Ft.as)(this,e,t)},Bt.prototype.entries=function(){var t;return xt(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},Bt.prototype.values=function(){var t;return xt(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},Bt.prototype[Symbol.iterator]=function(){var t;return xt(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},Bt.prototype.toObject=function(){var t,e,r={};try{for(var n=Dt(this.entries()),o=n.next();!o.done;o=n.next()){var i=Lt(o.value,2),u=i[0],a=i[1];r[u]=a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},Bt.prototype.get=function(e){var t;if("number"!=typeof e){if(void 0===(t=this._fieldLookup[e]))throw(0,Ut.newError)("This record has no field with key '".concat(e.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=e;if(t>this._fields.length-1||t<0)throw(0,Ut.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},Bt.prototype.has=function(e){return"number"==typeof e?0<=e&&e<this._fields.length:void 0!==this._fieldLookup[e]},jt.default=Bt;var gt={},Vt=(Object.defineProperty(gt,"__esModule",{value:!0}),gt.Point=void 0,gt.isPoint=function(e){var t=e;return null!=e&&!0===t[qt]},c),qt="__isPoint__",Wt=(zt.prototype.toString=function(){return null==this.z||isNaN(this.z)?"Point{srid=".concat(Ht(this.srid),", x=").concat(Ht(this.x),", y=").concat(Ht(this.y),"}"):"Point{srid=".concat(Ht(this.srid),", x=").concat(Ht(this.x),", y=").concat(Ht(this.y),", z=").concat(Ht(this.z),"}")},zt);function zt(e,t,r,n){this.srid=(0,Vt.assertNumberOrInteger)(e,"SRID"),this.x=(0,Vt.assertNumber)(t,"X coordinate"),this.y=(0,Vt.assertNumber)(r,"Y coordinate"),this.z=null==n?n:(0,Vt.assertNumber)(n,"Z coordinate"),Object.freeze(this)}function Ht(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}gt.Point=Wt,Object.defineProperty(Wt.prototype,qt,{value:!0,enumerable:!1,configurable:!1,writable:!1});var Wt={},h={},Gt={},b=(Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.FailedObserver=Gt.CompletedObserver=void 0,Yt.prototype.subscribe=function(e){Zt(e,e.onKeys,[]),Zt(e,e.onCompleted,{})},Yt.prototype.cancel=function(){},Yt.prototype.pause=function(){},Yt.prototype.resume=function(){},Yt.prototype.prepareToHandleSingleResponse=function(){},Yt.prototype.markCompleted=function(){},Yt.prototype.onError=function(e){throw new Error("CompletedObserver not supposed to call onError",{cause:e})},Yt);function Yt(){}function Kt(e){var t=e.error,e=e.onError;this._error=t,this._beforeError=e,this._observers=[],this.onError(t)}function Zt(e,t,r){null!=t&&t.bind(e)(r)}Gt.CompletedObserver=b,Kt.prototype.subscribe=function(e){Zt(e,e.onError,this._error),this._observers.push(e)},Kt.prototype.onError=function(t){Zt(this,this._beforeError,t),this._observers.forEach(function(e){return Zt(e,e.onError,t)})},Kt.prototype.cancel=function(){},Kt.prototype.pause=function(){},Kt.prototype.resume=function(){},Kt.prototype.markCompleted=function(){},Kt.prototype.prepareToHandleSingleResponse=function(){},Gt.FailedObserver=Kt;var Qt,b={},Xt=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),Jt=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),y=r&&r.__importStar||(Qt=function(e){return(Qt=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Qt(e),n=0;n<r.length;n++)"default"!==r[n]&&Xt(t,e,r[n]);return Jt(t,e),t}),$t=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},er=r&&r.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},tr=(Object.defineProperty(b,"__esModule",{value:!0}),b.Bookmarks=void 0,y(c)),y=(rr.empty=function(){return nr},rr.prototype.isEmpty=function(){return 0===this._values.length},rr.prototype.values=function(){return this._values},rr.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},rr.prototype.asBeginTransactionParameters=function(){var e;return this.isEmpty()?{}:((e={}).bookmarks=this._values,e)},rr);function rr(e){this._values=function(e){if(null==e||""===e)return[];if(tr.isString(e))return[e];if(Array.isArray(e)){for(var t=new Set,r=function r(e){return e.reduce(function(e,t){return Array.isArray(t)?e.concat(r(t)):e.concat(t)},[])}(e),n=0;n<r.length;n++){var o=r[n];if(null!=o){if(!tr.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));t.add(o)}}return er([],$t(t),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}(e)}var nr=new(b.Bookmarks=y)(null);var y={},or={},_=(Object.defineProperty(or,"__esModule",{value:!0}),or.ProtocolVersion=void 0,ir.prototype.getMajor=function(){return this.major},ir.prototype.getMinor=function(){return this.major},ir.prototype.isLessThan=function(e){return this.major<e.major||this.major===e.major&&this.minor<e.minor},ir.prototype.isGreaterThan=function(e){return this.major>e.major||this.major===e.major&&this.minor>e.minor},ir.prototype.isGreaterOrEqualTo=function(e){return!this.isLessThan(e)},ir.prototype.isLessOrEqualTo=function(e){return!this.isGreaterThan(e)},ir.prototype.isEqualTo=function(e){return this.major===e.major&&this.minor===e.minor},ir.prototype.toString=function(){return this.major.toString()+"."+this.minor.toString()},ir);function ir(e,t){this.major=e,this.minor=t}or.ProtocolVersion=_,Object.defineProperty(y,"__esModule",{value:!0}),y.TELEMETRY_APIS=y.BOLT_PROTOCOL_V6_0=y.BOLT_PROTOCOL_V5_8=y.BOLT_PROTOCOL_V5_7=y.BOLT_PROTOCOL_V5_6=y.BOLT_PROTOCOL_V5_5=y.BOLT_PROTOCOL_V5_4=y.BOLT_PROTOCOL_V5_3=y.BOLT_PROTOCOL_V5_2=y.BOLT_PROTOCOL_V5_1=y.BOLT_PROTOCOL_V5_0=y.BOLT_PROTOCOL_V4_4=y.BOLT_PROTOCOL_V4_3=y.BOLT_PROTOCOL_V4_2=y.BOLT_PROTOCOL_V4_1=y.BOLT_PROTOCOL_V4_0=y.BOLT_PROTOCOL_V3=y.BOLT_PROTOCOL_V2=y.BOLT_PROTOCOL_V1=y.DEFAULT_POOL_MAX_SIZE=y.DEFAULT_POOL_ACQUISITION_TIMEOUT=y.DEFAULT_CONNECTION_TIMEOUT_MILLIS=y.ACCESS_MODE_WRITE=y.ACCESS_MODE_READ=y.FETCH_ALL=void 0;var ur,ar,_=or,v=(y.FETCH_ALL=-1,y.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4,y.DEFAULT_POOL_MAX_SIZE=100,y.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4,y.ACCESS_MODE_READ="READ",y.ACCESS_MODE_WRITE="WRITE",new _.ProtocolVersion(1,0)),v=(y.BOLT_PROTOCOL_V1=v,new _.ProtocolVersion(2,0)),v=(y.BOLT_PROTOCOL_V2=v,new _.ProtocolVersion(3,0)),v=(y.BOLT_PROTOCOL_V3=v,new _.ProtocolVersion(4,0)),v=(y.BOLT_PROTOCOL_V4_0=v,new _.ProtocolVersion(4,1)),v=(y.BOLT_PROTOCOL_V4_1=v,new _.ProtocolVersion(4,2)),v=(y.BOLT_PROTOCOL_V4_2=v,new _.ProtocolVersion(4,3)),v=(y.BOLT_PROTOCOL_V4_3=v,new _.ProtocolVersion(4,4)),v=(y.BOLT_PROTOCOL_V4_4=v,new _.ProtocolVersion(5,0)),v=(y.BOLT_PROTOCOL_V5_0=v,new _.ProtocolVersion(5,1)),v=(y.BOLT_PROTOCOL_V5_1=v,new _.ProtocolVersion(5,2)),v=(y.BOLT_PROTOCOL_V5_2=v,new _.ProtocolVersion(5,3)),v=(y.BOLT_PROTOCOL_V5_3=v,new _.ProtocolVersion(5,4)),v=(y.BOLT_PROTOCOL_V5_4=v,new _.ProtocolVersion(5,5)),v=(y.BOLT_PROTOCOL_V5_5=v,new _.ProtocolVersion(5,6)),v=(y.BOLT_PROTOCOL_V5_6=v,new _.ProtocolVersion(5,7)),v=(y.BOLT_PROTOCOL_V5_7=v,new _.ProtocolVersion(5,8)),v=(y.BOLT_PROTOCOL_V5_8=v,new _.ProtocolVersion(6,0)),_=(y.BOLT_PROTOCOL_V6_0=v,y.TELEMETRY_APIS={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3},{}),v={},sr=r&&r.__extends||(ur=function(e,t){return(ur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ur(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),cr=(Object.defineProperty(v,"__esModule",{value:!0}),v.Logger=void 0,t),lr="error",fr="warn",pr="info",dr="debug",hr=((m={})[lr]=0,m[fr]=1,m[pr]=2,m[dr]=3,m),m=(br.create=function(e){return null!=(null==e?void 0:e.logging)?new br(function(e){if(null==(null==e?void 0:e.level))return"info";var e=e.level,t=hr[e];if(null!=t||0===t)return e;throw(0,cr.newError)("Illegal logging level: ".concat(e,". Supported levels are: ").concat(Object.keys(hr).toString()))}(e=e.logging),function(e){if(null!=(null==e?void 0:e.logger)){var t=e.logger;if(null!=t&&"function"==typeof t)return t}throw(0,cr.newError)("Illegal logger function: ".concat(null!=(e=null==(t=null==e?void 0:e.logger)?void 0:t.toString())?e:"undefined"))}(e)):this.noOp()},br.noOp=function(){return _r},br.prototype.isErrorEnabled=function(){return vr(this._level,lr)},br.prototype.error=function(e){this.isErrorEnabled()&&this._loggerFunction(lr,e)},br.prototype.isWarnEnabled=function(){return vr(this._level,fr)},br.prototype.warn=function(e){this.isWarnEnabled()&&this._loggerFunction(fr,e)},br.prototype.isInfoEnabled=function(){return vr(this._level,pr)},br.prototype.info=function(e){this.isInfoEnabled()&&this._loggerFunction(pr,e)},br.prototype.isDebugEnabled=function(){return vr(this._level,dr)},br.prototype.debug=function(e){this.isDebugEnabled()&&this._loggerFunction(dr,e)},br);function br(e,t){this._level=e,this._loggerFunction=t}function yr(){return ar.call(this,pr,function(e,t){})||this}v.Logger=m,sr(yr,ar=m),yr.prototype.isErrorEnabled=function(){return!1},yr.prototype.error=function(e){},yr.prototype.isWarnEnabled=function(){return!1},yr.prototype.warn=function(e){},yr.prototype.isInfoEnabled=function(){return!1},yr.prototype.info=function(e){},yr.prototype.isDebugEnabled=function(){return!1},yr.prototype.debug=function(e){};var _r=new yr;function vr(e,t){return hr[e]>=hr[t]}var mr,sr=r&&r.__extends||(mr=function(e,t){return(mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}mr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),gr=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Or=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},wr=(Object.defineProperty(_,"__esModule",{value:!0}),_.EMPTY_CONNECTION_HOLDER=_.ReadOnlyConnectionHolder=_.ConnectionHolder=void 0,t),Er=c,Pr=y,Tr=b,Sr=v,m=(jr.prototype.mode=function(){return this._mode},jr.prototype.database=function(){return this._database},jr.prototype.setDatabase=function(e){this._database=e},jr.prototype.bookmarks=function(){return this._bookmarks},jr.prototype.connectionProvider=function(){return this._connectionProvider},jr.prototype.referenceCount=function(){return this._referenceCount},jr.prototype.initializeConnection=function(e){return 0!==this._referenceCount||null==this._connectionProvider?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider,e),this._referenceCount++,!0)},jr.prototype._createConnectionPromise=function(o,i){return gr(this,void 0,void 0,function(){var t,r,n;return Or(this,function(e){switch(e.label){case 0:return r=(t=o).acquireConnection,n={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,r.apply(t,[(n.bookmarks=e.sent(),n.impersonatedUser=this._impersonatedUser,n.onDatabaseNameResolved=this._onDatabaseNameResolved,n.auth=this._auth,n.homeDb=i,n)])];case 2:return[2,e.sent()]}})})},jr.prototype._getBookmarks=function(){return gr(this,void 0,void 0,function(){return Or(this,function(e){switch(e.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,e.sent()]}})})},jr.prototype.getConnection=function(){return this._connectionPromise},jr.prototype.releaseConnection=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)},jr.prototype.close=function(e){return this._closed=!0,0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(e))},jr.prototype.log=function(){return this._log},jr.prototype._releaseConnection=function(t){return this._connectionPromise=this._connectionPromise.then(function(e){return null!=e?e.isOpen()&&(e.hasOngoingObservableRequests()||!0===t)?e.resetAndFlush().catch(kr).then(function(){return e.release().then(function(){return null})}):e.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},jr.prototype._logError=function(e){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(e,". Stacktrace: ").concat(e.stack)),null},jr);function jr(e){var t=e.mode,r=e.database,r=void 0===r?"":r,n=e.bookmarks,o=e.connectionProvider,i=e.impersonatedUser,u=e.onDatabaseNameResolved,a=e.getConnectionAcquistionBookmarks,s=e.auth,e=e.log;this._mode=null!=t?t:Pr.ACCESS_MODE_WRITE,this._closed=!1,this._database=null!=r?(0,Er.assertString)(r,"database"):"",this._bookmarks=null!=n?n:Tr.Bookmarks.empty(),this._connectionProvider=o,this._impersonatedUser=i,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=u,this._auth=s,this._log=e,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=null!=a?a:function(){return Promise.resolve(Tr.Bookmarks.empty())}}_.ConnectionHolder=m;sr(Rr,Cr=m),Rr.prototype.initializeConnection=function(){return 0!==this._connectionHolder.referenceCount()},Rr.prototype.getConnection=function(){return this._connectionHolder.getConnection()},Rr.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},Rr.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})};var Cr,Ir,g=Rr;function Rr(e){var t=Cr.call(this,{mode:e.mode(),database:e.database(),bookmarks:e.bookmarks(),getConnectionAcquistionBookmarks:e._getConnectionAcquistionBookmarks,connectionProvider:e.connectionProvider(),log:e.log()})||this;return t._connectionHolder=e,t}function Ar(){return Ir.call(this,{log:Sr.Logger.create({})})||this}_.ReadOnlyConnectionHolder=g,_.default=g,sr(Ar,Ir=m),Ar.prototype.mode=function(){},Ar.prototype.database=function(){},Ar.prototype.initializeConnection=function(){return!0},Ar.prototype.getConnection=function(){return gr(this,void 0,void 0,function(){return Or(this,function(e){switch(e.label){case 0:return[4,Promise.reject((0,wr.newError)("This connection holder does not serve connections"))];case 1:return[2,e.sent()]}})})},Ar.prototype.releaseConnection=function(){return gr(this,void 0,void 0,function(){return Or(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,e.sent()]}})})},Ar.prototype.close=function(){return gr(this,void 0,void 0,function(){return Or(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,e.sent()]}})})};g=new Ar;function kr(e){return null}_.EMPTY_CONNECTION_HOLDER=g;var Mr,sr={},Nr=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),xr=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),m=r&&r.__importStar||(Mr=function(e){return(Mr=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Mr(e),n=0;n<r.length;n++)"default"!==r[n]&&Nr(t,e,r[n]);return xr(t,e),t}),Dr=(Object.defineProperty(sr,"__esModule",{value:!0}),sr.TxConfig=void 0,m(c)),Lr=t,Ur=i,g=(Fr.empty=function(){return Br},Fr.prototype.isEmpty=function(){return Object.values(this).every(function(e){return null==e})},Fr);function Fr(e,t){var r;null!=(r=e)&&Dr.assertObject(r,"Transaction config"),this.timeout=function(e,t){if(Dr.isObject(e)&&null!=e.timeout){Dr.assertNumberOrInteger(e.timeout,"Transaction timeout"),!function(e){return"number"==typeof e.timeout&&!Number.isInteger(e.timeout)}(e)||!0!==(null==t?void 0:t.isInfoEnabled())||null==t||t.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up."));t=(0,Ur.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,Lr.newError)("Transaction timeout should not be negative");return t}return null}(e,t),this.metadata=function(e){if(Dr.isObject(e)&&null!=e.metadata){e=e.metadata;if(Dr.assertObject(e,"config.metadata"),0!==Object.keys(e).length)return e}return null}(e)}var Br=new(sr.TxConfig=g)({});var m={},Vr=r&&r.__assign||function(){return(Vr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},qr=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Wr=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},zr=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Hr=r&&r.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Gr=(Object.defineProperty(m,"__esModule",{value:!0}),m.TransactionExecutor=void 0,t),Yr=y;function Kr(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,Hr([e,t],zr(r),!1))}function Zr(e){return clearTimeout(e)}function Qr(e,t,r,n,o){void 0===o&&(o={setTimeout:Kr,clearTimeout:Zr}),this._maxRetryTimeMs=Xr(e,3e4),this._initialRetryDelayMs=Xr(t,1e3),this._multiplier=Xr(r,2),this._jitterFactor=Xr(n,.2),this._setTimeout=o.setTimeout,this._clearTimeout=o.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=Yr.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}function Xr(e,t){return null!=e?e:t}Qr.prototype.execute=function(n,o,i){var u=this,a={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){a.apiTransactionConfig=void 0}}};return new Promise(function(e,t){u._executeTransactionInsidePromise(n,o,e,t,i,a).catch(t)}).catch(function(e){var t=Date.now(),r=u._initialRetryDelayMs;return u._retryTransactionPromise(n,o,e,t,r,i,a)})},Qr.prototype.close=function(){var t=this;this._inFlightTimeoutIds.forEach(function(e){return t._clearTimeout(e)}),this._inFlightTimeoutIds=[]},Qr.prototype._retryTransactionPromise=function(o,i,e,r,u,a,s){var c=this;return Date.now()-r>this._maxRetryTimeMs||!(0,Gr.isRetryableError)(e)?Promise.reject(e):new Promise(function(e,t){var r=c._computeDelayWithJitter(u),n=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(e){return e!==n}),c._executeTransactionInsidePromise(o,i,e,t,a,s).catch(t)},r);c._inFlightTimeoutIds.push(n)}).catch(function(e){var t=u*c._multiplier;return c._retryTransactionPromise(o,i,e,r,t,a,s)})},Qr.prototype._executeTransactionInsidePromise=function(u,a,s,c,l,f){return qr(this,void 0,void 0,function(){var t,r,n,o,i=this;return Wr(this,function(e){switch(e.label){case 0:return(e.trys.push([0,4,,5]),r=u(null!=(null==f?void 0:f.apiTransactionConfig)?Vr({},null==f?void 0:f.apiTransactionConfig):void 0),this.pipelineBegin)?(n=r,[3,3]):[3,1];case 1:return[4,r];case 2:n=e.sent(),e.label=3;case 3:return t=n,[3,5];case 4:return o=e.sent(),c(o),[2];case 5:return o=(null!=l?l:function(e){return e})(t),this._safeExecuteTransactionWork(o,a).then(function(e){return i._handleTransactionWorkSuccess(e,t,s,c)}).catch(function(e){return i._handleTransactionWorkFailure(e,t,c)}),[2]}})})},Qr.prototype._safeExecuteTransactionWork=function(e,t){try{var r=t(e);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},Qr.prototype._handleTransactionWorkSuccess=function(e,t,r,n){t.isOpen()?t.commit().then(function(){r(e)}).catch(function(e){n(e)}):r(e)},Qr.prototype._handleTransactionWorkFailure=function(e,t,r){t.isOpen()?t.rollback().catch(function(e){}).then(function(){return r(e)}).catch(r):r(e)},Qr.prototype._computeDelayWithJitter=function(e){var t=e*this._jitterFactor,r=e-t,e=e+t;return Math.random()*(e-r)+r},Qr.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,Gr.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,Gr.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,Gr.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||1<this._jitterFactor)throw(0,Gr.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},m.TransactionExecutor=Qr;var g={},Jr=r&&r.__assign||function(){return(Jr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},$r=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},en=(Object.defineProperty(g,"__esModule",{value:!0}),g.Url=void 0,g.parseDatabaseUrl=function(e){(0,en.assertString)(e,"URL");var t=function(e){return(e=e.trim()).includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}(e),r=function(e){function u(e,t){t=e.indexOf(t);return 0<=t?[e.substring(0,t),e[t],e.substring(t+1)]:[e,"",""]}function t(e){var t,r={},n=((t="@")===(t=0<=(t=(o=e).lastIndexOf(t))?[o.substring(0,t),o[t],o.substring(t+1)]:["","",o])[1]&&(r.userInfo=decodeURIComponent(t[0]),e=t[2]),$r((o="]",n=u(n=e,i="["),[(i=u(n[2],o))[0],i[2]]),2)),o=n[0],i=n[1];return""!==o?(r.host=o,t=u(i,":")):(t=u(e,":"),r.host=t[0]),":"===t[1]&&(r.port=t[2]),r}var r,n={};":"===(r=u(e,":"))[1]&&(n.scheme=decodeURIComponent(r[0]),e=r[2]);"#"===(r=u(e,"#"))[1]&&(n.fragment=decodeURIComponent(r[2]),e=r[0]);"?"===(r=u(e,"?"))[1]&&(n.query=r[2],e=r[0]);e.startsWith("//")?(r=u(e.substr(2),"/"),(n=Jr(Jr({},n),t(r[0]))).path=r[1]+r[2]):n.path=e;return n}(t.url),t=t.schemeMissing?null:function(e){if(null==e)return null;":"===(e=e.trim()).charAt(e.length-1)&&(e=e.substring(0,e.length-1));return e}(r.scheme),n=function(e){if(null!=e)return e.trim();throw new Error("Unable to extract host from null or undefined URL")}(r.host),o=function(e){if(""!==e&&null!=e)return e.includes(":")?an(e):e;throw new Error("Illegal host ".concat(e))}(n),i=function(e,t){e="string"==typeof e?parseInt(e,10):e;return null==e||isNaN(e)?sn(t):e}(r.port,t),o="".concat(o,":").concat(i),u=function(e,r){var e=null!=e?function(e){"?"===(null==(e=(null!=e?e:"").trim())?void 0:e.charAt(0))&&(e=e.substring(1,e.length));return e}(e):null,n={};null!=e&&e.split("&").forEach(function(e){e=e.split("=");if(2!==e.length)throw new Error("Invalid parameters: '".concat(e.toString(),"' in URL '").concat(r,"'."));var t=un(e[0],"key",r),e=un(e[1],"value",r);if(void 0!==n[t])throw new Error("Duplicated query parameters with key '".concat(t,"' in URL '").concat(r,"'"));n[t]=e});return n}(null!=(u=r.query)?u:function(e){return"string"==typeof e?$r(e.split("?"),2)[1]:null}(r.resourceName),e);return new on(t,n,i,o,u)},g.defaultPortForScheme=sn,g.formatIPv4Address=function(e,t){return"".concat(e,":").concat(t)},g.formatIPv6Address=function(e,t){e=an(e);return"".concat(e,":").concat(t)},c),tn=7687,rn=7474,nn=7473,on=function(e,t,r,n,o){this.scheme=e,this.host=t,this.port=r,this.hostAndPort=n,this.query=o};function un(e,t,r){if(""===(e=(null!=e?e:"").trim()))throw new Error("Illegal empty ".concat(t," in URL query '").concat(r,"'"));return e}function an(e){var t="["===e.charAt(0),r="]"===e.charAt(e.length-1);if(t||r){if(t&&r)return e;throw new Error("Illegal IPv6 address ".concat(e))}return"[".concat(e,"]")}function sn(e){return"http"===e?rn:"https"===e?nn:tn}g.Url=on;var cn,ln={},fn=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),pn=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),O=r&&r.__importStar||(cn=function(e){return(cn=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=cn(e),n=0;n<r.length;n++)"default"!==r[n]&&fn(t,e,r[n]);return pn(t,e),t}),dn=(Object.defineProperty(ln,"__esModule",{value:!0}),ln.ServerAddress=void 0,c),hn=O(g);function bn(e,t,r,n){this._host=(0,dn.assertString)(e,"host"),this._resolved=null!=t?(0,dn.assertString)(t,"resolved"):null,this._port=(0,dn.assertNumber)(r,"port"),this._hostPort=n,this._stringValue=null!=t?"".concat(n,"(").concat(t,")"):"".concat(n)}bn.prototype.host=function(){return this._host},bn.prototype.resolvedHost=function(){return null!=this._resolved?this._resolved:this._host},bn.prototype.port=function(){return this._port},bn.prototype.resolveWith=function(e){return new bn(this._host,e,this._port,this._hostPort)},bn.prototype.asHostPort=function(){return this._hostPort},bn.prototype.asKey=function(){return this._hostPort},bn.prototype.toString=function(){return this._stringValue},bn.fromUrl=function(e){e=hn.parseDatabaseUrl(e);return new bn(e.host,null,e.port,e.hostAndPort)},ln.ServerAddress=bn;var O={},w={};function yn(){}Object.defineProperty(w,"__esModule",{value:!0}),yn.prototype.resolve=function(){throw new Error("Abstract function")},yn.prototype._resolveToItself=function(e){return Promise.resolve([e])},w.default=yn;var E={},_n=(Object.defineProperty(E,"__esModule",{value:!0}),ln);function vn(e){return Promise.resolve([e])}function mn(e){this._resolverFunction=null!=e?e:vn}mn.prototype.resolve=function(t){var r=this;return new Promise(function(e){return e(r._resolverFunction(t.asHostPort()))}).then(function(e){if(Array.isArray(e))return e.map(function(e){return _n.ServerAddress.fromUrl(e)});throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(e))})},E.default=mn;var gn,P=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},w=(Object.defineProperty(O,"__esModule",{value:!0}),O.ConfiguredCustomResolver=O.BaseHostNameResolver=void 0,P(w)),w=(O.BaseHostNameResolver=w.default,P(E)),P=(O.ConfiguredCustomResolver=w.default,{}),w={};Object.defineProperty(w,"__esModule",{value:!0}),w.fromVersion=function(e,t){void 0===t&&(t=function(){return{get userAgent(){}}});var t=t(),r=null!=t.userAgent?t.userAgent.split("(")[1].split(")")[0]:void 0,t=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:r,languageDetails:t}},S=P,gn=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),T=r&&r.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||gn(t,e,r)},Object.defineProperty(S,"__esModule",{value:!0}),T(w,S);var T={},w={},S=(Object.defineProperty(w,"__esModule",{value:!0}),w.DEFAULT_ACQUISITION_TIMEOUT=w.DEFAULT_MAX_SIZE=void 0,w.DEFAULT_MAX_SIZE=100,w.DEFAULT_ACQUISITION_TIMEOUT=6e4,On.defaultConfig=function(){return new On(100,6e4)},On.fromDriverConfig=function(e){return new On(En(e.maxConnectionPoolSize)?e.maxConnectionPoolSize:100,En(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:6e4)},On);function On(e,t){this.maxSize=wn(e,100),this.acquisitionTimeout=wn(t,6e4)}function wn(e,t){return En(e)?e:t}function En(e){return 0===e||null!=e}w.default=S;var S={},Pn=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Tn=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},j=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Sn=(Object.defineProperty(S,"__esModule",{value:!0}),j(w)),jn=t,Cn=v,j=(In.prototype.acquire=function(s,c,l){return Pn(this,void 0,void 0,function(){var o,i,t,u,a=this;return Tn(this,function(e){switch(e.label){case 0:if(o=c.asKey(),i=this._acquireRequests,t=i[o],(u=null!=s.startTime&&0!==s.startTime?(new Date).getTime()-s.startTime:0)>=this._acquisitionTimeout)throw this.getAcquisitionTimeoutError(c);return null==t&&(i[o]=[]),[4,new Promise(function(e,t){var r=setTimeout(function(){var e=i[o];null!=e&&(i[o]=e.filter(function(e){return e!==n})),n.isCompleted()||n.reject(a.getAcquisitionTimeoutError(c))},a._acquisitionTimeout-u),n=("object"==typeof r&&r.unref(),new kn(o,s,l,e,t,r,a._log));i[o].push(n),a._processPendingAcquireRequests(c)})];case 1:return[2,e.sent()]}})})},In.prototype.getAcquisitionTimeoutError=function(e){var t=e.asKey(),r=this.activeResourceCount(e),e=this.has(e)?this._pools[t].length:0;return(0,jn.newError)("Connection acquisition timed out in ".concat(this._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(r,", Idle conn count = ").concat(e,"."))},In.prototype.purge=function(t){return Pn(this,void 0,void 0,function(){return Tn(this,function(e){switch(e.label){case 0:return[4,this._purgeKey(t.asKey())];case 1:return[2,e.sent()]}})})},In.prototype.apply=function(e,t){e=e.asKey();e in this._pools&&this._pools[e].apply(t)},In.prototype.close=function(){return Pn(this,void 0,void 0,function(){var r=this;return Tn(this,function(e){switch(e.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(t){return Pn(r,void 0,void 0,function(){return Tn(this,function(e){switch(e.label){case 0:return[4,this._purgeKey(t)];case 1:return[2,e.sent()]}})})})).then()];case 1:return[2,e.sent()]}})})},In.prototype.keepAll=function(o){return Pn(this,void 0,void 0,function(){var t,r,n=this;return Tn(this,function(e){switch(e.label){case 0:return t=o.map(function(e){return e.asKey()}),r=Object.keys(this._pools),r=r.filter(function(e){return!t.includes(e)}),[4,Promise.all(r.map(function(t){return Pn(n,void 0,void 0,function(){return Tn(this,function(e){switch(e.label){case 0:return[4,this._purgeKey(t)];case 1:return[2,e.sent()]}})})})).then()];case 1:return[2,e.sent()]}})})},In.prototype.has=function(e){return e.asKey()in this._pools},In.prototype.activeResourceCount=function(e){return null!=(e=this._activeResourceCounts[e.asKey()])?e:0},In.prototype._getOrInitializePoolFor=function(e){var t=this._pools[e];return null==t&&(t=new Un,this._pools[e]=t,this._pendingCreates[e]=0),t},In.prototype._acquire=function(c,l,f){return Pn(this,void 0,void 0,function(){var t,n,r,o,i,u,a,s=this;return Tn(this,function(e){switch(e.label){case 0:if(this._closed)throw(0,jn.newError)("Pool is closed, it is no more able to serve requests.");if(t=l.asKey(),n=this._getOrInitializePoolFor(t),f)return[3,10];e.label=1;case 1:if(!(0<n.length))return[3,10];if(null==(r=n.pop()))return[3,1];Rn(t,this._activeResourceCounts),null!=this._removeIdleObserver&&this._removeIdleObserver(r),o=!1,e.label=2;case 2:return e.trys.push([2,4,,6]),[4,this._validateOnAcquire(c,r)];case 3:return o=e.sent(),[3,6];case 4:return i=e.sent(),An(t,this._activeResourceCounts),n.removeInUse(r),[4,this._destroy(r)];case 5:throw e.sent(),i;case 6:return o?(this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(t)),[2,{resource:r,pool:n}]):[3,7];case 7:return An(t,this._activeResourceCounts),n.removeInUse(r),[4,this._destroy(r)];case 8:e.sent(),e.label=9;case 9:return[3,1];case 10:if(0<this._maxSize&&this.activeResourceCount(l)+this._pendingCreates[t]>=this._maxSize)return[2,{resource:null,pool:n}];this._pendingCreates[t]=this._pendingCreates[t]+1,e.label=11;case 11:return(e.trys.push([11,,15,16]),this.activeResourceCount(l)+n.length>=this._maxSize&&f)?null==(a=n.pop())?[3,13]:(null!=this._removeIdleObserver&&this._removeIdleObserver(a),n.removeInUse(a),[4,this._destroy(a)]):[3,13];case 12:e.sent(),e.label=13;case 13:return[4,this._create(c,l,function(t,r){return Pn(s,void 0,void 0,function(){return Tn(this,function(e){switch(e.label){case 0:return[4,this._release(t,r,n)];case 1:return[2,e.sent()]}})})})];case 14:return u=e.sent(),n.pushInUse(u),Rn(t,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(u," created for the pool ").concat(t)),[3,16];case 15:return this._pendingCreates[t]=this._pendingCreates[t]-1,[7];case 16:return[2,{resource:u,pool:n}]}})})},In.prototype._release=function(n,o,i){return Pn(this,void 0,void 0,function(){var t,r=this;return Tn(this,function(e){switch(e.label){case 0:t=n.asKey(),e.label=1;case 1:return(e.trys.push([1,,9,10]),i.isActive())?[4,this._validateOnRelease(o)]:[3,6];case 2:return e.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(o," destroyed and can't be released to the pool ").concat(t," because it is not functional")),i.removeInUse(o),[4,this._destroy(o)]);case 3:return e.sent(),[3,5];case 4:null!=this._installIdleObserver&&this._installIdleObserver(o,{onError:function(e){r._log.debug("Idle connection ".concat(o," destroyed because of error: ").concat(e));e=r._pools[t];null!=e&&(r._pools[t]=e.filter(function(e){return e!==o}),e.removeInUse(o)),r._destroy(o).catch(function(){})}}),i.push(o),this._log.isDebugEnabled()&&this._log.debug("".concat(o," released to the pool ").concat(t)),e.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(o," destroyed and can't be released to the pool ").concat(t," because pool has been purged")),i.removeInUse(o),[4,this._destroy(o)];case 7:e.sent(),e.label=8;case 8:return[3,10];case 9:return An(t,this._activeResourceCounts),this._processPendingAcquireRequests(n),[7];case 10:return[2]}})})},In.prototype._purgeKey=function(o){return Pn(this,void 0,void 0,function(){var t,r,n;return Tn(this,function(e){switch(e.label){case 0:if(t=this._pools[o],r=[],null==t)return[3,2];for(;0<t.length;)null!=(n=t.pop())&&(null!=this._removeIdleObserver&&this._removeIdleObserver(n),r.push(this._destroy(n)));return t.close(),delete this._pools[o],[4,Promise.all(r)];case 1:e.sent(),e.label=2;case 2:return[2]}})})},In.prototype._processPendingAcquireRequests=function(r){var n,o=this,i=r.asKey(),e=this._acquireRequests[i];null!=e&&(null!=(n=e.shift())?this._acquire(n.context,r,n.requireNew).catch(function(e){return n.reject(e),{resource:null,pool:null}}).then(function(e){var t=e.resource,e=e.pool;null!=t&&null!=e?n.isCompleted()?o._release(r,t,e).catch(function(e){o._log.isDebugEnabled()&&o._log.debug("".concat(t," could not be release back to the pool. Cause: ").concat(e))}):n.resolve(t):n.isCompleted()||(null==o._acquireRequests[i]&&(o._acquireRequests[i]=[]),o._acquireRequests[i].unshift(n))}).catch(function(e){return n.reject(e)}):delete this._acquireRequests[i])},In);function In(e){var t=e.create,t=void 0===t?function(e,t,r){return Pn(s,void 0,void 0,function(){return Tn(this,function(e){switch(e.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,e.sent()]}})})}:t,r=e.destroy,r=void 0===r?function(e){return Pn(s,void 0,void 0,function(){return Tn(this,function(e){switch(e.label){case 0:return[4,Promise.resolve()];case 1:return[2,e.sent()]}})})}:r,n=e.validateOnAcquire,n=void 0===n?function(e,t){return!0}:n,o=e.validateOnRelease,o=void 0===o?function(e){return!0}:o,i=e.installIdleObserver,i=void 0===i?function(e,t){}:i,u=e.removeIdleObserver,u=void 0===u?function(e){}:u,a=e.config,a=void 0===a?Sn.default.defaultConfig():a,e=e.log,e=void 0===e?Cn.Logger.noOp():e,s=this;this._create=t,this._destroy=r,this._validateOnAcquire=n,this._validateOnRelease=o,this._installIdleObserver=i,this._removeIdleObserver=u,this._maxSize=a.maxSize,this._acquisitionTimeout=a.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=e,this._closed=!1}function Rn(e,t){var r=null!=(r=t[e])?r:0;t[e]=r+1}function An(e,t){var r=(null!=(r=t[e])?r:0)-1;0<r?t[e]=r:delete t[e]}Object.defineProperty(Mn.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(Mn.prototype,"requireNew",{get:function(){var e;return null!=(e=this._config.requireNew)&&e},enumerable:!1,configurable:!0}),Mn.prototype.isCompleted=function(){return this._completed},Mn.prototype.resolve=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(e," acquired from the pool ").concat(this._key)),this._resolve(e))},Mn.prototype.reject=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(e))};var kn=Mn;function Mn(e,t,r,n,o,i,u){this._key=e,this._context=t,this._resolve=n,this._reject=o,this._timeoutId=i,this._log=u,this._completed=!1,this._config=null!=r?r:{}}Fn.prototype.isActive=function(){return this._active},Fn.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},Fn.prototype.filter=function(e){return this._elements=this._elements.filter(e),this},Fn.prototype.apply=function(e){this._elements.forEach(e),this._elementsInUse.forEach(e)},Object.defineProperty(Fn.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),Fn.prototype.pop=function(){var e=this._elements.pop();return null!=e&&this._elementsInUse.add(e),e},Fn.prototype.push=function(e){return this._elementsInUse.delete(e),this._elements.push(e)},Fn.prototype.pushInUse=function(e){this._elementsInUse.add(e)},Fn.prototype.removeInUse=function(e){this._elementsInUse.delete(e)};var Nn,xn,Dn,Ln,Un=Fn;function Fn(){this._active=!0,this._elements=[],this._elementsInUse=new Set}S.default=j,j=T,xn=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),Dn=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Hn=r&&r.__importStar||(Nn=function(e){return(Nn=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Nn(e),n=0;n<r.length;n++)"default"!==r[n]&&xn(t,e,r[n]);return Dn(t,e),t}),zn=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(j,"__esModule",{value:!0}),j.DEFAULT_MAX_SIZE=j.DEFAULT_ACQUISITION_TIMEOUT=j.PoolConfig=j.Pool=void 0,Ln=Hn(w),j.PoolConfig=Ln.default,Object.defineProperty(j,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return Ln.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(j,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return Ln.DEFAULT_MAX_SIZE}}),Hn=zn(S),j.Pool=Hn.default,j.default=Hn.default;var Bn,Vn,qn=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),Wn=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),w=r&&r.__importStar||(Bn=function(e){return(Bn=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Bn(e),n=0;n<r.length;n++)"default"!==r[n]&&qn(t,e,r[n]);return Wn(t,e),t}),zn=(Object.defineProperty(h,"__esModule",{value:!0}),h.pool=h.boltAgent=h.objectUtil=h.resolver=h.serverAddress=h.urlUtil=h.logger=h.transactionExecutor=h.txConfig=h.connectionHolder=h.constants=h.bookmarks=h.observer=h.temporalUtil=h.util=void 0,w(c)),S=(h.util=zn,w(o)),j=(h.temporalUtil=S,w(Gt)),Hn=(h.observer=j,w(b)),zn=(h.bookmarks=Hn,w(y)),o=(h.constants=zn,w(_)),S=(h.connectionHolder=o,w(sr)),j=(h.txConfig=S,w(m)),Hn=(h.transactionExecutor=j,w(v)),zn=(h.logger=Hn,w(g)),o=(h.urlUtil=zn,w(ln)),S=(h.serverAddress=o,w(O)),j=(h.resolver=S,w(n)),Hn=(h.objectUtil=j,w(P)),g=(h.boltAgent=Hn,w(T)),zn=(h.pool=g,{}),Gn=r&&r.__assign||function(){return(Gn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Yn=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),Kn=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ln=r&&r.__importStar||(Vn=function(e){return(Vn=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Vn(e),n=0;n<r.length;n++)"default"!==r[n]&&Yn(t,e,r[n]);return Kn(t,e),t}),Zn=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Qn=r&&r.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Xn=(Object.defineProperty(zn,"__esModule",{value:!0}),zn.GqlStatusObject=zn.Notification=zn.notificationClassification=zn.notificationCategory=zn.notificationSeverityLevel=void 0,zn.polyfillGqlStatusObject=co,zn.polyfillNotification=so,zn.buildGqlStatusObjectFromMetadata=function(e){if(null!=e.statuses)return e.statuses.map(function(e){return new uo(e)});var t=function(e){return!0===(null==e?void 0:e.have_records_streamed)?lo.SUCCESS:!1===(null==e?void 0:e.has_keys)?lo.OMITTED_RESULT:!0===(null==e?void 0:e.pulled)?lo.NO_DATA:lo.NO_DATA_UNKNOWN_SUBCONDITION}(e.stream_summary);return Qn([t],Zn(null!=(e=null==(t=e.notifications)?void 0:t.map(co))?e:[]),!1).sort(function(e,t){return po(e)-po(t)})},zn.buildNotificationsFromMetadata=function(e){return null==e.notifications?null==e.statuses?[]:e.statuses.map(so).filter(function(e){return null!=e}):e.notifications.map(function(e){return new io(e)})},ln(F)),Jn=h,$n=G,eo={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"},ERROR:{gql_status:"50N42",status_description:"error: general processing exception - unexpected error"}},to={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"},ro=(zn.notificationSeverityLevel=to,Object.freeze(to),Object.values(to)),o={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"},no=(zn.notificationCategory=o,Object.freeze(o),Object.values(o)),oo=o,io=(zn.notificationClassification=oo,function(e){this.code=e.code,this.title=e.title,this.description=e.description,this.position=ho(e.position),this.severityLevel=bo(e.severity),this.rawSeverityLevel=e.severity,this.category=yo(e.category),this.rawCategory=e.category}),uo=(zn.Notification=io,Object.defineProperty(ao.prototype,"diagnosticRecordAsJsonString",{get:function(){return Xn.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),ao);function ao(e){var t;this.gqlStatus=e.gql_status,this.statusDescription=e.status_description,this.diagnosticRecord=null!=(t=e.diagnostic_record)?t:{},this.position=null!=this.diagnosticRecord._position?ho(this.diagnosticRecord._position):void 0,this.severity=bo(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=yo(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=null!=e.neo4j_code,Object.freeze(this)}function so(e){var t;if(null!=e.neo4j_code)return new io({code:e.neo4j_code,title:e.title,description:e.description,severity:null==(t=e.diagnostic_record)?void 0:t._severity,category:null==(t=e.diagnostic_record)?void 0:t._classification,position:null==(t=e.diagnostic_record)?void 0:t._position})}function co(e){var t=e.severity===to.WARNING?eo.WARNING:eo.INFORMATION,r={gql_status:t.gql_status,status_description:null!=(r=e.description)?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:Gn({},$n.rawPolyfilledDiagnosticRecord)};return null!=e.severity&&(r.diagnostic_record._severity=e.severity),null!=e.category&&(r.diagnostic_record._classification=e.category),null!=e.position&&(r.diagnostic_record._position=e.position),new uo(r)}var lo={SUCCESS:new(zn.GqlStatusObject=uo)({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:$n.rawPolyfilledDiagnosticRecord}),NO_DATA:new uo({gql_status:"02000",status_description:"note: no data",diagnostic_record:$n.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new uo(Gn(Gn({},eo.NO_DATA),{diagnostic_record:$n.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new uo({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:$n.rawPolyfilledDiagnosticRecord})};Object.freeze(lo);var fo=Object.freeze({"02":0,"01":1,"00":2});function po(e){var e=null==(e=e.gqlStatus)?void 0:e.slice(0,2);return null!=(e=fo[e])?e:9999}function ho(e){return null==e?{}:{offset:Jn.util.toNumber(e.offset),line:Jn.util.toNumber(e.line),column:Jn.util.toNumber(e.column)}}function bo(e){return ro.includes(e)?e:to.UNKNOWN}function yo(e){return no.includes(e)?e:oo.UNKNOWN}zn.default=uo,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.Stats=Wt.QueryStatistics=Wt.ProfiledPlan=Wt.Plan=Wt.ServerInfo=Wt.queryType=void 0;var _o=h,vo=zn,O=(mo.prototype.hasPlan=function(){return this.plan instanceof go},mo.prototype.hasProfile=function(){return this.profile instanceof Oo},mo);function mo(e,t,r,n){this.query={text:e,parameters:t},this.queryType=r.type,this.counters=new Eo(null!=(e=r.stats)?e:{}),this.plan=(null!=r.plan||null!=r.profile)&&new go(null!=(t=r.plan)?t:r.profile),this.profile=null!=r.profile&&new Oo(r.profile),this.notifications=(0,vo.buildNotificationsFromMetadata)(r),this.gqlStatusObjects=(0,vo.buildGqlStatusObjectFromMetadata)(r),this.server=new To(r.server,n),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after,this.database={name:null!=(e=r.db)?e:null}}var go=function t(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=null!=e.children?e.children.map(function(e){return new t(e)}):[]},Oo=(Wt.Plan=go,wo.prototype.hasPageCacheStats=function(){return 0<this.pageCacheMisses||0<this.pageCacheHits||0<this.pageCacheHitRatio},wo);function wo(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=So("dbHits",e),this.rows=So("rows",e),this.pageCacheMisses=So("pageCacheMisses",e),this.pageCacheHits=So("pageCacheHits",e),this.pageCacheHitRatio=So("pageCacheHitRatio",e),this.time=So("time",e),this.children=null!=e.children?e.children.map(function(e){return new wo(e)}):[]}Wt.ProfiledPlan=Oo;Wt.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0},Po.prototype.containsUpdates=function(){var r=this;return void 0!==this._containsUpdates?this._containsUpdates:0<Object.keys(this._stats).reduce(function(e,t){return e+r._stats[t]},0)},Po.prototype.updates=function(){return this._stats},Po.prototype.containsSystemUpdates=function(){return void 0!==this._containsSystemUpdates?this._containsSystemUpdates:0<this._systemUpdates},Po.prototype.systemUpdates=function(){return this._systemUpdates};var Eo=Po;function Po(r){var n=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(e){var t=e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()});t in n._stats?n._stats[t]=_o.util.toNumber(r[e]):"systemUpdates"===t?n._systemUpdates=_o.util.toNumber(r[e]):"containsSystemUpdates"===t?n._containsSystemUpdates=r[e]:"containsUpdates"===t&&(n._containsUpdates=r[e])}),this._stats=Object.freeze(this._stats)}Wt.QueryStatistics=Eo;var To=function(e,t){null!=e&&(this.address=e.address,this.agent=e.version),this.protocolVersion=t};function So(e,t,r){return void 0===r&&(r=0),!1!==t&&e in t?(t=t[e],_o.util.toNumber(t)):r}Wt.ServerInfo=To;function jo(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}function Co(e){console.log("Uncaught error when processing result: "+e)}function Io(e){}function Ro(e){}Wt.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},Wt.default=O;var Ao,S={},n=(Object.defineProperty(S,"__esModule",{value:!0}),S.notificationFilterDisabledClassification=S.notificationFilterDisabledCategory=S.notificationFilterMinimumSeverityLevel=void 0,{OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"}),j=(S.notificationFilterMinimumSeverityLevel=n,Object.freeze(n),{HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"}),P=(S.notificationFilterDisabledCategory=j,Object.freeze(j),j),Hn=(S.notificationFilterDisabledClassification=P,S.default=jo,{}),w=r&&r.__extends||(Ao=function(e,t){return(Ao=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ao(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ko=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Mo=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},T=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},No=(Object.defineProperty(Hn,"__esModule",{value:!0}),T(Wt)),xo=h,Do=t,Lo=xo.connectionHolder.EMPTY_CONNECTION_HOLDER;Uo.prototype.as=function(t,r){if(null!=this._p)throw(0,Do.newError)("Cannot call .as() on a Result that is being consumed");return this._mapper=function(e){return e.as(t,r)},this},Uo.prototype.keys=function(){var n=this;return null!==this._keys?Promise.resolve(this._keys):null!==this._error?Promise.reject(this._error):new Promise(function(t,r){n._streamObserverPromise.then(function(e){return e.subscribe(n._decorateObserver({onKeys:function(e){return t(e)},onError:function(e){return r(e)}}))}).catch(r)})},Uo.prototype.summary=function(){var n=this;return null!==this._summary?Promise.resolve(this._summary):null!==this._error?Promise.reject(this._error):new Promise(function(t,r){n._streamObserverPromise.then(function(e){e.cancel(),e.subscribe(n._decorateObserver({onCompleted:function(e){return t(e)},onError:function(e){return r(e)}}))}).catch(r)})},Uo.prototype._getOrCreatePromise=function(){var o=this;return null==this._p&&(this._p=new Promise(function(t,r){var n=[];o.subscribe({onNext:function(e){null!=o._mapper?n.push(o._mapper(e)):n.push(e)},onCompleted:function(e){t({records:n,summary:e})},onError:function(e){r(e)}})})),this._p},Uo.prototype[Symbol.asyncIterator]=function(){var e,n=this;if(!this.isOpen())return e=(0,Do.newError)("Result is already consumed"),{next:function(){return Promise.reject(e)},peek:function(){return Promise.reject(e)}};function o(){return ko(n,void 0,void 0,function(){var t;return Mo(this,function(e){switch(e.label){case 0:return void 0!==u.queuedObserver?[3,2]:(u.queuedObserver=this._createQueuedResultObserver(r),t=u,[4,this._subscribe(u.queuedObserver,!0).catch(function(){})]);case 1:t.streaming=e.sent(),r(),e.label=2;case 2:return[2,u.queuedObserver]}})})}function i(e){if(void 0===e)throw(0,Do.newError)("InvalidState: Result stream finished without Summary",Do.PROTOCOL_ERROR);return 1}var u={paused:!0,firstRun:!0,finished:!1},r=function(){var e,t;null!=u.streaming&&(e=(t=null!=(t=null==(t=u.queuedObserver)?void 0:t.size)?t:0)>=n._watermarks.high,t=t<=n._watermarks.low,e&&!u.paused?(u.paused=!0,u.streaming.pause()):(t&&u.paused||u.firstRun&&!e)&&(u.firstRun=!1,u.paused=!1,u.streaming.resume()))};return{next:function(){return ko(n,void 0,void 0,function(){var t;return Mo(this,function(e){switch(e.label){case 0:return u.finished&&i(u.summary)?[2,{done:!0,value:u.summary}]:[4,o()];case 1:return[4,e.sent().dequeue()];case 2:return!0===(t=e.sent()).done&&(u.finished=t.done,u.summary=t.value),[2,t]}})})},return:function(r){return ko(n,void 0,void 0,function(){var t;return Mo(this,function(e){switch(e.label){case 0:return u.finished&&i(u.summary)?[2,{done:!0,value:null!=r?r:u.summary}]:(null!=(t=u.streaming)&&t.cancel(),[4,o()]);case 1:return[4,e.sent().dequeueUntilDone()];case 2:return t=e.sent(),u.finished=!0,t.value=null!=r?r:t.value,u.summary=t.value,[2,t]}})})},peek:function(){return ko(n,void 0,void 0,function(){return Mo(this,function(e){switch(e.label){case 0:return u.finished&&i(u.summary)?[2,{done:!0,value:u.summary}]:[4,o()];case 1:return[4,e.sent().head()];case 2:return[2,e.sent()]}})})}}},Uo.prototype.then=function(e,t){return this._getOrCreatePromise().then(e,t)},Uo.prototype.catch=function(e){return this._getOrCreatePromise().catch(e)},Uo.prototype.finally=function(e){return this._getOrCreatePromise().finally(e)},Uo.prototype.subscribe=function(e){this._subscribe(e).catch(function(){})},Uo.prototype.isOpen=function(){return null===this._summary&&null===this._error},Uo.prototype._subscribe=function(e,t){void 0===t&&(t=!1);var r=this._decorateObserver(e);return this._streamObserverPromise.then(function(e){return t&&e.pause(),e.subscribe(r),e}).catch(function(e){return null!=r.onError&&r.onError(e),Promise.reject(e)})},Uo.prototype._decorateObserver=function(n){var e,o=this,t=null!=(e=n.onCompleted)?e:Io,i=null!=(e=n.onError)?e:Co,r=null!=(e=n.onKeys)?e:Ro;return{onNext:null!=n.onNext?n.onNext.bind(n):void 0,onKeys:function(e){return o._keys=e,r.call(n,e)},onCompleted:function(e){o._releaseConnectionAndGetSummary(e).then(function(e){return null!==o._summary?t.call(n,o._summary):(o._summary=e,t.call(n,e))}).catch(i)},onError:function(r){o._connectionHolder.releaseConnection().then(function(){var e,t;e=r,null!=(t=o._stack)&&(e.stack=e.toString()+"\n"+t),o._error=r,i.call(n,r)}).catch(i)}}},Uo.prototype._cancel=function(){null===this._summary&&null===this._error&&this._streamObserverPromise.then(function(e){return e.cancel()}).catch(function(){})},Uo.prototype._releaseConnectionAndGetSummary=function(t){var e=xo.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),r=e.validatedQuery,n=e.params,o=this._connectionHolder;return o.getConnection().then(function(e){return o.releaseConnection().then(function(){return null==e?void 0:e.getProtocolVersion()})},function(e){}).then(function(e){return new No.default(r,n,t,e)})},Uo.prototype._createQueuedResultObserver=function(n){var t=this;function o(){var r={};return r.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),r}function i(e){return e instanceof Error}function r(){return ko(this,void 0,void 0,function(){var t;return Mo(this,function(e){switch(e.label){case 0:if(0<u.length){if(t=null!=(t=u.shift())?t:(0,Do.newError)("Unexpected empty buffer",Do.PROTOCOL_ERROR),n(),i(t))throw t;return[2,t]}return a.resolvable=o(),[4,a.resolvable.promise];case 1:return[2,e.sent()]}})})}var u=[],a={resolvable:null},s={onNext:function(e){null!=t._mapper?s._push({done:!1,value:t._mapper(e)}):s._push({done:!1,value:e})},onCompleted:function(e){s._push({done:!0,value:e})},onError:function(e){s._push(e)},_push:function(e){var t;null!==a.resolvable?(t=a.resolvable,a.resolvable=null,i(e)?t.reject(e):t.resolve(e)):(u.push(e),n())},dequeue:r,dequeueUntilDone:function(){return ko(t,void 0,void 0,function(){var t;return Mo(this,function(e){switch(e.label){case 0:return[4,r()];case 1:return!0===(t=e.sent()).done?[2,t]:[3,0];case 2:return[2]}})})},head:function(){return ko(t,void 0,void 0,function(){var t,r;return Mo(this,function(e){switch(e.label){case 0:if(0<u.length){if(i(t=u[0]))throw t;return[2,t]}a.resolvable=o(),e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,a.resolvable.promise];case 2:return t=e.sent(),u.unshift(t),[2,t];case 3:throw r=e.sent(),u.unshift(r),r;case 4:return n(),[7];case 5:return[2]}})})},get size(){return u.length}};return s};g=Uo;function Uo(e,t,r,n,o){var i;void 0===o&&(o={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[Vo]="Result",this._stack=null!=(i=new Error("")).stack?i.stack.replace(/^Error(\n\r)*/,""):null,this._streamObserverPromise=e,this._p=null,this._query=t,this._parameters=null!=r?r:{},this._connectionHolder=null!=n?n:Lo,this._keys=null,this._summary=null,this._error=null,this._mapper=null,this._watermarks=o}var Fo,Bo,Vo=Symbol.toStringTag,ln=(w(qo,Fo=g),qo);function qo(){return null!==Fo&&Fo.apply(this,arguments)||this}function Wo(){return null!==Bo&&Bo.apply(this,arguments)||this}w(Wo,Bo=g),Hn.default=ln;G={};Object.defineProperty(G,"__esModule",{value:!0});G.default=function(e,t,r){this.keys=e,this.records=t,this.summary=r};o={},Object.defineProperty(o,"__esModule",{value:!0}),o.Releasable=void 0,zo.prototype.release=function(){throw new Error("Not implemented")},O=zo;function zo(){}function Ho(){}o.Releasable=O,Ho.prototype.acquireConnection=function(e){throw Error("Not implemented")},Ho.prototype.supportsMultiDb=function(){throw Error("Not implemented")},Ho.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},Ho.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},Ho.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},Ho.prototype.SSREnabled=function(){return!1},Ho.prototype.verifyConnectivityAndGetServerInfo=function(e){throw Error("Not implemented")},Ho.prototype.verifyAuthentication=function(e){throw Error("Not implemented")},Ho.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},Ho.prototype.close=function(){throw Error("Not implemented")},o.default=Ho;n={};function Go(){}Object.defineProperty(n,"__esModule",{value:!0}),Go.prototype.beginTransaction=function(e){throw new Error("Not implemented")},Go.prototype.run=function(e,t,r){throw new Error("Not implemented")},Go.prototype.commitTransaction=function(e){throw new Error("Not implemented")},Go.prototype.rollbackTransaction=function(e){throw new Error("Not implemented")},Go.prototype.resetAndFlush=function(){throw new Error("Not implemented")},Go.prototype.isOpen=function(){throw new Error("Not implemented")},Go.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},Go.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},n.default=Go;var j={},Yo=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Ko=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},P=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Zo=(Object.defineProperty(j,"__esModule",{value:!0}),c),Qo=_,Xo=b,Jo=sr,$o=Gt,ei=t,ti=P(Hn);function ri(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmarks,o=e.onConnection,i=e.reactive,u=e.fetchSize,a=e.impersonatedUser,s=e.highRecordWatermark,c=e.lowRecordWatermark,l=e.notificationFilter,e=e.apiTelemetryConfig,f=this;this._connectionHolder=t,this._reactive=i,this._state=ni.ACTIVE,this._onClose=r,this._onBookmarks=n,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._fetchSize=u,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=a,this._lowRecordWatermark=c,this._highRecordWatermark=s,this._bookmarks=Xo.Bookmarks.empty(),this._notificationFilter=l,this._apiTelemetryConfig=e,this._acceptActive=function(){},this._activePromise=new Promise(function(e,t){f._acceptActive=e})}ri.prototype._begin=function(o,i,u){var t=this;this._connectionHolder.getConnection().then(function(n){return Yo(t,void 0,void 0,function(){var t,r=this;return Ko(this,function(e){switch(e.label){case 0:return(this._onConnection(),null==n)?[3,2]:(t=this,[4,o()]);case 1:return t._bookmarks=e.sent(),[2,n.beginTransaction({bookmarks:this._bookmarks,txConfig:i,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(e){null!=u&&u.onError(e),r._onError(e).catch(function(){})},afterComplete:function(e){null!=u&&u.onComplete(e),void 0!==e.db&&null!=(null==u?void 0:u.onDB)&&u.onDB(e.db),r._onComplete(e)}})];case 2:throw(0,ei.newError)("No connection available")}})})}).catch(function(e){null!=u&&u.onError(e),t._onError(e).catch(function(){})}).finally(function(){return t._acceptActive()})},ri.prototype.run=function(e,t){e=(0,Zo.validateQueryAndParameters)(e,t),t=e.validatedQuery,e=e.params,t=this._state.run(t,e,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermark,preparationJob:this._activePromise});return this._results.push(t),t},ri.prototype.commit=function(){var t=this,r=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(e){return t._onCompleteCallback(e,t._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},ri.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},ri.prototype.isOpen=function(){return this._state===ni.ACTIVE},ri.prototype.close=function(){return Yo(this,void 0,void 0,function(){return Ko(this,function(e){switch(e.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},ri.prototype[Symbol.asyncDispose]=function(){return this.close()},ri.prototype._onErrorCallback=function(t){return this._state===ni.FAILED?Promise.resolve(null):(this._state=ni.FAILED,this._onClose(),this._results.forEach(function(e){e.isOpen()&&e._streamObserverPromise.then(function(e){return e.onError(t)}).catch(function(e){})}),this._connectionHolder.releaseConnection())},ri.prototype._onCompleteCallback=function(e,t){this._onBookmarks(new Xo.Bookmarks(null==e?void 0:e.bookmark),null!=t?t:Xo.Bookmarks.empty(),null==e?void 0:e.db)};var ni={ACTIVE:{commit:function(e){return{result:oi(!0,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults,e.preparationJob),state:ni.SUCCEEDED}},rollback:function(e){return{result:oi(!1,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults,e.preparationJob),state:ni.ROLLED_BACK}},run:function(t,r,e){var n=e.connectionHolder,o=e.onError,i=e.onComplete,u=e.onConnection,a=e.reactive,s=e.fetchSize,c=e.highRecordWatermark,l=e.lowRecordWatermark,e=e.preparationJob,f=null!=e?e:Promise.resolve();return ii(n.getConnection().then(function(e){return f.then(function(){return e})}).then(function(e){if(u(),null!=e)return e.run(t,r,{bookmarks:Xo.Bookmarks.empty(),txConfig:Jo.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:a,fetchSize:s,highRecordWatermark:c,lowRecordWatermark:l});throw(0,ei.newError)("No connection available")}).catch(function(e){return new $o.FailedObserver({error:e,onError:o})}),t,r,n,c,l)}},FAILED:{commit:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:ii(new $o.FailedObserver({error:(0,ei.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),"COMMIT",{},t,0,0),state:ni.FAILED}},rollback:function(e){var t=e.connectionHolder;return e.onError,e.onComplete,{result:ii(new $o.CompletedObserver,"ROLLBACK",{},t,0,0),state:ni.FAILED}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;return r.onComplete,ii(new $o.FailedObserver({error:(0,ei.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,t,n,0,0)}},SUCCEEDED:{commit:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:ii(new $o.FailedObserver({error:(0,ei.newError)("Cannot commit this transaction, because it has already been committed."),onError:r}),"COMMIT",{},Qo.EMPTY_CONNECTION_HOLDER,0,0),state:ni.SUCCEEDED,connectionHolder:t}},rollback:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:ii(new $o.FailedObserver({error:(0,ei.newError)("Cannot rollback this transaction, because it has already been committed."),onError:r}),"ROLLBACK",{},Qo.EMPTY_CONNECTION_HOLDER,0,0),state:ni.SUCCEEDED,connectionHolder:t}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;return r.onComplete,ii(new $o.FailedObserver({error:(0,ei.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,t,n,0,0)}},ROLLED_BACK:{commit:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:ii(new $o.FailedObserver({error:(0,ei.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:r}),"COMMIT",{},t,0,0),state:ni.ROLLED_BACK}},rollback:function(e){var t=e.connectionHolder;return e.onError,e.onComplete,{result:ii(new $o.FailedObserver({error:(0,ei.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t,0,0),state:ni.ROLLED_BACK}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;return r.onComplete,ii(new $o.FailedObserver({error:(0,ei.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,t,n,0,0)}}};function oi(r,e,n,o,i,u,t){var a=null!=t?t:Promise.resolve(),t=e.getConnection().then(function(e){return a.then(function(){return e})}).then(function(t){return i(),u.forEach(function(e){return e._cancel()}),Promise.all(u.map(function(e){return e.summary()})).then(function(e){if(null!=t)return r?t.commitTransaction({beforeError:n,afterComplete:o}):t.rollbackTransaction({beforeError:n,afterComplete:o});throw(0,ei.newError)("No connection available")})}).catch(function(e){return new $o.FailedObserver({error:e,onError:n})});return new ti.default(t,r?"COMMIT":"ROLLBACK",{},e,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function ii(e,t,r,n,o,i){return void 0===n&&(n=Qo.EMPTY_CONNECTION_HOLDER),new ti.default(Promise.resolve(e),t,r,new Qo.ReadOnlyConnectionHolder(null!=n?n:Qo.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}j.default=ri;T={};function ui(e){e=e.run;this._run=e}Object.defineProperty(T,"__esModule",{value:!0}),ui.fromTransaction=function(e){return new ui({run:e.run.bind(e)})},ui.prototype.run=function(e,t){return this._run(e,t)},T.default=ui;var ai,si,ci,w={},g=r&&r.__extends||(ai=function(e,t){return(ai=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ai(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),li=r&&r.__assign||function(){return(li=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ln=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},O=(Object.defineProperty(w,"__esModule",{value:!0}),ln(j)),P=(ci=O.default,g(fi,ci),fi.prototype.then=function(e,t){return this._getOrCreateBeginPromise().then(e,t)},fi.prototype.catch=function(e){return this._getOrCreateBeginPromise().catch(e)},fi.prototype.finally=function(e){return this._getOrCreateBeginPromise().finally(e)},fi.prototype._getOrCreateBeginPromise=function(){var r=this;return null==this._beginPromise&&(this._beginPromise=new Promise(function(e,t){r._resolve=e,r._reject=t,null!=r._beginError&&t(r._beginError),null!=r._beginMetadata&&e(r._toTransaction())})),this._beginPromise},fi.prototype._toTransaction=function(){return li(li({},this),{run:ci.prototype.run.bind(this),commit:ci.prototype.commit.bind(this),rollback:ci.prototype.rollback.bind(this),close:ci.prototype.close.bind(this),isOpen:ci.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},fi.prototype._begin=function(e,t){return ci.prototype._begin.call(this,e,t,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},fi.prototype._onBeginError=function(e){this._beginError=e,null!=this._reject&&this._reject(e)},fi.prototype._onBeginMetadata=function(e){this._beginMetadata=null!=e?e:{},null!=this._resolve&&this._resolve(this._toTransaction())},fi);function fi(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmarks,o=e.onConnection,i=e.reactive,u=e.fetchSize,a=e.impersonatedUser,s=e.highRecordWatermark,c=e.lowRecordWatermark,l=e.notificationFilter,f=e.apiTelemetryConfig,e=e.onDbCallback,t=ci.call(this,{connectionHolder:t,onClose:r,onBookmarks:n,onConnection:o,reactive:i,fetchSize:u,impersonatedUser:a,highRecordWatermark:s,lowRecordWatermark:c,notificationFilter:l,apiTelemetryConfig:f})||this;return t[si]="TransactionPromise",t._onDbCallback=e,t}si=Symbol.toStringTag,w.default=P;var ln={},O={},pi=(Object.defineProperty(O,"__esModule",{value:!0}),O.cacheKey=function(e,t){return null==t?void 0!==e?"basic"!==e.scheme?"kerberos"!==e.scheme?"bearer"!==e.scheme?"none"!==e.scheme?(0,pi.stringify)(e,{sortedElements:!0}):"none":"bearer:"+e.credentials:"kerberos:"+e.credentials:"basic:"+(null!=(e=e.principal)?e:""):"DEFAULT":"basic:"+t},F);var di=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},hi=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},bi=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},yi=r&&r.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},g=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_i=(Object.defineProperty(ln,"__esModule",{value:!0}),Gt),vi=c,mi=y,gi=t,Oi=g(Hn),wi=_,Ei=m,Pi=b,Ti=sr,Si=g(w),ji=g(T),Ci=O;function Ii(e){var t=e.mode,r=e.connectionProvider,n=e.bookmarks,o=e.database,i=e.config,u=e.reactive,a=e.fetchSize,s=e.impersonatedUser,c=e.bookmarkManager,l=e.notificationFilter,f=e.auth,p=e.log,e=e.homeDatabaseCallback,t=(this._mode=t,this._database=o,this._reactive=u,this._fetchSize=a,this._homeDatabaseCallback=e,this._auth=f,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new wi.ConnectionHolder({mode:mi.ACCESS_MODE_READ,auth:f,database:o,bookmarks:n,connectionProvider:r,impersonatedUser:s,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._writeConnectionHolder=new wi.ConnectionHolder({mode:mi.ACCESS_MODE_WRITE,auth:f,database:o,bookmarks:n,connectionProvider:r,impersonatedUser:s,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._open=!0,this._hasTx=!1,this._impersonatedUser=s,this._lastBookmarks=null!=n?n:Pi.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=function(e){e=null!=(e=null==e?void 0:e.maxTransactionRetryTime)?e:null;return new Ei.TransactionExecutor(e)}(i),this._databaseNameResolved=""!==this._database,this._calculateWatermaks());this._lowRecordWatermark=t.low,this._highRecordWatermark=t.high,this._results=[],this._bookmarkManager=c,this._notificationFilter=l,this._log=p,this._databaseGuess=null==i?void 0:i.cachedHomeDatabase,this._isRoutingSession=null!=(u=null==i?void 0:i.routingDriver)&&u}Ii.prototype.run=function(e,t,r){var o=this,e=(0,vi.validateQueryAndParameters)(e,t),i=e.validatedQuery,u=e.params,a=null!=r?new Ti.TxConfig(r,this._log):Ti.TxConfig.empty(),t=this._run(i,u,function(n){return di(o,void 0,void 0,function(){var t,r=this;return hi(this,function(e){switch(e.label){case 0:return[4,this._bookmarks()];case 1:return t=e.sent(),this._assertSessionIsOpen(),[2,n.run(i,u,{bookmarks:t,txConfig:a,mode:this._mode,database:this._database,apiTelemetryConfig:{api:mi.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(e){return r._onCompleteCallback(e,t)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(t),t},Ii.prototype._run=function(e,t,r){var r=this._acquireAndConsumeConnection(r),n=r.connectionHolder,r=r.resultPromise.catch(function(e){return Promise.resolve(new _i.FailedObserver({error:e}))}),o={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new Oi.default(r,e,t,n,o)},Ii.prototype._acquireConnection=function(e){var r=this,e=this._acquireAndConsumeConnection(e),n=e.connectionHolder;return e.resultPromise.then(function(t){return di(r,void 0,void 0,function(){return hi(this,function(e){switch(e.label){case 0:return[4,n.releaseConnection()];case 1:return e.sent(),[2,t]}})})})},Ii.prototype._acquireAndConsumeConnection=function(t){var e=this._connectionHolderWithMode(this._mode),r=this._open?!this._hasTx&&e.initializeConnection(this._databaseGuess)?e.getConnection().then(function(e){return t(e)}):Promise.reject((0,gi.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,gi.newError)("Cannot run query in a closed session."));return{connectionHolder:e,resultPromise:r}},Ii.prototype.beginTransaction=function(e){var t=Ti.TxConfig.empty();return null!=e&&(t=new Ti.TxConfig(e,this._log)),this._beginTransaction(this._mode,t,{api:mi.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},Ii.prototype._beginTransaction=function(e,t,r){var n=this;if(!this._open)throw(0,gi.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,gi.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");e=Ii._validateSessionMode(e),e=this._connectionHolderWithMode(e),e.initializeConnection(this._databaseGuess),this._hasTx=!0,e=new Si.default({connectionHolder:e,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(e,t,r){return n._updateBookmarks(e,t,r)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:r,onDbCallback:this._onDatabaseNameResolved.bind(this)});return e._begin(function(){return n._bookmarks()},t),e},Ii.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,gi.newError)("You cannot run more transactions on a closed session.")},Ii.prototype._transactionClosed=function(){this._hasTx=!1},Ii.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},Ii.prototype._bookmarks=function(){return di(this,void 0,void 0,function(){var t;return hi(this,function(e){switch(e.label){case 0:return[4,null==(t=this._bookmarkManager)?void 0:t.getBookmarks()];case 1:return void 0===(t=e.sent())?[2,this._lastBookmarks]:[2,new Pi.Bookmarks(yi(yi([],bi(t),!1),bi(this._configuredBookmarks),!1))]}})})},Ii.prototype.executeRead=function(e,t){t=new Ti.TxConfig(t,this._log);return this._executeInTransaction(mi.ACCESS_MODE_READ,t,e)},Ii.prototype.executeWrite=function(e,t){t=new Ti.TxConfig(t,this._log);return this._executeInTransaction(mi.ACCESS_MODE_WRITE,t,e)},Ii.prototype._executeInTransaction=function(t,r,e){var n=this;return this._transactionExecutor.execute(function(e){return n._beginTransaction(t,r,e)},e,ji.default.fromTransaction)},Ii.prototype._onDatabaseNameResolved=function(e){var t;this._isRoutingSession&&(this._databaseGuess=e,this._databaseNameResolved||(this._database=t=null!=e?e:"",this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0,null!=this._homeDatabaseCallback&&this._homeDatabaseCallback((0,Ci.cacheKey)(this._auth,this._impersonatedUser),e)))},Ii.prototype._getConnectionAcquistionBookmarks=function(){return di(this,void 0,void 0,function(){var t;return hi(this,function(e){switch(e.label){case 0:return[4,null==(t=this._bookmarkManager)?void 0:t.getBookmarks()];case 1:return void 0===(t=e.sent())?[2,this._lastBookmarks]:[2,new Pi.Bookmarks(yi(yi([],bi(this._configuredBookmarks),!1),bi(t),!1))]}})})},Ii.prototype._updateBookmarks=function(e,t,r){var n;null==e||e.isEmpty()||(null!=(n=this._bookmarkManager)&&n.updateBookmarks(null!=(n=null==t?void 0:t.values())?n:[],null!=(t=null==e?void 0:e.values())?t:[]).catch(function(){}),this._lastBookmarks=e,this._configuredBookmarks=Pi.Bookmarks.empty())},Ii.prototype.close=function(){return di(this,void 0,void 0,function(){return hi(this,function(e){switch(e.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(e){return e._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return e.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},Ii.prototype[Symbol.asyncDispose]=function(){return this.close()},Ii.prototype._connectionHolderWithMode=function(e){if(e===mi.ACCESS_MODE_READ)return this._readConnectionHolder;if(e===mi.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,gi.newError)("Unknown access mode: "+e)},Ii.prototype._onCompleteCallback=function(e,t){this._updateBookmarks(new Pi.Bookmarks(e.bookmark),t,e.db)},Ii.prototype._calculateWatermaks=function(){return this._fetchSize===mi.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},Ii.prototype._configureTransactionExecutor=function(e,t){this._transactionExecutor.pipelineBegin=e,this._transactionExecutor.telemetryApi=t},Ii._validateSessionMode=function(e){e=null!=e?e:mi.ACCESS_MODE_WRITE;if(e!==mi.ACCESS_MODE_READ&&e!==mi.ACCESS_MODE_WRITE)throw(0,gi.newError)("Illegal session mode "+e);return e},ln.default=Ii;var P={},Gt={},Ri=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Ai=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},ki=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Mi=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Ni=r&&r.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},_=(Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.bookmarkManager=function(e){void 0===e&&(e={});var t=new Set(e.initialBookmarks);return new Di(t,e.bookmarksSupplier,e.bookmarksConsumer)},xi.prototype.updateBookmarks=function(e,t){return Ri(this,void 0,void 0,function(){return Ai(this,function(e){throw new Error("Not implemented")})})},xi.prototype.getBookmarks=function(){return Ri(this,void 0,void 0,function(){return Ai(this,function(e){throw new Error("Not implemented")})})},xi);function xi(){throw new Error("Not implemented")}Gt.default=_;Li.prototype.updateBookmarks=function(f,p){return Ri(this,void 0,void 0,function(){var t,r,n,o,i,u,a,s,c,l;return Ai(this,function(e){switch(e.label){case 0:t=this._bookmarks;try{for(r=ki(f),n=r.next();!n.done;n=r.next())u=n.value,t.delete(u)}catch(e){a={error:e}}finally{try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(a)throw a.error}}try{for(o=ki(p),i=o.next();!i.done;i=o.next())u=i.value,t.add(u)}catch(e){c={error:e}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(c)throw c.error}}return"function"!=typeof this._bookmarksConsumer?[3,2]:[4,this._bookmarksConsumer(Ni([],Mi(t),!1))];case 1:e.sent(),e.label=2;case 2:return[2]}})})},Li.prototype.getBookmarks=function(){return Ri(this,void 0,void 0,function(){var t,r,n,o,i,u,a;return Ai(this,function(e){switch(e.label){case 0:return t=new Set(this._bookmarks),"function"!=typeof this._bookmarksSupplier?[3,2]:[4,this._bookmarksSupplier()];case 1:a=null!=(a=e.sent())?a:[];try{for(r=ki(a),n=r.next();!n.done;n=r.next())o=n.value,t.add(o)}catch(e){i={error:e}}finally{try{n&&!n.done&&(u=r.return)&&u.call(r)}finally{if(i)throw i.error}}e.label=2;case 2:return[2,Ni([],Mi(t),!1)]}})})};var Di=Li;function Li(e,t,r){this._bookmarks=e,this._bookmarksSupplier=t,this._bookmarksConsumer=r}var m={},Ui=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Fi=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},sr=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Bi=(Object.defineProperty(m,"__esModule",{value:!0}),sr(G)),Vi=t;function qi(){}qi.prototype.eagerResultTransformer=function(){return Wi},qi.prototype.eager=function(){return Wi},qi.prototype.mappedResultTransformer=function(e){return zi(e)},qi.prototype.mapped=function(e){return zi(e)},qi.prototype.first=function(){return Hi},qi.prototype.summary=function(){return Gi},qi.prototype.hydrated=function(r,n){var e=this;return function(t){return Ui(e,void 0,void 0,function(){return Fi(this,function(e){switch(e.label){case 0:return[4,t.as(r,n).then()];case 1:return[2,e.sent()]}})})}};g=new qi;function Wi(o){return Ui(this,void 0,void 0,function(){var t,r,n;return Fi(this,function(e){switch(e.label){case 0:return[4,o];case 1:return r=e.sent(),t=r.summary,r=r.records,[4,o.keys()];case 2:return n=e.sent(),[2,new Bi.default(n,r,t)]}})})}function zi(i){var e=this;if(null==i||null==i.collect&&null==i.map)throw(0,Vi.newError)("Requires a map or/and a collect functions.");return function(o){return Ui(e,void 0,void 0,function(){return Fi(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t,r){var n={records:[],keys:[]};o.subscribe({onKeys:function(e){n.keys=e},onNext:function(e){var t;null!=i.map?void 0!==(t=i.map(e))&&n.records.push(t):n.records.push(e)},onCompleted:function(e){null!=i.collect?t(i.collect(n.records,e,n.keys)):(e={records:n.records,summary:e,keys:n.keys},t(e))},onError:function(e){r(e)}})})];case 1:return[2,e.sent()]}})})}}function Hi(o){return Ui(this,void 0,void 0,function(){var t,r,n;return Fi(this,function(e){switch(e.label){case 0:return[4,(t=o[Symbol.asyncIterator]()).next()];case 1:n=e.sent(),r=n.value,n=n.done,e.label=2;case 2:return e.trys.push([2,,3,6]),!0===n?[2,void 0]:[2,r];case 3:return null==t.return?[3,5]:[4,t.return()];case 4:e.sent(),e.label=5;case 5:return[7];case 6:return[2]}})})}function Gi(t){return Ui(this,void 0,void 0,function(){return Fi(this,function(e){switch(e.label){case 0:return[4,t.summary()];case 1:return[2,e.sent()]}})})}Object.freeze(g),m.default=g;var _={},Yi=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Ki=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},Zi=(Object.defineProperty(_,"__esModule",{value:!0}),y);function Qi(e){this._createSession=e}Qi.prototype.execute=function(o,i,u){return Yi(this,void 0,void 0,function(){var t,r,n=this;return Ki(this,function(e){switch(e.label){case 0:t=this._createSession({database:o.database,bookmarkManager:o.bookmarkManager,impersonatedUser:o.impersonatedUser,auth:o.auth}),r=function(e,t,r){"function"==typeof(null==e?void 0:e.addEventListener)&&e.addEventListener(t,r);return{uninstall:function(){"function"==typeof(null==e?void 0:e.removeEventListener)&&e.removeEventListener(t,r)}}}(o.signal,"abort",function(){return Yi(n,void 0,void 0,function(){return Ki(this,function(e){switch(e.label){case 0:return[4,t.close()];case 1:return[2,e.sent()]}})})}),t._configureTransactionExecutor(!0,Zi.TELEMETRY_APIS.EXECUTE_QUERY),e.label=1;case 1:return e.trys.push([1,,3,5]),[4,("READ"===o.routing?t.executeRead:t.executeWrite).bind(t)(function(r){return Yi(n,void 0,void 0,function(){var t;return Ki(this,function(e){switch(e.label){case 0:return t=r.run(i,u),[4,o.resultTransformer(t)];case 1:return[2,e.sent()]}})})},o.transactionConfig)];case 2:return[2,e.sent()];case 3:return r.uninstall(),[4,t.close()];case 4:return e.sent(),[7];case 5:return[2]}})})},_.default=Qi;sr={};function Xi(e){this.maxSize=e,this.pruneCount=Math.max(Math.round(.01*e*Math.log(e)),1),this.map=new Map}Object.defineProperty(sr,"__esModule",{value:!0}),Xi.prototype.set=function(e,t){this.map.set(e,{database:t,lastUsed:Date.now()}),this._pruneCache()},Xi.prototype.get=function(e){e=this.map.get(e);if(void 0!==e)return e.lastUsed=Date.now(),e.database},Xi.prototype.delete=function(e){this.map.delete(e)},Xi.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var e=Array.from(this.map.entries()).sort(function(e,t){return e[1].lastUsed-t[1].lastUsed}),t=0;t<this.pruneCount;t++)this.map.delete(e[t][0])},sr.default=Xi;function Ji(){this.routing=mu.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}var $i=r&&r.__assign||function(){return($i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},eu=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},tu=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},g=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ru=(Object.defineProperty(P,"__esModule",{value:!0}),P.QueryConfig=P.SessionConfig=P.routing=P.WRITE=P.READ=P.Driver=void 0,b),nu=g(E),ou=y,iu=v,uu=g(ln),au=c,su=Gt,cu=g(m),lu=g(_),fu=t,pu=g(sr),du=O,hu=36e5,bu=1e3,yu=ou.ACCESS_MODE_READ,_u=(P.READ=yu,ou.ACCESS_MODE_WRITE),vu=(P.WRITE=_u,0),mu=(P.SessionConfig=function(){this.defaultAccessMode=_u,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0},{WRITE:"WRITE",READ:"READ"}),b=(P.routing=mu,Object.freeze(mu),P.QueryConfig=Ji,Object.defineProperty(gu.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),gu.prototype.executeQuery=function(e,t){return eu(this,arguments,void 0,function(t,r,n){var o,i,u;return void 0===n&&(n={}),tu(this,function(e){switch(e.label){case 0:if(o=null===n.bookmarkManager?void 0:null!=(o=n.bookmarkManager)?o:this.executeQueryBookmarkManager,i=null!=(i=n.resultTransformer)?i:cu.default.eager(),(u=null!=(u=n.routing)?u:mu.WRITE)!==mu.READ&&u!==mu.WRITE)throw(0,fu.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:i,bookmarkManager:o,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},t,r)];case 1:return[2,e.sent()]}})})},gu.prototype.verifyConnectivity=function(e){var e=(void 0===e?{}:e).database,r=void 0===e?"":e,n=this._getOrCreateConnectionProvider();return new Promise(function(e,t){n.verifyConnectivityAndGetServerInfo({database:r,accessMode:yu}).then(function(){return e()}).catch(function(e){return t(e)})})},gu.prototype.verifyAuthentication=function(){return eu(this,arguments,void 0,function(e){var e=void 0===e?{}:e,t=e.database,r=e.auth;return tu(this,function(e){switch(e.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:null!=t?t:"system",auth:r,accessMode:yu})];case 1:return[2,e.sent()]}})})},gu.prototype.getServerInfo=function(e){e=(void 0===e?{}:e).database,e=void 0===e?"":e;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:e,accessMode:yu})},gu.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},gu.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},gu.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},gu.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},gu.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},gu.prototype.isEncrypted=function(){return this._isEncrypted()},gu.prototype._supportsRouting=function(){return this._meta.routing},gu.prototype._isEncrypted=function(){return this._config.encrypted===au.ENCRYPTION_ON||!0===this._config.encrypted},gu.prototype._getTrust=function(){return this._config.trust},gu.prototype.session=function(e){var e=void 0===e?{}:e,t=e.defaultAccessMode,r=e.bookmarks,n=e.database,o=e.impersonatedUser,i=e.fetchSize,u=e.bookmarkManager,a=e.notificationFilter,e=e.auth;return this._newSession({defaultAccessMode:void 0===t?_u:t,bookmarkOrBookmarks:r,database:void 0===n?"":n,reactive:!1,impersonatedUser:o,fetchSize:wu(i,this._config.fetchSize),bookmarkManager:u,notificationFilter:a,auth:e})},gu.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),null!=this._connectionProvider?this._connectionProvider.close():Promise.resolve()},gu.prototype[Symbol.asyncDispose]=function(){return this.close()},gu.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},gu.prototype._homeDatabaseCallback=function(e,t){this.homeDatabaseCache.set(e,t)},gu.prototype._newSession=function(e){var t=e.defaultAccessMode,r=e.bookmarkOrBookmarks,n=e.database,o=e.reactive,i=e.impersonatedUser,u=e.fetchSize,a=e.bookmarkManager,s=e.notificationFilter,e=e.auth,t=uu.default._validateSessionMode(t),c=this._getOrCreateConnectionProvider(),l=this.homeDatabaseCache.get((0,du.cacheKey)(e,i)),f=this._homeDatabaseCallback.bind(this),r=null!=r?new ru.Bookmarks(r):ru.Bookmarks.empty();return this._createSession({mode:t,database:null!=n?n:"",connectionProvider:c,bookmarks:r,config:$i({cachedHomeDatabase:l,routingDriver:this._supportsRouting()},this._config),reactive:o,impersonatedUser:i,fetchSize:u,bookmarkManager:a,notificationFilter:s,auth:e,log:this._log,homeDatabaseCallback:f})},gu.prototype._getOrCreateConnectionProvider=function(){var e;return null==this._connectionProvider&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(e=this._config,new nu.default(e.resolver)))),this._connectionProvider},gu);function gu(e,t,r,n,o){void 0===n&&(n=function(e){return new uu.default(e)}),void 0===o&&(o=function(e){return new lu.default(e)}),(i=t=void 0===t?{}:t).maxConnectionLifetime=Ou(i.maxConnectionLifetime,hu),i.maxConnectionPoolSize=Ou(i.maxConnectionPoolSize,ou.DEFAULT_POOL_MAX_SIZE),i.connectionAcquisitionTimeout=Ou(i.connectionAcquisitionTimeout,ou.DEFAULT_POOL_ACQUISITION_TIMEOUT),i.fetchSize=wu(i.fetchSize,bu),i.connectionTimeout=function(e){e=parseInt(e.connectionTimeout,10);return 0===e||!isNaN(e)&&e<0?null:isNaN(e)?ou.DEFAULT_CONNECTION_TIMEOUT_MILLIS:e}(i),i.connectionLivenessCheckTimeout=function(e){if(null==e)return;e=parseInt(e,10);if(e<0||Number.isNaN(e))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(e));return e}(i.connectionLivenessCheckTimeout);var i=iu.Logger.create(t);!function(e,t){var r=e.resolver;if(null!=r&&"function"!=typeof r)throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof r));e.connectionAcquisitionTimeout<e.connectionTimeout&&t.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired');if(null==(null==(r=e.notificationFilter)?void 0:r.disabledCategories)||null==(null==(t=e.notificationFilter)?void 0:t.disabledClassifications))return;throw new Error('The notificationFilter can\'t have both "disabledCategories" and  "disabledClassifications" configured at the same time.')}(t,i),this._id=vu++,this._meta=e,this._config=t,this._log=i,this._createConnectionProvider=r,this._createSession=n,this._defaultExecuteQueryBookmarkManager=(0,su.bookmarkManager)(),this._queryExecutor=o(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new pu.default(1e4),this._afterConstruction()}function Ou(e,t){e=parseInt(e,10);return 0<e||0===e?e:e<0?Number.MAX_SAFE_INTEGER:t}function wu(e,t){e=parseInt(e,10);if(0<e||e===ou.FETCH_ALL)return e;if(0===e||e<0)throw new Error("The fetch size can only be a positive value or ".concat(ou.FETCH_ALL," for ALL. However fetchSize = ").concat(e));return t}P.Driver=b,P.default=b;var E={},Eu=(Object.defineProperty(E,"__esModule",{value:!0}),t),Pu=F;function Tu(e){return null!=e&&""!==e&&(Object.getPrototypeOf(e)!==Object.prototype||0!==Object.keys(e).length)}E.default={basic:function(e,t,r){return null!=r?{scheme:"basic",principal:e,credentials:t,realm:r}:{scheme:"basic",principal:e,credentials:t}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,t,r,n,o){n={scheme:n,principal:e};if(Tu(t)&&(n.credentials=t),Tu(r)&&(n.realm=r),Tu(o)){try{(0,Pu.stringify)(o)}catch(e){throw(0,Eu.newError)("Circular references in custom auth token parameters",void 0,e)}n.parameters=o}return n}};var y={},Su=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},ju=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},v=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Cu=(Object.defineProperty(y,"__esModule",{value:!0}),y.authTokenManagers=y.AuthTokenAndExpiration=void 0,y.staticAuthTokenManager=function(e){e=e.authToken;return new Du(e)},v(E)),Iu=h;function Ru(){}function Au(){}Ru.prototype.getToken=function(){throw new Error("Not Implemented")},Ru.prototype.handleSecurityException=function(e,t){throw new Error("Not implemented")},y.default=Ru,y.AuthTokenAndExpiration=function(){this.token=Cu.default.none(),this.expiration=void 0},Au.prototype.bearer=function(e){e=e.tokenProvider;if("function"!=typeof e)throw new TypeError("tokenProvider should be function, but got: ".concat(typeof e));return new Nu(e,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},Au.prototype.basic=function(e){var t=this,r=e.tokenProvider;if("function"!=typeof r)throw new TypeError("tokenProvider should be function, but got: ".concat(typeof r));return new Nu(function(){return Su(t,void 0,void 0,function(){var t;return ju(this,function(e){switch(e.label){case 0:return t={},[4,r()];case 1:return[2,(t.token=e.sent(),t)]}})})},["Neo.ClientError.Security.Unauthorized"])};c=new Au;y.authTokenManagers=c,Object.freeze(c);Mu.prototype.subscribe=function(e){this._subscribers.push(e)},Mu.prototype.onCompleted=function(t){this._subscribers.forEach(function(e){return e.onCompleted(t)})},Mu.prototype.onError=function(t){this._subscribers.forEach(function(e){return e.onError(t)})};var ku=Mu;function Mu(e){this._subscribers=e=void 0===e?[]:e}xu.prototype.getToken=function(){return Su(this,void 0,void 0,function(){var t;return ju(this,function(e){switch(e.label){case 0:return void 0===this._currentAuthData||void 0!==this._currentAuthData.expiration&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2,null==(t=this._currentAuthData)?void 0:t.token]}})})},xu.prototype.handleSecurityException=function(e,t){return!!this._handledSecurityCodes.includes(t)&&(Iu.util.equals(e,null==(t=this._currentAuthData)?void 0:t.token)&&this._scheduleRefreshAuthToken(),!0)},xu.prototype._scheduleRefreshAuthToken=function(e){var r=this;void 0===this._refreshObservable&&(this._currentAuthData=void 0,this._refreshObservable=new ku,Promise.resolve(this._tokenProvider()).then(function(e){var t;r._currentAuthData=e,null!=(t=r._refreshObservable)&&t.onCompleted(e)}).catch(function(e){var t;null!=(t=r._refreshObservable)&&t.onError(e)}).finally(function(){r._refreshObservable=void 0})),void 0!==e&&this._refreshObservable.subscribe(e)},xu.prototype._refreshAuthToken=function(){return Su(this,void 0,void 0,function(){var r=this;return ju(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e,t){r._scheduleRefreshAuthToken({onCompleted:e,onError:t})})];case 1:return[2,e.sent()]}})})};var Nu=xu;function xu(e,t,r,n){this._tokenProvider=e,this._handledSecurityCodes=t,this._currentAuthData=r,this._refreshObservable=n}Lu.prototype.getToken=function(){return this._authToken},Lu.prototype.handleSecurityException=function(e,t){return!1};var Du=Lu;function Lu(e){this._authToken=e}function Uu(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}var Fu,Bu,_={},g=r&&r.__extends||(Fu=function(e,t){return(Fu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Fu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),sr=(Object.defineProperty(_,"__esModule",{value:!0}),_.InternalConfig=_.Config=void 0,_.Config=Uu,g(Vu,Bu=Uu),Vu);function Vu(){return null!==Bu&&Bu.apply(this,arguments)||this}_.InternalConfig=sr;var qu,Wu,O={},b=r&&r.__extends||(qu=function(e,t){return(qu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}qu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),zu=r&&r.__assign||function(){return(zu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Hu=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),Gu=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),v=r&&r.__importStar||(Wu=function(e){return(Wu=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Wu(e),n=0;n<r.length;n++)"default"!==r[n]&&Hu(t,e,r[n]);return Gu(t,e),t}),Yu=(Object.defineProperty(O,"__esModule",{value:!0}),O.clientCertificateProviders=O.RotatingClientCertificateProvider=O.ClientCertificateProvider=void 0,O.resolveCertificateProvider=function(e){if(null==e)return;if("object"==typeof e&&"hasUpdate"in e&&"getClientCertificate"in e&&"function"==typeof e.getClientCertificate&&"function"==typeof e.hasUpdate)return e;{var t;if(Ju(e))return t=zu({},e),{getClientCertificate:function(){return t},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(Yu.stringify(e)))},v(F)),c=(O.default=function(){this.certfile="",this.keyfile="",this.password=void 0},Ku.prototype.hasUpdate=function(){throw new Error("Not Implemented")},Ku.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},Ku);function Ku(){}O.ClientCertificateProvider=c;b(Qu,Zu=c),Qu.prototype.updateCertificate=function(e){throw new Error("Not implemented")};var Zu,g=Qu;function Qu(){return null!==Zu&&Zu.apply(this,arguments)||this}function Xu(){}O.RotatingClientCertificateProvider=g,Xu.prototype.rotating=function(e){e=e.initialCertificate;if(null==e||!Ju(e))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(Yu.stringify(e)));e=zu({},e);return new ra(e)};sr=new Xu;function Ju(e){return null!=e&&"object"==typeof e&&"certfile"in e&&($u(r=e.certfile)||ea(r,$u))&&"keyfile"in e&&(t(r=e.keyfile)||ea(r,t))&&ta("password",e);function t(e){return"string"==typeof e||null!=e&&"object"==typeof e&&"path"in e&&"string"==typeof e.path&&ta("password",e)}var r}function $u(e){return"string"==typeof e}function ea(e,t,r){return void 0===r&&(r=!1),Array.isArray(e)&&(r||0<e.length)&&e.filter(t).length===e.length}function ta(e,t){return!(e in t)||null==t[e]||"string"==typeof t[e]}O.clientCertificateProviders=sr,Object.freeze(sr);na.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},na.prototype.getClientCertificate=function(){return this._certificate},na.prototype.updateCertificate=function(e){if(!Ju(e))throw new TypeError("certificate should be ClientCertificate, but got ".concat(Yu.stringify(e)));this._certificate=zu({},e),this._updated=!0};var ra=na;function na(e,t){void 0===t&&(t=!1),this._certificate=e,this._updated=t}var v={},oa=(Object.defineProperty(v,"__esModule",{value:!0}),v.vector=function(t){try{return new aa(t)}catch(e){throw(0,oa.newError)("Invalid argument type passed to vector constructor function: should be signed integer or float TypedArray, got: ".concat(null!=(t=null==(t=null==t?void 0:t.constructor)?void 0:t.name)?t:"undefined or type without constructor name"))}},v.isVector=function(e){return null!=e&&!0===e[ia]},t),ia="__isVector__",ua={INT8:"INT8",INT16:"INT16",INT32:"INT32",INT64:"INT64",FLOAT32:"FLOAT32",FLOAT64:"FLOAT64"},aa=(Object.freeze(ua),sa.prototype.asTypedArray=function(){return this._typedArray},sa.prototype.getType=function(){return this._type},sa.prototype.toString=function(){return"vector([".concat(this._typedArray.join(", "),"], ").concat(this._typedArray.length,", ").concat(function(e){switch(e){case"INT8":return"INTEGER8 NOT NULL";case"INT16":return"INTEGER16 NOT NULL";case"INT32":return"INTEGER32 NOT NULL";case"INT64":return"INTEGER NOT NULL";case"FLOAT32":return"FLOAT32 NOT NULL";case"FLOAT64":return"FLOAT NOT NULL";default:throw(0,oa.newError)("Cannot stringify vector with unsupported type. Got type: ".concat(e))}}(this._type),")")},sa);function sa(e){var t;if(e instanceof Int8Array)this._type=ua.INT8;else if(e instanceof Int16Array)this._type=ua.INT16;else if(e instanceof Int32Array)this._type=ua.INT32;else if(e instanceof BigInt64Array)this._type=ua.INT64;else if(e instanceof Float32Array)this._type=ua.FLOAT32;else{if(!(e instanceof Float64Array))throw(0,oa.newError)("Invalid argument type passed to Vector constructor: should be signed integer or float TypedArray, got: ".concat(null!=(t=null==(t=null==e?void 0:e.constructor)?void 0:t.name)?t:"undefined or type without constructor name"));this._type=ua.FLOAT64}this._typedArray=e}v.default=aa,Object.defineProperty(aa.prototype,ia,{value:!0,enumerable:!1,configurable:!1,writable:!1});var b={},ca=r&&r.__assign||function(){return(ca=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},la=(Object.defineProperty(b,"__esModule",{value:!0}),b.rule=void 0,l),fa=p,pa=gt,da=u,ha=c(v);function ba(e,t){if(null!=t){if(!0===t.stringify)return e.toString();if(!0===t.toStandardDate)return e.toStandardDate()}return e}b.rule=Object.freeze({asBoolean:function(e){return ca({validate:function(e,t){if("boolean"!=typeof e)throw new TypeError("".concat(t," should be a boolean but received ").concat(typeof e))}},e)},asString:function(e){return ca({validate:function(e,t){if("string"!=typeof e)throw new TypeError("".concat(t," should be a string but received ").concat(typeof e))}},e)},asNumber:function(r){return ca({validate:function(e,t){if("object"==typeof e&&void 0!==e.low&&void 0!==e.high&&2===Object.keys(e).length)throw new TypeError("Number returned as Object. To use asNumber mapping, set disableLosslessIntegers or useBigInt in driver config object");if("number"!=typeof e&&(!0!==(null==r?void 0:r.acceptBigInt)||"bigint"!=typeof e))throw new TypeError("".concat(t," should be a number but received ").concat(typeof e))},convert:function(e){return"bigint"==typeof e?Number(e):e}},r)},asBigInt:function(r){return ca({validate:function(e,t){if("bigint"!=typeof e&&(!0!==(null==r?void 0:r.acceptNumber)||"number"!=typeof e))throw new TypeError("".concat(t," should be a bigint but received ").concat(typeof e))},convert:function(e){return"number"==typeof e?BigInt(e):e}},r)},asNode:function(e){return ca({validate:function(e,t){if(!(0,fa.isNode)(e))throw new TypeError("".concat(t," should be a Node but received ").concat(typeof e))}},e)},asRelationship:function(e){return ca({validate:function(e,t){if(!(0,fa.isRelationship)(e))throw new TypeError("".concat(t," should be a Relationship but received ").concat(typeof e))}},e)},asUnboundRelationship:function(e){return ca({validate:function(e,t){if(!(0,fa.isUnboundRelationship)(e))throw new TypeError("".concat(t," should be a UnboundRelationship but received ").concat(typeof e))}},e)},asPath:function(e){return ca({validate:function(e,t){if(!(0,fa.isPath)(e))throw new TypeError("".concat(t," should be a Path but received ").concat(typeof e))}},e)},asPoint:function(e){return ca({validate:function(e,t){if(!(0,pa.isPoint)(e))throw new TypeError("".concat(t," should be a Point but received ").concat(typeof e))}},e)},asDuration:function(t){return ca({validate:function(e,t){if(!(0,da.isDuration)(e))throw new TypeError("".concat(t," should be a Duration but received ").concat(typeof e))},convert:function(e){return!0===(null==t?void 0:t.stringify)?e.toString():e}},t)},asLocalTime:function(t){return ca({validate:function(e,t){if(!(0,da.isLocalTime)(e))throw new TypeError("".concat(t," should be a LocalTime but received ").concat(typeof e))},convert:function(e){return!0===(null==t?void 0:t.stringify)?e.toString():e}},t)},asTime:function(t){return ca({validate:function(e,t){if(!(0,da.isTime)(e))throw new TypeError("".concat(t," should be a Time but received ").concat(typeof e))},convert:function(e){return!0===(null==t?void 0:t.stringify)?e.toString():e}},t)},asDate:function(t){return ca({validate:function(e,t){if(!(0,da.isDate)(e))throw new TypeError("".concat(t," should be a Date but received ").concat(typeof e))},convert:function(e){return ba(e,t)}},t)},asLocalDateTime:function(t){return ca({validate:function(e,t){if(!(0,da.isLocalDateTime)(e))throw new TypeError("".concat(t," should be a LocalDateTime but received ").concat(typeof e))},convert:function(e){return ba(e,t)}},t)},asDateTime:function(t){return ca({validate:function(e,t){if(!(0,da.isDateTime)(e))throw new TypeError("".concat(t," should be a DateTime but received ").concat(typeof e))},convert:function(e){return ba(e,t)}},t)},asList:function(n){return ca({validate:function(e,t){if(!Array.isArray(e))throw new TypeError("".concat(t," should be a list but received ").concat(typeof e))},convert:function(e,r){return null!=(null==n?void 0:n.apply)?e.map(function(e,t){return(0,la.valueAs)(e,"".concat(r,"[").concat(t,"]"),n.apply)}):e}},n)},asVector:function(t){return ca({validate:function(e,t){if(!(e instanceof ha.default))throw new TypeError("".concat(t," should be a vector but received ").concat(typeof e))},convert:function(e){return!0===(null==t?void 0:t.asTypedList)?e._typedArray:e}},t)}});var g={},ya=r&&r.__assign||function(){return(ya=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_a=(Object.defineProperty(g,"__esModule",{value:!0}),l),va=b;g.default={booleanProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asBoolean(r)}},stringProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asString(r)}},numberProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asNumber(r)}},bigIntProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asBigInt(r)}},nodeProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asNode(r)}},relationshipProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asRelationship(r)}},pathProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asPath(r)}},pointProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asPoint(r)}},durationProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asDuration(r)}},listProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asList(ya({apply:ya({},t.metadata[t.name])},r))}},vectorProperty:function(r){return function(e,t){t.metadata[t.name]=va.rule.asVector(r)}},optionalProperty:function(){return function(e,t){t.metadata[t.name]=ya({optional:!0},t.metadata[t.name])}},mapPropertyFromName:function(r){return function(e,t){t.metadata[t.name]=ya({from:r},t.metadata[t.name])}},convertPropertyToType:function(r){return function(e,t){t.metadata[t.name]=ya({convert:function(e){return e.as(r)}},t.metadata[t.name])}},mappedClass:function(){return function(e,t){_a.rulesRegistry[t.name]=t.metadata}}};var ma,ga,Oa,wa,Ea,Pa,Ta,Sa,ja,Ca,Ia,Ra,Aa,ka,Ma,Na,xa,Da,La,Ua,Fa,Ba,sr={},Va=(Object.defineProperty(sr,"__esModule",{value:!0}),sr.isUnsupportedType=function(e){return null!=e&&!0===e[Va]},"__isUnsupportedType__"),c=(qa.prototype.toString=function(){return"UnsupportedType<".concat(this.name,">")},qa);function qa(e,t,r,n){this.name=e,this.minimumProtocolVersion="".concat(t,".").concat(r),this.message=n}sr.default=c,Object.defineProperty(c.prototype,Va,{value:!0,enumerable:!1,configurable:!1,writable:!1}),c=e,ga=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),Oa=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),C=r&&r.__importStar||(ma=function(e){return(ma=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=ma(e),n=0;n<r.length;n++)"default"!==r[n]&&ga(t,e,r[n]);return Oa(t,e),t}),rc=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(c,"__esModule",{value:!0}),c.Result=c.Stats=c.QueryStatistics=c.ProfiledPlan=c.Plan=c.GqlStatusObject=c.Notification=c.ServerInfo=c.queryType=c.ResultSummary=c.Record=c.isPathSegment=c.PathSegment=c.isPath=c.Path=c.isUnboundRelationship=c.UnboundRelationship=c.isRelationship=c.Relationship=c.isNode=c.Node=c.Time=c.LocalTime=c.LocalDateTime=c.isTime=c.isLocalTime=c.isLocalDateTime=c.isDuration=c.isDateTime=c.isDate=c.Duration=c.DateTime=c.Date=c.Point=c.isPoint=c.internal=c.toString=c.toNumber=c.inSafeRange=c.isInt=c.int=c.Integer=c.error=c.isRetriableError=c.isRetryableError=c.GQLError=c.newGQLError=c.Neo4jError=c.newError=c.authTokenManagers=void 0,c.isUnsupportedType=c.UnsupportedType=c.StandardCase=c.RecordObjectMapping=c.mappingDecorators=c.rule=c.ProtocolVersion=c.vector=c.Vector=c.isVector=c.resolveCertificateProvider=c.clientCertificateProviders=c.notificationFilterMinimumSeverityLevel=c.notificationFilterDisabledClassification=c.notificationFilterDisabledCategory=c.notificationSeverityLevel=c.notificationClassification=c.notificationCategory=c.resultTransformers=c.routing=c.staticAuthTokenManager=c.bookmarkManager=c.auth=c.json=c.driver=c.types=c.Driver=c.Session=c.TransactionPromise=c.ManagedTransaction=c.Transaction=c.Connection=c.Releasable=c.ConnectionProvider=c.EagerResult=void 0,wa=t,Object.defineProperty(c,"newError",{enumerable:!0,get:function(){return wa.newError}}),Object.defineProperty(c,"Neo4jError",{enumerable:!0,get:function(){return wa.Neo4jError}}),Object.defineProperty(c,"newGQLError",{enumerable:!0,get:function(){return wa.newGQLError}}),Object.defineProperty(c,"GQLError",{enumerable:!0,get:function(){return wa.GQLError}}),Object.defineProperty(c,"isRetryableError",{enumerable:!0,get:function(){return wa.isRetryableError}}),Object.defineProperty(c,"isRetriableError",{enumerable:!0,get:function(){return wa.isRetriableError}}),Ea=C(i),c.Integer=Ea.default,Object.defineProperty(c,"int",{enumerable:!0,get:function(){return Ea.int}}),Object.defineProperty(c,"isInt",{enumerable:!0,get:function(){return Ea.isInt}}),Object.defineProperty(c,"inSafeRange",{enumerable:!0,get:function(){return Ea.inSafeRange}}),Object.defineProperty(c,"toNumber",{enumerable:!0,get:function(){return Ea.toNumber}}),Object.defineProperty(c,"toString",{enumerable:!0,get:function(){return Ea.toString}}),Pa=u,Object.defineProperty(c,"Date",{enumerable:!0,get:function(){return Pa.Date}}),Object.defineProperty(c,"DateTime",{enumerable:!0,get:function(){return Pa.DateTime}}),Object.defineProperty(c,"Duration",{enumerable:!0,get:function(){return Pa.Duration}}),Object.defineProperty(c,"isDate",{enumerable:!0,get:function(){return Pa.isDate}}),Object.defineProperty(c,"isDateTime",{enumerable:!0,get:function(){return Pa.isDateTime}}),Object.defineProperty(c,"isDuration",{enumerable:!0,get:function(){return Pa.isDuration}}),Object.defineProperty(c,"isLocalDateTime",{enumerable:!0,get:function(){return Pa.isLocalDateTime}}),Object.defineProperty(c,"isLocalTime",{enumerable:!0,get:function(){return Pa.isLocalTime}}),Object.defineProperty(c,"isTime",{enumerable:!0,get:function(){return Pa.isTime}}),Object.defineProperty(c,"LocalDateTime",{enumerable:!0,get:function(){return Pa.LocalDateTime}}),Object.defineProperty(c,"LocalTime",{enumerable:!0,get:function(){return Pa.LocalTime}}),Object.defineProperty(c,"Time",{enumerable:!0,get:function(){return Pa.Time}}),Ta=p,Object.defineProperty(c,"Node",{enumerable:!0,get:function(){return Ta.Node}}),Object.defineProperty(c,"isNode",{enumerable:!0,get:function(){return Ta.isNode}}),Object.defineProperty(c,"Relationship",{enumerable:!0,get:function(){return Ta.Relationship}}),Object.defineProperty(c,"isRelationship",{enumerable:!0,get:function(){return Ta.isRelationship}}),Object.defineProperty(c,"UnboundRelationship",{enumerable:!0,get:function(){return Ta.UnboundRelationship}}),Object.defineProperty(c,"isUnboundRelationship",{enumerable:!0,get:function(){return Ta.isUnboundRelationship}}),Object.defineProperty(c,"Path",{enumerable:!0,get:function(){return Ta.Path}}),Object.defineProperty(c,"isPath",{enumerable:!0,get:function(){return Ta.isPath}}),Object.defineProperty(c,"PathSegment",{enumerable:!0,get:function(){return Ta.PathSegment}}),Object.defineProperty(c,"isPathSegment",{enumerable:!0,get:function(){return Ta.isPathSegment}}),t=rc(jt),c.Record=t.default,Sa=gt,Object.defineProperty(c,"isPoint",{enumerable:!0,get:function(){return Sa.isPoint}}),Object.defineProperty(c,"Point",{enumerable:!0,get:function(){return Sa.Point}}),ja=C(Wt),c.ResultSummary=ja.default,Object.defineProperty(c,"queryType",{enumerable:!0,get:function(){return ja.queryType}}),Object.defineProperty(c,"ServerInfo",{enumerable:!0,get:function(){return ja.ServerInfo}}),Object.defineProperty(c,"Plan",{enumerable:!0,get:function(){return ja.Plan}}),Object.defineProperty(c,"ProfiledPlan",{enumerable:!0,get:function(){return ja.ProfiledPlan}}),Object.defineProperty(c,"QueryStatistics",{enumerable:!0,get:function(){return ja.QueryStatistics}}),Object.defineProperty(c,"Stats",{enumerable:!0,get:function(){return ja.Stats}}),Ca=C(zn),c.GqlStatusObject=Ca.default,Object.defineProperty(c,"Notification",{enumerable:!0,get:function(){return Ca.Notification}}),Object.defineProperty(c,"notificationCategory",{enumerable:!0,get:function(){return Ca.notificationCategory}}),Object.defineProperty(c,"notificationClassification",{enumerable:!0,get:function(){return Ca.notificationClassification}}),Object.defineProperty(c,"notificationSeverityLevel",{enumerable:!0,get:function(){return Ca.notificationSeverityLevel}}),Ia=S,Object.defineProperty(c,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return Ia.notificationFilterDisabledCategory}}),Object.defineProperty(c,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return Ia.notificationFilterDisabledClassification}}),Object.defineProperty(c,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return Ia.notificationFilterMinimumSeverityLevel}}),i=rc(Hn),c.Result=i.default,u=rc(G),c.EagerResult=u.default,Ra=C(o),c.ConnectionProvider=Ra.default,Object.defineProperty(c,"Releasable",{enumerable:!0,get:function(){return Ra.Releasable}}),p=rc(n),c.Connection=p.default,jt=rc(j),c.Transaction=jt.default,gt=rc(T),c.ManagedTransaction=gt.default,Wt=rc(w),c.TransactionPromise=Wt.default,zn=rc(ln),c.Session=zn.default,S=C(P),Hn=S,c.Driver=S.default,c.driver=Hn,G=rc(E),c.auth=G.default,Aa=Gt,Object.defineProperty(c,"bookmarkManager",{enumerable:!0,get:function(){return Aa.bookmarkManager}}),ka=y,Object.defineProperty(c,"authTokenManagers",{enumerable:!0,get:function(){return ka.authTokenManagers}}),Object.defineProperty(c,"staticAuthTokenManager",{enumerable:!0,get:function(){return ka.staticAuthTokenManager}}),Ma=P,Object.defineProperty(c,"routing",{enumerable:!0,get:function(){return Ma.routing}}),o=C(_),c.types=o,n=C(F),c.json=n,j=rc(m),c.resultTransformers=j.default,Na=O,Object.defineProperty(c,"clientCertificateProviders",{enumerable:!0,get:function(){return Na.clientCertificateProviders}}),Object.defineProperty(c,"resolveCertificateProvider",{enumerable:!0,get:function(){return Na.resolveCertificateProvider}}),T=C(h),c.internal=T,xa=or,Object.defineProperty(c,"ProtocolVersion",{enumerable:!0,get:function(){return xa.ProtocolVersion}}),Da=C(v),c.Vector=Da.default,Object.defineProperty(c,"vector",{enumerable:!0,get:function(){return Da.vector}}),Object.defineProperty(c,"isVector",{enumerable:!0,get:function(){return Da.isVector}}),La=dt,Object.defineProperty(c,"StandardCase",{enumerable:!0,get:function(){return La.StandardCase}}),Ua=l,Object.defineProperty(c,"RecordObjectMapping",{enumerable:!0,get:function(){return Ua.RecordObjectMapping}}),Fa=b,Object.defineProperty(c,"rule",{enumerable:!0,get:function(){return Fa.rule}}),rc=rc(g),c.mappingDecorators=rc.default,Ba=C(sr),c.UnsupportedType=Ba.default,Object.defineProperty(c,"isUnsupportedType",{enumerable:!0,get:function(){return Ba.isUnsupportedType}}),C={SERVICE_UNAVAILABLE:wa.SERVICE_UNAVAILABLE,SESSION_EXPIRED:wa.SESSION_EXPIRED,PROTOCOL_ERROR:wa.PROTOCOL_ERROR},c.error=C,C={authTokenManagers:ka.authTokenManagers,newError:wa.newError,Neo4jError:wa.Neo4jError,newGQLError:wa.newGQLError,GQLError:wa.GQLError,isRetryableError:wa.isRetryableError,isRetriableError:wa.isRetriableError,error:C,Integer:Ea.default,int:Ea.int,isInt:Ea.isInt,inSafeRange:Ea.inSafeRange,toNumber:Ea.toNumber,toString:Ea.toString,internal:T,isPoint:Sa.isPoint,Point:Sa.Point,Date:Pa.Date,DateTime:Pa.DateTime,Duration:Pa.Duration,isDate:Pa.isDate,isDateTime:Pa.isDateTime,isDuration:Pa.isDuration,isLocalDateTime:Pa.isLocalDateTime,isLocalTime:Pa.isLocalTime,isTime:Pa.isTime,LocalDateTime:Pa.LocalDateTime,LocalTime:Pa.LocalTime,Time:Pa.Time,Node:Ta.Node,isNode:Ta.isNode,Relationship:Ta.Relationship,isRelationship:Ta.isRelationship,UnboundRelationship:Ta.UnboundRelationship,isUnboundRelationship:Ta.isUnboundRelationship,Path:Ta.Path,isPath:Ta.isPath,PathSegment:Ta.PathSegment,isPathSegment:Ta.isPathSegment,Record:t.default,ResultSummary:ja.default,queryType:ja.queryType,ServerInfo:ja.ServerInfo,Notification:Ca.Notification,GqlStatusObject:Ca.default,Plan:ja.Plan,ProfiledPlan:ja.ProfiledPlan,QueryStatistics:ja.QueryStatistics,Stats:ja.Stats,Result:i.default,EagerResult:u.default,Transaction:jt.default,ManagedTransaction:gt.default,TransactionPromise:Wt.default,Session:zn.default,Driver:S.default,Connection:p.default,Releasable:Ra.Releasable,types:o,driver:Hn,json:n,auth:G.default,bookmarkManager:Aa.bookmarkManager,routing:Ma.routing,resultTransformers:j.default,notificationCategory:Ca.notificationCategory,notificationClassification:Ca.notificationClassification,notificationSeverityLevel:Ca.notificationSeverityLevel,notificationFilterDisabledCategory:Ia.notificationFilterDisabledCategory,notificationFilterDisabledClassification:Ia.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:Ia.notificationFilterMinimumSeverityLevel,clientCertificateProviders:Na.clientCertificateProviders,resolveCertificateProvider:Na.resolveCertificateProvider,ProtocolVersion:xa.ProtocolVersion,rule:Fa.rule,mappingDecorators:rc.default,RecordObjectMapping:Ua.RecordObjectMapping,StandardCase:La.StandardCase,UnsupportedType:Ba.default,isUnsupportedType:Ba.isUnsupportedType,isVector:Da.isVector,vector:Da.vector},c.default=C;w={},ln={},E={},Gt={},y={};Object.defineProperty(y,"__esModule",{value:!0}),y.isFunction=void 0,y.isFunction=function(e){return"function"==typeof e};P={},_={},F={};Object.defineProperty(F,"__esModule",{value:!0}),F.createErrorClass=void 0,F.createErrorClass=function(e){return(e=e(function(e){Error.call(e),e.stack=(new Error).stack})).prototype=Object.create(Error.prototype),e.prototype.constructor=e},Object.defineProperty(_,"__esModule",{value:!0}),_.UnsubscriptionError=void 0;m=F,_.UnsubscriptionError=m.createErrorClass(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}),O={};Object.defineProperty(O,"__esModule",{value:!0}),O.arrRemove=void 0,O.arrRemove=function(e,t){e&&0<=(t=e.indexOf(t))&&e.splice(t,1)};var Wa=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},za=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Ha=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Ga=(Object.defineProperty(P,"__esModule",{value:!0}),P.isSubscription=P.EMPTY_SUBSCRIPTION=P.Subscription=void 0,y),Ya=_,Ka=O,Za=(Qa.prototype.unsubscribe=function(){var t,e,r;if(!this.closed){this.closed=!0;var n=this._parentage;if(n)if(this._parentage=null,Array.isArray(n))try{for(var o=Wa(n),i=o.next();!i.done;i=o.next())i.value.remove(this)}catch(e){a={error:e}}finally{try{i&&!i.done&&(u=o.return)&&u.call(o)}finally{if(a)throw a.error}}else n.remove(this);var u=this.initialTeardown;if(Ga.isFunction(u))try{u()}catch(e){r=e instanceof Ya.UnsubscriptionError?e.errors:[e]}var a=this._finalizers;if(a){this._finalizers=null;try{for(var s=Wa(a),c=s.next();!c.done;c=s.next()){var l=c.value;try{Xa(l)}catch(e){r=null!=r?r:[],e instanceof Ya.UnsubscriptionError?r=Ha(Ha([],za(r)),za(e.errors)):r.push(e)}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}}if(r)throw new Ya.UnsubscriptionError(r)}},Qa.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Xa(e);else{if(e instanceof Qa){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},Qa.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},Qa.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},Qa.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Ka.arrRemove(t,e)},Qa.prototype.remove=function(e){var t=this._finalizers;t&&Ka.arrRemove(t,e),e instanceof Qa&&e._removeParent(this)},Qa.EMPTY=((h=new Qa).closed=!0,h),Qa);function Qa(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}function Xa(e){Ga.isFunction(e)?e():e.unsubscribe()}P.Subscription=Za,P.EMPTY_SUBSCRIPTION=Za.EMPTY,P.isSubscription=function(e){return e instanceof Za||e&&"closed"in e&&Ga.isFunction(e.remove)&&Ga.isFunction(e.add)&&Ga.isFunction(e.unsubscribe)};var Ja,$a,es,or={},v=(Object.defineProperty(or,"__esModule",{value:!0}),or.config=void 0,or.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},{}),dt={},ts=(Ja=dt,$a=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},es=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.timeoutProvider=void 0,Ja.timeoutProvider={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=Ja.timeoutProvider.delegate;return null!=o&&o.setTimeout?o.setTimeout.apply(o,es([e,t],$a(r))):setTimeout.apply(void 0,es([e,t],$a(r)))},clearTimeout:function(e){var t=Ja.timeoutProvider.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0},Object.defineProperty(v,"__esModule",{value:!0}),v.reportUnhandledError=void 0,or),rs=dt;v.reportUnhandledError=function(t){rs.timeoutProvider.setTimeout(function(){var e=ts.config.onUnhandledError;if(!e)throw t;e(t)})};l={};Object.defineProperty(l,"__esModule",{value:!0}),l.noop=void 0,l.noop=function(){};b={};function ns(e,t,r){return{kind:e,value:t,error:r}}Object.defineProperty(b,"__esModule",{value:!0}),b.createNotification=b.nextNotification=b.errorNotification=b.COMPLETE_NOTIFICATION=void 0,b.COMPLETE_NOTIFICATION=ns("C",void 0,void 0),b.errorNotification=function(e){return ns("E",void 0,e)},b.nextNotification=function(e){return ns("N",e,void 0)},b.createNotification=ns;var os,is,us,as,ss,cs,ls,fs,ps,ds,hs,bs,ys,_s,g={},vs=(Object.defineProperty(g,"__esModule",{value:!0}),g.captureError=g.errorContext=void 0,or),ms=null;function gs(e){var t=us.call(this)||this;return t.isStopped=!1,e?(t.destination=e,ss.isSubscription(e)&&e.add(t)):t.destination=os.EMPTY_OBSERVER,t}function Os(e,t){return hs.call(e,t)}function ws(e){this.partialObserver=e}function Es(e,t,r){var n=ys.call(this)||this;return r=as.isFunction(e)||!e?{next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0}:n&&cs.config.useDeprecatedNextContext?((t=Object.create(e)).unsubscribe=function(){return n.unsubscribe()},{next:e.next&&Os(e.next,t),error:e.error&&Os(e.error,t),complete:e.complete&&Os(e.complete,t)}):e,n.destination=new bs(r),n}function Ps(e){cs.config.useDeprecatedSynchronousErrorHandling?ds.captureError(e):ls.reportUnhandledError(e)}function Ts(e,t){var r=cs.config.onStoppedNotification;r&&ps.timeoutProvider.setTimeout(function(){return r(e,t)})}g.errorContext=function(e){if(vs.config.useDeprecatedSynchronousErrorHandling){var t=!ms;if(t&&(ms={errorThrown:!1,error:null}),e(),t){var t=ms,r=t.errorThrown,t=t.error;if(ms=null,r)throw t}}else e()},g.captureError=function(e){vs.config.useDeprecatedSynchronousErrorHandling&&ms&&(ms.errorThrown=!0,ms.error=e)},os=Gt,sr=r&&r.__extends||(is=function(e,t){return(is=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}is(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Object.defineProperty(os,"__esModule",{value:!0}),os.EMPTY_OBSERVER=os.SafeSubscriber=os.Subscriber=void 0,as=y,cs=or,ls=v,T=l,fs=b,ps=dt,ds=g,us=(ss=P).Subscription,sr(gs,us),gs.create=function(e,t,r){return new _s(e,t,r)},gs.prototype.next=function(e){this.isStopped?Ts(fs.nextNotification(e),this):this._next(e)},gs.prototype.error=function(e){this.isStopped?Ts(fs.errorNotification(e),this):(this.isStopped=!0,this._error(e))},gs.prototype.complete=function(){this.isStopped?Ts(fs.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},gs.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,us.prototype.unsubscribe.call(this),this.destination=null)},gs.prototype._next=function(e){this.destination.next(e)},gs.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},gs.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t=gs,os.Subscriber=t,hs=Function.prototype.bind,ws.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Ps(e)}},ws.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Ps(e)}else Ps(e)},ws.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Ps(e)}},bs=ws,sr(Es,ys=t),_s=Es,os.SafeSubscriber=_s,os.EMPTY_OBSERVER={closed:!0,next:T.noop,error:function(e){throw e},complete:T.noop};i={},Object.defineProperty(i,"__esModule",{value:!0}),i.observable=void 0,i.observable="function"==typeof Symbol&&Symbol.observable||"@@observable",u={},jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.identity=void 0,jt.identity=function(e){return e},Object.defineProperty(u,"__esModule",{value:!0}),u.pipeFromArray=u.pipe=void 0;var Ss=jt;function js(t){return 0===t.length?Ss.identity:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}}u.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return js(e)},u.pipeFromArray=js,Object.defineProperty(E,"__esModule",{value:!0}),E.Observable=void 0;var Cs=Gt,Is=P,gt=i,Rs=u,As=or,ks=y,Ms=g;function Ns(e){e&&(this._subscribe=e)}function xs(e){return null!=(e=null!=e?e:As.config.Promise)?e:Promise}Ns.prototype.lift=function(e){var t=new Ns;return t.source=this,t.operator=e,t},Ns.prototype.subscribe=function(e,t,r){var n,o=this,i=(n=e)&&n instanceof Cs.Subscriber||function(e){return e&&ks.isFunction(e.next)&&ks.isFunction(e.error)&&ks.isFunction(e.complete)}(n)&&Is.isSubscription(n)?e:new Cs.SafeSubscriber(e,t,r);return Ms.errorContext(function(){var e=o.operator,t=o.source;i.add(e?e.call(i,t):t?o._subscribe(i):o._trySubscribe(i))}),i},Ns.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},Ns.prototype.forEach=function(n,e){var o=this;return new(e=xs(e))(function(e,t){var r=new Cs.SafeSubscriber({next:function(e){try{n(e)}catch(e){t(e),r.unsubscribe()}},error:t,complete:e});o.subscribe(r)})},Ns.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},Ns.prototype[gt.observable]=function(){return this},Ns.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Rs.pipeFromArray(e)(this)},Ns.prototype.toPromise=function(e){var n=this;return new(e=xs(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},Ns.create=function(e){return new Ns(e)},E.Observable=Ns;var Wt={},zn={},S={},Ds=(Object.defineProperty(S,"__esModule",{value:!0}),S.operate=S.hasLift=void 0,y);function Ls(e){return Ds.isFunction(null==e?void 0:e.lift)}S.hasLift=Ls,S.operate=function(t){return function(e){if(Ls(e))return e.lift(function(e){try{return t(e,this)}catch(e){this.error(e)}});throw new TypeError("Unable to lift unknown Observable type")}};var Us,p={},o=r&&r.__extends||(Us=function(e,t){return(Us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Us(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Hn=(Object.defineProperty(p,"__esModule",{value:!0}),p.OperatorSubscriber=p.createOperatorSubscriber=void 0,Gt);p.createOperatorSubscriber=function(e,t,r,n,o){return new Bs(e,t,r,n,o)};o(Vs,Fs=Hn.Subscriber),Vs.prototype.unsubscribe=function(){var e;this.shouldUnsubscribe&&!this.shouldUnsubscribe()||(e=this.closed,Fs.prototype.unsubscribe.call(this),e||null==(e=this.onFinalize)||e.call(this))};var Fs,Bs=Vs;function Vs(t,r,e,n,o,i){var u=Fs.call(this,t)||this;return u.onFinalize=o,u.shouldUnsubscribe=i,u._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:Fs.prototype._next,u._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:Fs.prototype._error,u._complete=e?function(){try{e()}catch(e){t.error(e)}finally{this.unsubscribe()}}:Fs.prototype._complete,u}p.OperatorSubscriber=Bs,Object.defineProperty(zn,"__esModule",{value:!0}),zn.refCount=void 0;var qs=S,Ws=p;zn.refCount=function(){return qs.operate(function(r,n){var o=null,e=(r._refCount++,Ws.createOperatorSubscriber(n,void 0,void 0,void 0,function(){var e,t;!r||r._refCount<=0||0<--r._refCount?o=null:(e=r._connection,t=o,o=null,!e||t&&e!==t||e.unsubscribe(),n.unsubscribe())}));r.subscribe(e),e.closed||(o=r.connect())})};var zs,n=r&&r.__extends||(zs=function(e,t){return(zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}zs(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.ConnectableObservable=void 0;var Hs,Gs=P,Ys=zn,Ks=p,Zs=S,G=(Hs=E.Observable,n(Qs,Hs),Qs.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},Qs.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},Qs.prototype._teardown=function(){this._refCount=0;var e=this._connection;(this._subject=this._connection=null)!=e&&e.unsubscribe()},Qs.prototype.connect=function(){var t,r=this,e=this._connection;return e||(e=this._connection=new Gs.Subscription,t=this.getSubject(),e.add(this.source.subscribe(Ks.createOperatorSubscriber(t,void 0,function(){r._teardown(),t.complete()},function(e){r._teardown(),t.error(e)},function(){return r._teardown()}))),e.closed&&(this._connection=null,e=Gs.Subscription.EMPTY)),e},Qs.prototype.refCount=function(){return Ys.refCount()(this)},Qs);function Qs(e,t){var r=Hs.call(this)||this;return r.source=e,r.subjectFactory=t,r._subject=null,r._refCount=0,r._connection=null,Zs.hasLift(e)&&(r.lift=e.lift),r}Wt.ConnectableObservable=G;var Xs,Js,$s,ec,tc,j={},rc={},c=(Xs=rc,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.performanceTimestampProvider=void 0,Xs.performanceTimestampProvider={now:function(){return(Xs.performanceTimestampProvider.delegate||performance).now()},delegate:void 0},{}),nc=(Js=c,$s=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},ec=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Object.defineProperty(Js,"__esModule",{value:!0}),Js.animationFrameProvider=void 0,tc=P,Js.animationFrameProvider={schedule:function(t){var e=requestAnimationFrame,r=cancelAnimationFrame,n=Js.animationFrameProvider.delegate,o=(n&&(e=n.requestAnimationFrame,r=n.cancelAnimationFrame),e(function(e){r=void 0,t(e)}));return new tc.Subscription(function(){return null==r?void 0:r(o)})},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Js.animationFrameProvider.delegate;return((null==r?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,ec([],$s(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Js.animationFrameProvider.delegate;return((null==r?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,ec([],$s(e)))},delegate:void 0},Object.defineProperty(j,"__esModule",{value:!0}),j.animationFrames=void 0,E),oc=rc,ic=c;function uc(a){return new nc.Observable(function(r){var n=a||oc.performanceTimestampProvider,o=n.now(),i=0,u=function(){r.closed||(i=ic.animationFrameProvider.requestAnimationFrame(function(e){i=0;var t=n.now();r.next({timestamp:a?t:e,elapsed:t-o}),u()}))};return u(),function(){i&&ic.animationFrameProvider.cancelAnimationFrame(i)}})}j.animationFrames=function(e){return e?uc(e):cc};var ac,sc,cc=uc(),C={},m={},h=(Object.defineProperty(m,"__esModule",{value:!0}),m.ObjectUnsubscribedError=void 0,F),b=(m.ObjectUnsubscribedError=h.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),r&&r.__extends||(ac=function(e,t){return(ac=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ac(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),lc=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fc=(Object.defineProperty(C,"__esModule",{value:!0}),C.AnonymousSubject=C.Subject=void 0,E),pc=P,dc=m,hc=O,bc=g,dt=(sc=fc.Observable,b(yc,sc),yc.prototype.lift=function(e){var t=new vc(this,this);return t.operator=e,t},yc.prototype._throwIfClosed=function(){if(this.closed)throw new dc.ObjectUnsubscribedError},yc.prototype.next=function(o){var i=this;bc.errorContext(function(){var t,e;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var r=lc(i.currentObservers),n=r.next();!n.done;n=r.next())n.value.next(o)}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}})},yc.prototype.error=function(t){var r=this;bc.errorContext(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var e=r.observers;e.length;)e.shift().error(t)}})},yc.prototype.complete=function(){var t=this;bc.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},yc.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(yc.prototype,"observed",{get:function(){var e;return 0<(null==(e=this.observers)?void 0:e.length)},enumerable:!1,configurable:!0}),yc.prototype._trySubscribe=function(e){return this._throwIfClosed(),sc.prototype._trySubscribe.call(this,e)},yc.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},yc.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,o=this.observers;return r||n?pc.EMPTY_SUBSCRIPTION:(this.currentObservers=null,o.push(e),new pc.Subscription(function(){t.currentObservers=null,hc.arrRemove(o,e)}))},yc.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},yc.prototype.asObservable=function(){var e=new fc.Observable;return e.source=this,e},yc.create=function(e,t){return new vc(e,t)},yc);function yc(){var e=sc.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}C.Subject=dt;b(mc,_c=dt),mc.prototype.next=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.next)&&r.call(t,e)},mc.prototype.error=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.error)&&r.call(t,e)},mc.prototype.complete=function(){var e,t;null!=(t=null==(e=this.destination)?void 0:e.complete)&&t.call(e)},mc.prototype._subscribe=function(e){var t;return null!=(t=null==(t=this.source)?void 0:t.subscribe(e))?t:pc.EMPTY_SUBSCRIPTION};var _c,vc=mc;function mc(e,t){var r=_c.call(this)||this;return r.destination=e,r.source=t,r}C.AnonymousSubject=vc;var gc,sr={},t=r&&r.__extends||(gc=function(e,t){return(gc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}gc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(sr,"__esModule",{value:!0}),sr.BehaviorSubject=void 0;Oc=C.Subject,t(wc,Oc),Object.defineProperty(wc.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),wc.prototype._subscribe=function(e){var t=Oc.prototype._subscribe.call(this,e);return t.closed||e.next(this._value),t},wc.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},wc.prototype.next=function(e){Oc.prototype.next.call(this,this._value=e)};var Oc,T=wc;function wc(e){var t=Oc.call(this)||this;return t._value=e,t}sr.BehaviorSubject=T;var Ec,Pc,gt={},o={},Hn=(Ec=o,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.dateTimestampProvider=void 0,Ec.dateTimestampProvider={now:function(){return(Ec.dateTimestampProvider.delegate||Date).now()},delegate:void 0},r&&r.__extends||(Pc=function(e,t){return(Pc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Pc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}));Object.defineProperty(gt,"__esModule",{value:!0}),gt.ReplaySubject=void 0;var Tc,Sc=o,n=(Tc=C.Subject,Hn(jc,Tc),jc.prototype.next=function(e){var t=this.isStopped,r=this._buffer,n=this._infiniteTimeWindow,o=this._timestampProvider,i=this._windowTime;t||(r.push(e),n||r.push(o.now()+i)),this._trimBuffer(),Tc.prototype.next.call(this,e)},jc.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),o=0;o<n.length&&!e.closed;o+=r?1:2)e.next(n[o]);return this._checkFinalizedStatuses(e),t},jc.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,r=this._buffer,n=this._infiniteTimeWindow,o=(n?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!n){for(var i=t.now(),u=0,a=1;a<r.length&&r[a]<=i;a+=2)u=a;u&&r.splice(0,u+1)}},jc);function jc(e,t,r){void 0===e&&(e=1/0),void 0===t&&(t=1/0),void 0===r&&(r=Sc.dateTimestampProvider);var n=Tc.call(this)||this;return n._bufferSize=e,n._windowTime=t,n._timestampProvider=r,n._buffer=[],n._infiniteTimeWindow=!0,n._infiniteTimeWindow=t===1/0,n._bufferSize=Math.max(1,e),n._windowTime=Math.max(1,t),n}gt.ReplaySubject=n;var Cc,G={},rc=r&&r.__extends||(Cc=function(e,t){return(Cc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Cc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(G,"__esModule",{value:!0}),G.AsyncSubject=void 0;Ic=C.Subject,rc(Rc,Ic),Rc.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this._hasValue,n=this._value,o=this.thrownError,i=this.isStopped,u=this._isComplete;t?e.error(o):(i||u)&&(r&&e.next(n),e.complete())},Rc.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},Rc.prototype.complete=function(){var e=this._hasValue,t=this._value;this._isComplete||(this._isComplete=!0,e&&Ic.prototype.next.call(this,t),Ic.prototype.complete.call(this))};var Ic,h=Rc;function Rc(){var e=null!==Ic&&Ic.apply(this,arguments)||this;return e._value=null,e._hasValue=!1,e._isComplete=!1,e}G.AsyncSubject=h;var Ac,g={},b={},dt={},t={},T=r&&r.__extends||(Ac=function(e,t){return(Ac=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ac(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;kc=P.Subscription,T(Mc,kc),Mc.prototype.schedule=function(e,t){return this};var kc,Hn=Mc;function Mc(e,t){return kc.call(this)||this}t.Action=Hn;var Nc,xc,Dc,Lc,n={},rc=(Nc=n,xc=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Dc=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.intervalProvider=void 0,Nc.intervalProvider={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=Nc.intervalProvider.delegate;return null!=o&&o.setInterval?o.setInterval.apply(o,Dc([e,t],xc(r))):setInterval.apply(void 0,Dc([e,t],xc(r)))},clearInterval:function(e){var t=Nc.intervalProvider.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},r&&r.__extends||(Lc=function(e,t){return(Lc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Lc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}));Object.defineProperty(dt,"__esModule",{value:!0}),dt.AsyncAction=void 0;var Uc,Fc=n,Bc=O,h=(Uc=t.Action,rc(Vc,Uc),Vc.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var e=this.id,r=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(r,e,t)),this.pending=!0,this.delay=t,this.id=null!=(e=this.id)?e:this.requestAsyncId(r,this.id,t),this},Vc.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),Fc.intervalProvider.setInterval(e.flush.bind(e,this),r)},Vc.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)&&this.delay===r&&!1===this.pending)return t;null!=t&&Fc.intervalProvider.clearInterval(t)},Vc.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;e=this._execute(e,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},Vc.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},Vc.prototype.unsubscribe=function(){var e,t,r;this.closed||(e=this.id,r=(t=this.scheduler).actions,this.work=this.state=this.scheduler=null,this.pending=!1,Bc.arrRemove(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,Uc.prototype.unsubscribe.call(this))},Vc);function Vc(e,t){var r=Uc.call(this,e,t)||this;return r.scheduler=e,r.work=t,r.pending=!1,r}dt.AsyncAction=h;var qc,Wc,zc,Hc,Gc,Yc,T={},Hn={},Kc=(Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.TestTools=Hn.Immediate=void 0,1),Zc={};function Qc(e){return e in Zc&&(delete Zc[e],!0)}Hn.Immediate={setImmediate:function(e){var t=Kc++;return Zc[t]=!0,(qc=qc||Promise.resolve()).then(function(){return Qc(t)&&e()}),t},clearImmediate:function(e){Qc(e)}},Hn.TestTools={pending:function(){return Object.keys(Zc).length}},Wc=T,zc=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Hc=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.immediateProvider=void 0,Gc=Hn.Immediate.setImmediate,Yc=Hn.Immediate.clearImmediate,Wc.immediateProvider={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Wc.immediateProvider.delegate;return((null==r?void 0:r.setImmediate)||Gc).apply(void 0,Hc([],zc(e)))},clearImmediate:function(e){var t=Wc.immediateProvider.delegate;return((null==t?void 0:t.clearImmediate)||Yc)(e)},delegate:void 0};var Xc,n=r&&r.__extends||(Xc=function(e,t){return(Xc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Xc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(b,"__esModule",{value:!0}),b.AsapAction=void 0;var Jc,$c=T,t=(Jc=dt.AsyncAction,n(el,Jc),el.prototype.requestAsyncId=function(e,t,r){return null!==(r=void 0===r?0:r)&&0<r?Jc.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=$c.immediateProvider.setImmediate(e.flush.bind(e,void 0))))},el.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)?0<r:0<this.delay)return Jc.prototype.recycleAsyncId.call(this,e,t,r);var r=e.actions;null!=t&&(null==(r=r[r.length-1])?void 0:r.id)!==t&&($c.immediateProvider.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))},el);function el(e,t){var r=Jc.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}b.AsapAction=t;rc={},h={},Hn={},Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.Scheduler=void 0,T=o;function tl(e,t){void 0===t&&(t=tl.now),this.schedulerActionCtor=e,this.now=t}tl.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},tl.now=T.dateTimestampProvider.now,Hn.Scheduler=tl;var rl,nl,n=r&&r.__extends||(rl=function(e,t){return(rl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}rl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ol=(Object.defineProperty(h,"__esModule",{value:!0}),h.AsyncScheduler=void 0,Hn),t=(nl=ol.Scheduler,n(il,nl),il.prototype.flush=function(e){var t,r=this.actions;if(this._active)r.push(e);else{this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}}},il);function il(e,t){void 0===t&&(t=ol.Scheduler.now);e=nl.call(this,e,t)||this;return e.actions=[],e._active=!1,e}h.AsyncScheduler=t;var ul,T=r&&r.__extends||(ul=function(e,t){return(ul=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ul(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(rc,"__esModule",{value:!0}),rc.AsapScheduler=void 0;al=h.AsyncScheduler,T(sl,al),sl.prototype.flush=function(e){this._active=!0;var t,r=this._scheduled,n=(this._scheduled=void 0,this.actions);e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===r&&n.shift());if(this._active=!1,t){for(;(e=n[0])&&e.id===r&&n.shift();)e.unsubscribe();throw t}};var al,n=sl;function sl(){return null!==al&&al.apply(this,arguments)||this}rc.AsapScheduler=n,t=g,Object.defineProperty(t,"__esModule",{value:!0}),t.asap=t.asapScheduler=void 0,t.asapScheduler=new rc.AsapScheduler(b.AsapAction),t.asap=t.asapScheduler;var cl,T={},rc=(n=T,Object.defineProperty(n,"__esModule",{value:!0}),n.async=n.asyncScheduler=void 0,n.asyncScheduler=new h.AsyncScheduler(dt.AsyncAction),n.async=n.asyncScheduler,{}),b={},t=r&&r.__extends||(cl=function(e,t){return(cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}cl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(b,"__esModule",{value:!0}),b.QueueAction=void 0;ll=dt.AsyncAction,t(fl,ll),fl.prototype.schedule=function(e,t){return 0<(t=void 0===t?0:t)?ll.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},fl.prototype.execute=function(e,t){return 0<t||this.closed?ll.prototype.execute.call(this,e,t):this._execute(e,t)},fl.prototype.requestAsyncId=function(e,t,r){return null!=(r=void 0===r?0:r)&&0<r||null==r&&0<this.delay?ll.prototype.requestAsyncId.call(this,e,t,r):(e.flush(this),0)};var ll,n=fl;function fl(e,t){var r=ll.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}b.QueueAction=n;var pl,t={},n=r&&r.__extends||(pl=function(e,t){return(pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}pl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.QueueScheduler=void 0;dl=h.AsyncScheduler,n(hl,dl);var dl,n=hl;function hl(){return null!==dl&&dl.apply(this,arguments)||this}t.QueueScheduler=n,n=rc,Object.defineProperty(n,"__esModule",{value:!0}),n.queue=n.queueScheduler=void 0,n.queueScheduler=new t.QueueScheduler(b.QueueAction),n.queue=n.queueScheduler;var bl,t={},b={},n=r&&r.__extends||(bl=function(e,t){return(bl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}bl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(b,"__esModule",{value:!0}),b.AnimationFrameAction=void 0;var yl,_l=c,c=(yl=dt.AsyncAction,n(vl,yl),vl.prototype.requestAsyncId=function(e,t,r){return null!==(r=void 0===r?0:r)&&0<r?yl.prototype.requestAsyncId.call(this,e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=_l.animationFrameProvider.requestAnimationFrame(function(){return e.flush(void 0)})))},vl.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)?0<r:0<this.delay)return yl.prototype.recycleAsyncId.call(this,e,t,r);var r=e.actions;null!=t&&t===e._scheduled&&(null==(r=r[r.length-1])?void 0:r.id)!==t&&(_l.animationFrameProvider.cancelAnimationFrame(t),e._scheduled=void 0)},vl);function vl(e,t){var r=yl.call(this,e,t)||this;return r.scheduler=e,r.work=t,r}b.AnimationFrameAction=c;var ml,n={},c=r&&r.__extends||(ml=function(e,t){return(ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ml(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(n,"__esModule",{value:!0}),n.AnimationFrameScheduler=void 0;gl=h.AsyncScheduler,c(Ol,gl),Ol.prototype.flush=function(e){this._active=!0,e?t=e.id:(t=this._scheduled,this._scheduled=void 0);var t,r,n=this.actions;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}};var gl,c=Ol;function Ol(){return null!==gl&&gl.apply(this,arguments)||this}n.AnimationFrameScheduler=c,c=t,Object.defineProperty(c,"__esModule",{value:!0}),c.animationFrame=c.animationFrameScheduler=void 0,c.animationFrameScheduler=new n.AnimationFrameScheduler(b.AnimationFrameAction),c.animationFrame=c.animationFrameScheduler;var wl,El,n={},b=r&&r.__extends||(wl=function(e,t){return(wl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}wl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=(Object.defineProperty(n,"__esModule",{value:!0}),n.VirtualAction=n.VirtualTimeScheduler=void 0,dt),Pl=P,dt=(El=h.AsyncScheduler,b(Tl,El),Tl.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},Tl.frameTimeFactor=10,Tl);function Tl(e,t){void 0===t&&(t=1/0);var r=El.call(this,e=void 0===e?jl:e,function(){return r.frame})||this;return r.maxFrames=t,r.frame=0,r.index=-1,r}n.VirtualTimeScheduler=dt;Sl=c.AsyncAction,b(Cl,Sl),Cl.prototype.schedule=function(e,t){if(void 0===t&&(t=0),Number.isFinite(t)){if(!this.id)return Sl.prototype.schedule.call(this,e,t);this.active=!1;var r=new Cl(this.scheduler,this.work);return this.add(r),r.schedule(e,t)}return Pl.Subscription.EMPTY},Cl.prototype.requestAsyncId=function(e,t,r){this.delay=e.frame+(r=void 0===r?0:r);r=e.actions;return r.push(this),r.sort(Cl.sortActions),1},Cl.prototype.recycleAsyncId=function(e,t,r){},Cl.prototype._execute=function(e,t){if(!0===this.active)return Sl.prototype._execute.call(this,e,t)},Cl.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1};var Sl,jl=Cl;function Cl(e,t,r){void 0===r&&(r=e.index+=1);var n=Sl.call(this,e,t)||this;return n.scheduler=e,n.work=t,n.index=r,n.active=!0,n.index=e.index=r,n}n.VirtualAction=jl;var Il,Rl,h={},dt={},c=(Il=dt,Object.defineProperty(Il,"__esModule",{value:!0}),Il.empty=Il.EMPTY=void 0,Rl=E,Il.EMPTY=new Rl.Observable(function(e){return e.complete()}),Il.empty=function(e){return e?(t=e,new Rl.Observable(function(e){return t.schedule(function(){return e.complete()})})):Il.EMPTY;var t},{}),b={},Al={},kl=(Object.defineProperty(Al,"__esModule",{value:!0}),Al.isScheduler=void 0,y);Al.isScheduler=function(e){return e&&kl.isFunction(e.schedule)},Object.defineProperty(b,"__esModule",{value:!0}),b.popNumber=b.popScheduler=b.popResultSelector=void 0;var Ml=y,Nl=Al;function xl(e){return e[e.length-1]}b.popResultSelector=function(e){return Ml.isFunction(xl(e))?e.pop():void 0},b.popScheduler=function(e){return Nl.isScheduler(xl(e))?e.pop():void 0},b.popNumber=function(e,t){return"number"==typeof xl(e)?e.pop():t};var Dl={},Ll={},Ul={},I={},Fl={},Bl=(Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.isArrayLike=void 0,Fl.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},{}),Vl=(Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.isPromise=void 0,y);Bl.isPromise=function(e){return Vl.isFunction(null==e?void 0:e.then)};var ql={},Wl=(Object.defineProperty(ql,"__esModule",{value:!0}),ql.isInteropObservable=void 0,i),zl=y;ql.isInteropObservable=function(e){return zl.isFunction(e[Wl.observable])};var Hl={},Gl=(Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.isAsyncIterable=void 0,y);Hl.isAsyncIterable=function(e){return Symbol.asyncIterator&&Gl.isFunction(null==e?void 0:e[Symbol.asyncIterator])};var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.createInvalidObservableTypeError=void 0,Yl.createInvalidObservableTypeError=function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")};var Kl={},Zl={};function Ql(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.iterator=Zl.getSymbolIterator=void 0,Zl.getSymbolIterator=Ql,Zl.iterator=Ql(),Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.isIterable=void 0;var Xl=Zl,Jl=y;Kl.isIterable=function(e){return Jl.isFunction(null==e?void 0:e[Xl.iterator])};var $l={},ef=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},tf=r&&r.__await||function(e){return this instanceof tf?(this.v=e,this):new tf(e)},rf=r&&r.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(e,t||[]),i=[],u={};return n("next"),n("throw"),n("return"),u[Symbol.asyncIterator]=function(){return this},u;function n(n){o[n]&&(u[n]=function(r){return new Promise(function(e,t){1<i.push([n,r,e,t])||a(n,r)})})}function a(e,t){try{(r=o[e](t)).value instanceof tf?Promise.resolve(r.value.v).then(s,c):l(i[0][2],r)}catch(e){l(i[0][3],e)}var r}function s(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}},nf=(Object.defineProperty($l,"__esModule",{value:!0}),$l.isReadableStreamLike=$l.readableStreamLikeToAsyncGenerator=void 0,y);$l.readableStreamLikeToAsyncGenerator=function(o){return rf(this,arguments,function(){var t,r,n;return ef(this,function(e){switch(e.label){case 0:t=o.getReader(),e.label=1;case 1:e.trys.push([1,,9,10]),e.label=2;case 2:return[4,tf(t.read())];case 3:return(r=e.sent(),n=r.value,r.done)?[4,tf(void 0)]:[3,5];case 4:return[2,e.sent()];case 5:return[4,tf(n)];case 6:return[4,e.sent()];case 7:return e.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})},$l.isReadableStreamLike=function(e){return nf.isFunction(null==e?void 0:e.getReader)};var of=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},uf=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},af=r&&r.__asyncValues||function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=u[Symbol.asyncIterator];return t?t.call(u):(u="function"==typeof sf?sf(u):u[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=u[i]&&function(o){return new Promise(function(e,t){var r,n;o=u[i](o),r=e,e=t,n=o.done,t=o.value,Promise.resolve(t).then(function(e){r({value:e,done:n})},e)})}}},sf=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cf=(Object.defineProperty(I,"__esModule",{value:!0}),I.fromReadableStreamLike=I.fromAsyncIterable=I.fromIterable=I.fromPromise=I.fromArrayLike=I.fromInteropObservable=I.innerFrom=void 0,Fl),lf=Bl,ff=E,pf=ql,df=Hl,hf=Yl,bf=Kl,yf=$l,_f=y,vf=v,mf=i;function gf(r){return new ff.Observable(function(e){var t=r[mf.observable]();if(_f.isFunction(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Of(r){return new ff.Observable(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function wf(e){return new ff.Observable(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,vf.reportUnhandledError)})}function Ef(u){return new ff.Observable(function(e){var t,r;try{for(var n=sf(u),o=n.next();!o.done;o=n.next()){var i=o.value;if(e.next(i),e.closed)return}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}e.complete()})}function Pf(e){return new ff.Observable(function(t){!function(r,n){var o,i,u,a;return of(this,void 0,void 0,function(){var t;return uf(this,function(e){switch(e.label){case 0:e.trys.push([0,5,6,11]),o=af(r),e.label=1;case 1:return[4,o.next()];case 2:if((i=e.sent()).done)return[3,4];if(t=i.value,n.next(t),n.closed)return[2];e.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return t=e.sent(),u={error:t},[3,11];case 6:return(e.trys.push([6,,9,10]),i&&!i.done&&(a=o.return))?[4,a.call(o)]:[3,8];case 7:e.sent(),e.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})}(e,t).catch(function(e){return t.error(e)})})}function Tf(e){return Pf(yf.readableStreamLikeToAsyncGenerator(e))}I.innerFrom=function(e){if(e instanceof ff.Observable)return e;if(null!=e){if(pf.isInteropObservable(e))return gf(e);if(cf.isArrayLike(e))return Of(e);if(lf.isPromise(e))return wf(e);if(df.isAsyncIterable(e))return Pf(e);if(bf.isIterable(e))return Ef(e);if(yf.isReadableStreamLike(e))return Tf(e)}throw hf.createInvalidObservableTypeError(e)},I.fromInteropObservable=gf,I.fromArrayLike=Of,I.fromPromise=wf,I.fromIterable=Ef,I.fromAsyncIterable=Pf,I.fromReadableStreamLike=Tf;var v={},Sf={};Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.executeSchedule=void 0,Sf.executeSchedule=function(e,t,r,n,o){if(void 0===n&&(n=0),void 0===o&&(o=!1),t=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n),e.add(t),!o)return t},Object.defineProperty(v,"__esModule",{value:!0}),v.observeOn=void 0;var jf=Sf,Cf=S,If=p;v.observeOn=function(r,n){return void 0===n&&(n=0),Cf.operate(function(e,t){e.subscribe(If.createOperatorSubscriber(t,function(e){return jf.executeSchedule(t,r,function(){return t.next(e)},n)},function(){return jf.executeSchedule(t,r,function(){return t.complete()},n)},function(e){return jf.executeSchedule(t,r,function(){return t.error(e)},n)}))})};var Rf={},Af=(Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.subscribeOn=void 0,S);Rf.subscribeOn=function(r,n){return void 0===n&&(n=0),Af.operate(function(e,t){t.add(r.schedule(function(){return e.subscribe(t)},n))})},Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.scheduleObservable=void 0;var kf=I,Mf=v,Nf=Rf;Ul.scheduleObservable=function(e,t){return kf.innerFrom(e).pipe(Nf.subscribeOn(t),Mf.observeOn(t))};var xf={},Df=(Object.defineProperty(xf,"__esModule",{value:!0}),xf.schedulePromise=void 0,I),Lf=v,Uf=Rf;xf.schedulePromise=function(e,t){return Df.innerFrom(e).pipe(Uf.subscribeOn(t),Lf.observeOn(t))};var Ff={},Bf=(Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.scheduleArray=void 0,E);Ff.scheduleArray=function(r,n){return new Bf.Observable(function(e){var t=0;return n.schedule(function(){t===r.length?e.complete():(e.next(r[t++]),e.closed||this.schedule())})})};var Vf={},qf=(Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.scheduleIterable=void 0,E),Wf=Zl,zf=y,Hf=Sf;Vf.scheduleIterable=function(e,t){return new qf.Observable(function(n){var o;return Hf.executeSchedule(n,t,function(){o=e[Wf.iterator](),Hf.executeSchedule(n,t,function(){var e,t,r;try{t=(e=o.next()).value,r=e.done}catch(e){return void n.error(e)}r?n.complete():n.next(t)},0,!0)}),function(){return zf.isFunction(null==o?void 0:o.return)&&o.return()}})};var Zl={},Gf=(Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.scheduleAsyncIterable=void 0,E),Yf=Sf;Zl.scheduleAsyncIterable=function(r,n){if(r)return new Gf.Observable(function(t){Yf.executeSchedule(t,n,function(){var e=r[Symbol.asyncIterator]();Yf.executeSchedule(t,n,function(){e.next().then(function(e){e.done?t.complete():t.next(e.value)})},0,!0)})});throw new Error("Iterable cannot be null")};var Kf={},Zf=(Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.scheduleReadableStreamLike=void 0,Zl),Qf=$l;Kf.scheduleReadableStreamLike=function(e,t){return Zf.scheduleAsyncIterable(Qf.readableStreamLikeToAsyncGenerator(e),t)},Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.scheduled=void 0;var Xf=Ul,Jf=xf,$f=Ff,ep=Vf,tp=Zl,rp=ql,np=Bl,op=Fl,ip=Kl,up=Hl,ap=Yl,sp=$l,cp=Kf;Ll.scheduled=function(e,t){if(null!=e){if(rp.isInteropObservable(e))return Xf.scheduleObservable(e,t);if(op.isArrayLike(e))return $f.scheduleArray(e,t);if(np.isPromise(e))return Jf.schedulePromise(e,t);if(up.isAsyncIterable(e))return tp.scheduleAsyncIterable(e,t);if(ip.isIterable(e))return ep.scheduleIterable(e,t);if(sp.isReadableStreamLike(e))return cp.scheduleReadableStreamLike(e,t)}throw ap.createInvalidObservableTypeError(e)},Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.from=void 0;var lp=Ll,fp=I;Dl.from=function(e,t){return t?lp.scheduled(e,t):fp.innerFrom(e)},Object.defineProperty(c,"__esModule",{value:!0}),c.of=void 0;var pp=b,dp=Dl;c.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=pp.popScheduler(e);return dp.from(e,r)};var hp,bp,yp,_p,Ul={},vp=(Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.throwError=void 0,E),mp=y;function gp(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}function Op(e,t){var r,n=e.kind,o=e.value,e=e.error;if("string"!=typeof n)throw new TypeError('Invalid notification, missing "kind"');"N"===n?null!=(r=t.next)&&r.call(t,o):"E"===n?null!=(r=t.error)&&r.call(t,e):null!=(o=t.complete)&&o.call(t)}Ul.throwError=function(e,t){function r(e){return e.error(n())}var n=mp.isFunction(e)?e:function(){return e};return new vp.Observable(t?function(e){return t.schedule(r,0,e)}:r)},xf=h,Object.defineProperty(xf,"__esModule",{value:!0}),xf.observeNotification=xf.Notification=xf.NotificationKind=void 0,hp=dt,bp=c,yp=Ul,_p=y,(Ff=xf.NotificationKind||(xf.NotificationKind={})).NEXT="N",Ff.ERROR="E",Ff.COMPLETE="C",gp.prototype.observe=function(e){return Op(this,e)},gp.prototype.do=function(e,t,r){var n=this.kind,o=this.value,i=this.error;return"N"===n?null==e?void 0:e(o):"E"===n?null==t?void 0:t(i):null==r?void 0:r()},gp.prototype.accept=function(e,t,r){var n;return _p.isFunction(null==(n=e)?void 0:n.next)?this.observe(e):this.do(e,t,r)},gp.prototype.toObservable=function(){var e=this.kind,t=this.value,r=this.error,t="N"===e?bp.of(t):"E"===e?yp.throwError(function(){return r}):"C"===e?hp.EMPTY:0;if(t)return t;throw new TypeError("Unexpected notification kind "+e)},gp.createNext=function(e){return new gp("N",e)},gp.createError=function(e){return new gp("E",void 0,e)},gp.createComplete=function(){return gp.completeNotification},gp.completeNotification=new gp("C"),Ff=gp,xf.Notification=Ff,xf.observeNotification=Op;var Zl={},wp=(Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.isObservable=void 0,E),Ep=y;Zl.isObservable=function(e){return!!e&&(e instanceof wp.Observable||Ep.isFunction(e.lift)&&Ep.isFunction(e.subscribe))};var ql={},Bl={},Kl=(Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.EmptyError=void 0,F),Pp=(Bl.EmptyError=Kl.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}),Object.defineProperty(ql,"__esModule",{value:!0}),ql.lastValueFrom=void 0,Bl);ql.lastValueFrom=function(o,i){var u="object"==typeof i;return new Promise(function(e,t){var r,n=!1;o.subscribe({next:function(e){r=e,n=!0},error:t,complete:function(){n?e(r):u?e(i.defaultValue):t(new Pp.EmptyError)}})})};var Hl={},Tp=(Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.firstValueFrom=void 0,Bl),Sp=Gt;Hl.firstValueFrom=function(n,o){var i="object"==typeof o;return new Promise(function(t,e){var r=new Sp.SafeSubscriber({next:function(e){t(e),r.unsubscribe()},error:e,complete:function(){i?t(o.defaultValue):e(new Tp.EmptyError)}});n.subscribe(r)})};var jp,Cp,Ip,Rp,Ap,kp,Mp,Yl={},$l=(Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.ArgumentOutOfRangeError=void 0,F),Kf=(Yl.ArgumentOutOfRangeError=$l.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),{}),Ff=(Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.NotFoundError=void 0,F),xf=(Kf.NotFoundError=Ff.createErrorClass(function(t){return function(e){t(this),this.name="NotFoundError",this.message=e}}),{}),Kl=(Object.defineProperty(xf,"__esModule",{value:!0}),xf.SequenceError=void 0,F),$l=(xf.SequenceError=Kl.createErrorClass(function(t){return function(e){t(this),this.name="SequenceError",this.message=e}}),{}),Ff={};function Np(e){throw new jp.TimeoutError(e)}Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.isValidDate=void 0,Ff.isValidDate=function(e){return e instanceof Date&&!isNaN(e)},jp=$l,Object.defineProperty(jp,"__esModule",{value:!0}),jp.timeout=jp.TimeoutError=void 0,Cp=T,Ip=Ff,Rp=S,Ap=I,kp=p,Mp=Sf,jp.TimeoutError=F.createErrorClass(function(t){return function(e){void 0===e&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}}),jp.timeout=function(e,t){var a=(e=Ip.isValidDate(e)?{first:e}:"number"==typeof e?{each:e}:e).first,s=e.each,r=e.with,c=void 0===r?Np:r,l=void 0===(r=e.scheduler)?null!=t?t:Cp.asyncScheduler:r,f=void 0===(t=e.meta)?null:t;if(null==a&&null==s)throw new TypeError("No timeout provided.");return Rp.operate(function(e,t){function r(e){n=Mp.executeSchedule(t,l,function(){try{u.unsubscribe(),Ap.innerFrom(c({meta:f,lastValue:o,seen:i})).subscribe(t)}catch(e){t.error(e)}},e)}var n,o=null,i=0,u=e.subscribe(kp.createOperatorSubscriber(t,function(e){null!=n&&n.unsubscribe(),i++,t.next(o=e),0<s&&r(s)},void 0,void 0,function(){null!=n&&n.closed||null!=n&&n.unsubscribe(),o=null}));i||r(null!=a?"number"==typeof a?a:+a-l.now():s)})};var Kl={},F={},xp={},Dp={},Lp=(Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.map=void 0,S),Up=p;Dp.map=function(n,o){return Lp.operate(function(e,t){var r=0;e.subscribe(Up.createOperatorSubscriber(t,function(e){t.next(n.call(o,e,r++))}))})};var Fp=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Bp=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Vp=(Object.defineProperty(xp,"__esModule",{value:!0}),xp.mapOneOrManyArgs=void 0,Dp),qp=Array.isArray;xp.mapOneOrManyArgs=function(r){return Vp.map(function(e){return t=r,qp(e=e)?t.apply(void 0,Bp([],Fp(e))):t(e);var t})};var Wp=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},zp=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Hp=(Object.defineProperty(F,"__esModule",{value:!0}),F.bindCallbackInternals=void 0,Al),Gp=E,Yp=Rf,Kp=xp,Zp=v,Qp=G;F.bindCallbackInternals=function r(a,s,n,o){if(n){if(!Hp.isScheduler(n))return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(a,s,o).apply(this,e).pipe(Kp.mapOneOrManyArgs(n))};o=n}return o?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(a,s).apply(this,e).pipe(Yp.subscribeOn(o),Zp.observeOn(o))}:function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var i=new Qp.AsyncSubject,u=!0;return new Gp.Observable(function(e){var n,o,e=i.subscribe(e);return u&&(n=u=!1,o=!1,s.apply(t,zp(zp([],Wp(r)),[function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(a){var r=e.shift();if(null!=r)return void i.error(r)}i.next(1<e.length?e:e[0]),o=!0,n&&i.complete()}])),o&&i.complete(),n=!0),e})}},Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.bindCallback=void 0;var Xp=F;Kl.bindCallback=function(e,t,r){return Xp.bindCallbackInternals(!1,e,t,r)};var Jp={},$p=(Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.bindNodeCallback=void 0,F);Jp.bindNodeCallback=function(e,t,r){return $p.bindCallbackInternals(!0,e,t,r)};var F={},ed={},td=(Object.defineProperty(ed,"__esModule",{value:!0}),ed.argsArgArrayOrObject=void 0,Array.isArray),rd=Object.getPrototypeOf,nd=Object.prototype,od=Object.keys;ed.argsArgArrayOrObject=function(e){if(1===e.length){var t=e[0];if(td(t))return{args:t,keys:null};if((r=t)&&"object"==typeof r&&rd(r)===nd)return{args:(r=od(t)).map(function(e){return t[e]}),keys:r}}var r;return{args:e,keys:null}};var id={};Object.defineProperty(id,"__esModule",{value:!0}),id.createObject=void 0,id.createObject=function(e,n){return e.reduce(function(e,t,r){return e[t]=n[r],e},{})},Object.defineProperty(F,"__esModule",{value:!0}),F.combineLatestInit=F.combineLatest=void 0;var ud=E,ad=ed,sd=Dl,cd=jt,ld=xp,fd=b,pd=id,dd=p,hd=Sf;function bd(a,s,c){return void 0===c&&(c=cd.identity),function(u){yd(s,function(){for(var e=a.length,n=new Array(e),o=e,i=e,t=0;t<e;t++)!function(r){yd(s,function(){var e=sd.from(a[r],s),t=!1;e.subscribe(dd.createOperatorSubscriber(u,function(e){n[r]=e,t||(t=!0,i--),i||u.next(c(n.slice()))},function(){--o||u.complete()}))},u)}(t)},u)}}function yd(e,t,r){e?hd.executeSchedule(r,e,t):t()}F.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=fd.popScheduler(e),n=fd.popResultSelector(e),o=ad.argsArgArrayOrObject(e),i=o.args,u=o.keys;return 0===i.length?sd.from([],r):(o=new ud.Observable(bd(i,r,u?function(e){return pd.createObject(u,e)}:cd.identity)),n?o.pipe(ld.mapOneOrManyArgs(n)):o)},F.combineLatestInit=bd;var _d={},vd={},md={},gd={},Od={},wd=(Object.defineProperty(Od,"__esModule",{value:!0}),Od.mergeInternals=void 0,I),Ed=Sf,Pd=p;Od.mergeInternals=function(e,r,n,o,i,u,a,t){var s=[],c=0,l=0,f=function(){s.length||c||r.complete()},p=function(e){return c<o?d(e):s.push(e)},d=function(e){u&&r.next(e),c++;var t=!1;wd.innerFrom(n(e,l++)).subscribe(Pd.createOperatorSubscriber(r,function(e){null!=i&&i(e),u?p(e):r.next(e)},function(){t=!0},void 0,function(){if(t)try{c--;for(;s.length&&c<o;)!function(){var e=s.shift();a?Ed.executeSchedule(r,a,function(){return d(e)}):d(e)}();f()}catch(e){r.error(e)}}))};return e.subscribe(Pd.createOperatorSubscriber(r,p,function(){f()})),function(){null!=t&&t()}},Object.defineProperty(gd,"__esModule",{value:!0}),gd.mergeMap=void 0;var Td=Dp,Sd=I,jd=S,Cd=Od,Id=y;gd.mergeMap=function e(o,i,r){return void 0===r&&(r=1/0),Id.isFunction(i)?e(function(r,n){return Td.map(function(e,t){return i(r,e,n,t)})(Sd.innerFrom(o(r,n)))},r):("number"==typeof i&&(r=i),jd.operate(function(e,t){return Cd.mergeInternals(e,t,o,r)}))},Object.defineProperty(md,"__esModule",{value:!0}),md.mergeAll=void 0;var Rd=gd,Ad=jt;md.mergeAll=function(e){return Rd.mergeMap(Ad.identity,e=void 0===e?1/0:e)},Object.defineProperty(vd,"__esModule",{value:!0}),vd.concatAll=void 0;var kd=md;vd.concatAll=function(){return kd.mergeAll(1)},Object.defineProperty(_d,"__esModule",{value:!0}),_d.concat=void 0;var Md=vd,Nd=b,xd=Dl;_d.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Md.concatAll()(xd.from(e,Nd.popScheduler(e)))};var Dd={},Ld={},Ud=(Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.defer=void 0,E),Fd=I;Ld.defer=function(t){return new Ud.Observable(function(e){Fd.innerFrom(t()).subscribe(e)})},Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.connectable=void 0;var Bd=C,Vd=E,qd=Ld,Wd={connector:function(){return new Bd.Subject},resetOnDisconnect:!0};Dd.connectable=function(e,t){var r=null,n=(t=void 0===t?Wd:t).connector,o=void 0===(t=t.resetOnDisconnect)||t,i=n();return(t=new Vd.Observable(function(e){return i.subscribe(e)})).connect=function(){return r&&!r.closed||(r=qd.defer(function(){return e}).subscribe(i),o&&r.add(function(){return i=n()})),r},t};var zd={},Hd=(Object.defineProperty(zd,"__esModule",{value:!0}),zd.forkJoin=void 0,E),Gd=ed,Yd=I,Kd=b,Zd=p,Qd=xp,Xd=id;zd.forkJoin=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Kd.popResultSelector(e),u=(n=Gd.argsArgArrayOrObject(e)).args,a=n.keys,n=new Hd.Observable(function(e){var t=u.length;if(t)for(var n=new Array(t),o=t,i=t,r=0;r<t;r++)!function(t){var r=!1;Yd.innerFrom(u[t]).subscribe(Zd.createOperatorSubscriber(e,function(e){r||(r=!0,i--),n[t]=e},function(){return o--},void 0,function(){o&&r||(i||e.next(a?Xd.createObject(a,n):n),e.complete())}))}(r);else e.complete()});return r?n.pipe(Qd.mapOneOrManyArgs(r)):n};var ed={},Jd=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},$d=(Object.defineProperty(ed,"__esModule",{value:!0}),ed.fromEvent=void 0,I),eh=E,th=gd,rh=Fl,nh=y,oh=xp,ih=["addListener","removeListener"],uh=["addEventListener","removeEventListener"],ah=["on","off"];function sh(r,n){return function(t){return function(e){return r[t](n,e)}}}ed.fromEvent=function t(r,n,o,e){if(nh.isFunction(o)&&(e=o,o=void 0),e)return t(r,n,o).pipe(oh.mapOneOrManyArgs(e));var e=Jd((e=r,nh.isFunction(e.addEventListener)&&nh.isFunction(e.removeEventListener)?uh.map(function(t){return function(e){return r[t](n,e,o)}}):(e=r,nh.isFunction(e.addListener)&&nh.isFunction(e.removeListener)?ih.map(sh(r,n)):(e=r,nh.isFunction(e.on)&&nh.isFunction(e.off)?ah.map(sh(r,n)):[]))),2),i=e[0],u=e[1];if(!i&&rh.isArrayLike(r))return th.mergeMap(function(e){return t(e,n,o)})($d.innerFrom(r));if(i)return new eh.Observable(function(r){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1<e.length?e:e[0])}return i(e),function(){return u(e)}});throw new TypeError("Invalid event target")};var id={},ch=(Object.defineProperty(id,"__esModule",{value:!0}),id.fromEventPattern=void 0,E),lh=y,fh=xp;id.fromEventPattern=function e(n,o,t){return t?e(n,o).pipe(fh.mapOneOrManyArgs(t)):new ch.Observable(function(r){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)}var t=n(e);return lh.isFunction(o)?function(){return o(e,t)}:void 0})};var Fl={},ph=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},dh=(Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.generate=void 0,jt),hh=Al,bh=Ld,yh=Vf;Fl.generate=function(e,r,n,t,o){var i,u,a;function s(){var t;return ph(this,function(e){switch(e.label){case 0:t=a,e.label=1;case 1:return r&&!r(t)?[3,4]:[4,u(t)];case 2:e.sent(),e.label=3;case 3:return t=n(t),[3,1];case 4:return[2]}})}return 1===arguments.length?(a=e.initialState,r=e.condition,n=e.iterate,i=e.resultSelector,u=void 0===i?dh.identity:i,o=e.scheduler):(a=e,!t||hh.isScheduler(t)?(u=dh.identity,o=t):u=t),bh.defer(o?function(){return yh.scheduleIterable(s(),o)}:s)};var Vf={},_h=(Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.iif=void 0,Ld);Vf.iif=function(e,t,r){return _h.defer(function(){return e()?t:r})};var vh={},mh={},gh=(Object.defineProperty(mh,"__esModule",{value:!0}),mh.timer=void 0,E),Oh=T,wh=Al,Eh=Ff;mh.timer=function(n,e,o){void 0===n&&(n=0),void 0===o&&(o=Oh.async);var i=-1;return null!=e&&(wh.isScheduler(e)?o=e:i=e),new gh.Observable(function(e){var t=Eh.isValidDate(n)?+n-o.now():n,r=0;return o.schedule(function(){e.closed||(e.next(r++),0<=i?this.schedule(void 0,i):e.complete())},t=t<0?0:t)})},Object.defineProperty(vh,"__esModule",{value:!0}),vh.interval=void 0;var Ph=T,Th=mh;vh.interval=function(e,t){return Th.timer(e=(e=void 0===e?0:e)<0?0:e,e,t=void 0===t?Ph.asyncScheduler:t)};var Al={},Sh=(Object.defineProperty(Al,"__esModule",{value:!0}),Al.merge=void 0,md),jh=I,Ch=dt,Ih=b,Rh=Dl;Al.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ih.popScheduler(e),n=Ih.popNumber(e,1/0),o=e;return o.length?1===o.length?jh.innerFrom(o[0]):Sh.mergeAll(n)(Rh.from(o,r)):Ch.EMPTY};var Ah,kh={},Mh=(Ah=kh,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.never=Ah.NEVER=void 0,Ah.NEVER=new E.Observable(l.noop),Ah.never=function(){return Ah.NEVER},{}),Nh={},xh=(Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.argsOrArgArray=void 0,Array.isArray);Nh.argsOrArgArray=function(e){return 1===e.length&&xh(e[0])?e[0]:e},Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.onErrorResumeNext=void 0;var Dh=E,Lh=Nh,Uh=p,Fh=l,Bh=I;Mh.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Lh.argsOrArgArray(e);return new Dh.Observable(function(r){var n=0,o=function(){if(n<i.length){var e=void 0;try{e=Bh.innerFrom(i[n++])}catch(e){return void o()}var t=new Uh.OperatorSubscriber(r,void 0,Fh.noop,Fh.noop);e.subscribe(t),t.add(o)}else r.complete()};o()})};var Vh={},qh=(Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.pairs=void 0,Dl);Vh.pairs=function(e,t){return qh.from(Object.entries(e),t)};var Wh={},zh={};Object.defineProperty(zh,"__esModule",{value:!0}),zh.not=void 0,zh.not=function(r,n){return function(e,t){return!r.call(n,e,t)}};var Hh={},Gh=(Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.filter=void 0,S),Yh=p;Hh.filter=function(n,o){return Gh.operate(function(e,t){var r=0;e.subscribe(Yh.createOperatorSubscriber(t,function(e){return n.call(o,e,r++)&&t.next(e)}))})},Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.partition=void 0;var Kh=zh,Zh=Hh,Qh=I;Wh.partition=function(e,t,r){return[Zh.filter(t,r)(Qh.innerFrom(e)),Zh.filter(Kh.not(t,r))(Qh.innerFrom(e))]};var Xh={},Jh=(Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.raceInit=Xh.race=void 0,E),$h=I,eb=Nh,tb=p;function rb(t){return function(n){for(var o=[],e=0;o&&!n.closed&&e<t.length;e++)!function(r){o.push($h.innerFrom(t[r]).subscribe(tb.createOperatorSubscriber(n,function(e){if(o){for(var t=0;t<o.length;t++)t!==r&&o[t].unsubscribe();o=null}n.next(e)})))}(e)}}Xh.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=eb.argsOrArgArray(e)).length?$h.innerFrom(e[0]):new Jh.Observable(rb(e))},Xh.raceInit=rb;var nb={},ob=(Object.defineProperty(nb,"__esModule",{value:!0}),nb.range=void 0,E),ib=dt;nb.range=function(r,e,n){if(null==e&&(e=r,r=0),e<=0)return ib.EMPTY;var o=e+r;return new ob.Observable(n?function(e){var t=r;return n.schedule(function(){t<o?(e.next(t++),this.schedule()):e.complete()})}:function(e){for(var t=r;t<o&&!e.closed;)e.next(t++);e.complete()})};var ub={},ab=(Object.defineProperty(ub,"__esModule",{value:!0}),ub.using=void 0,E),sb=I,cb=dt;ub.using=function(n,o){return new ab.Observable(function(e){var t=n(),r=o(t);return(r?sb.innerFrom(r):cb.EMPTY).subscribe(e),function(){t&&t.unsubscribe()}})};var lb={},fb=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},pb=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},db=(Object.defineProperty(lb,"__esModule",{value:!0}),lb.zip=void 0,E),hb=I,bb=Nh,yb=dt,_b=p,vb=b;lb.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=vb.popResultSelector(e),u=bb.argsOrArgArray(e);return u.length?new db.Observable(function(r){for(var n=u.map(function(){return[]}),o=u.map(function(){return!1}),e=(r.add(function(){n=o=null}),0);!r.closed&&e<u.length;e++)!function(t){hb.innerFrom(u[t]).subscribe(_b.createOperatorSubscriber(r,function(e){n[t].push(e),n.every(function(e){return e.length})&&(e=n.map(function(e){return e.shift()}),r.next(i?i.apply(void 0,pb([],fb(e))):e),n.some(function(e,t){return!e.length&&o[t]})&&r.complete())},function(){o[t]=!0,n[t].length||r.complete()}))}(e);return function(){n=o=null}}):yb.EMPTY};var mb={},gb=(Object.defineProperty(mb,"__esModule",{value:!0}),{}),Ob=(Object.defineProperty(gb,"__esModule",{value:!0}),gb.audit=void 0,S),wb=I,Eb=p;gb.audit=function(s){return Ob.operate(function(e,t){function r(){var e;null!=u&&u.unsubscribe(),u=null,o&&(o=!1,e=i,i=null,t.next(e)),a&&t.complete()}function n(){u=null,a&&t.complete()}var o=!1,i=null,u=null,a=!1;e.subscribe(Eb.createOperatorSubscriber(t,function(e){o=!0,i=e,u||wb.innerFrom(s(e)).subscribe(u=Eb.createOperatorSubscriber(t,r,n))},function(){a=!0,o&&u&&!u.closed||t.complete()}))})};var Pb={},Tb=(Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.auditTime=void 0,T),Sb=gb,jb=mh;Pb.auditTime=function(e,t){return void 0===t&&(t=Tb.asyncScheduler),Sb.audit(function(){return jb.timer(e,t)})};var Cb={},Ib=(Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.buffer=void 0,S),Rb=l,Ab=p,kb=I;Cb.buffer=function(n){return Ib.operate(function(e,t){var r=[];return e.subscribe(Ab.createOperatorSubscriber(t,function(e){return r.push(e)},function(){t.next(r),t.complete()})),kb.innerFrom(n).subscribe(Ab.createOperatorSubscriber(t,function(){var e=r;r=[],t.next(e)},Rb.noop)),function(){r=null}})};var Mb={},Nb=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xb=(Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.bufferCount=void 0,S),Db=p,Lb=O;Mb.bufferCount=function(h,b){return b=null!=(b=void 0===b?null:b)?b:h,xb.operate(function(e,f){var p=[],d=0;e.subscribe(Db.createOperatorSubscriber(f,function(e){var t,r,n,o,i=null;d++%b==0&&p.push([]);try{for(var u=Nb(p),a=u.next();!a.done;a=u.next())(l=a.value).push(e),h<=l.length&&(i=null!=i?i:[]).push(l)}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}if(i)try{for(var s=Nb(i),c=s.next();!c.done;c=s.next()){var l=c.value;Lb.arrRemove(p,l),f.next(l)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},function(){var t,e;try{for(var r=Nb(p),n=r.next();!n.done;n=r.next()){var o=n.value;f.next(o)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}f.complete()},void 0,function(){p=null}))})};var Ub={},Fb=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bb=(Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.bufferTime=void 0,P),Vb=S,qb=p,Wb=O,zb=T,Hb=b,Gb=Sf;Ub.bufferTime=function(i){for(var e,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var u=null!=(e=Hb.popScheduler(t))?e:zb.asyncScheduler,a=null!=(e=t[0])?e:null,l=t[1]||1/0;return Vb.operate(function(e,r){var s=[],n=!1,c=function(e){var t=e.buffer;e.subs.unsubscribe(),Wb.arrRemove(s,e),r.next(t),n&&o()},o=function(){var e,t;s&&(e=new Bb.Subscription,r.add(e),s.push(t={buffer:[],subs:e}),Gb.executeSchedule(e,u,function(){return c(t)},i))},t=(null!==a&&0<=a?Gb.executeSchedule(r,u,o,a,!0):n=!0,o(),qb.createOperatorSubscriber(r,function(e){var t,r,n=s.slice();try{for(var o=Fb(n),i=o.next();!i.done;i=o.next()){var u=i.value,a=u.buffer;a.push(e),l<=a.length&&c(u)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},function(){for(;null!=s&&s.length;)r.next(s.shift().buffer);null!=t&&t.unsubscribe(),r.complete(),r.unsubscribe()},void 0,function(){return s=null}));e.subscribe(t)})};var Yb={},Kb=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zb=(Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.bufferToggle=void 0,P),Qb=S,Xb=I,Jb=p,$b=l,ey=O;Yb.bufferToggle=function(t,o){return Qb.operate(function(e,n){var i=[];Xb.innerFrom(t).subscribe(Jb.createOperatorSubscriber(n,function(e){var t=[],r=(i.push(t),new Zb.Subscription);r.add(Xb.innerFrom(o(e)).subscribe(Jb.createOperatorSubscriber(n,function(){ey.arrRemove(i,t),n.next(t),r.unsubscribe()},$b.noop)))},$b.noop)),e.subscribe(Jb.createOperatorSubscriber(n,function(e){var t,r;try{for(var n=Kb(i),o=n.next();!o.done;o=n.next())o.value.push(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},function(){for(;0<i.length;)n.next(i.shift());n.complete()}))})};var ty={},ry=(Object.defineProperty(ty,"__esModule",{value:!0}),ty.bufferWhen=void 0,S),ny=l,oy=p,iy=I;ty.bufferWhen=function(i){return ry.operate(function(e,t){var r=null,n=null,o=function(){null!=n&&n.unsubscribe();var e=r;r=[],e&&t.next(e),iy.innerFrom(i()).subscribe(n=oy.createOperatorSubscriber(t,o,ny.noop))};o(),e.subscribe(oy.createOperatorSubscriber(t,function(e){return null==r?void 0:r.push(e)},function(){r&&t.next(r),t.complete()},void 0,function(){return r=n=null}))})};var uy={},ay=(Object.defineProperty(uy,"__esModule",{value:!0}),uy.catchError=void 0,I),sy=p,cy=S;uy.catchError=function u(a){return cy.operate(function(t,r){var n,o=null,i=!1,o=t.subscribe(sy.createOperatorSubscriber(r,void 0,void 0,function(e){n=ay.innerFrom(a(e,u(a)(t))),o?(o.unsubscribe(),o=null,n.subscribe(r)):i=!0}));i&&(o.unsubscribe(),o=null,n.subscribe(r))})};var ly={},fy={},R={},py={},dy={},hy={},by=(Object.defineProperty(hy,"__esModule",{value:!0}),hy.scanInternals=void 0,p);hy.scanInternals=function(u,t,a,s,c){return function(e,r){var n=a,o=t,i=0;e.subscribe(by.createOperatorSubscriber(r,function(e){var t=i++;o=n?u(o,e,t):(n=!0,e),s&&r.next(o)},c&&function(){n&&r.next(o),r.complete()}))}},Object.defineProperty(dy,"__esModule",{value:!0}),dy.reduce=void 0;var yy=hy,_y=S;dy.reduce=function(e,t){return _y.operate(yy.scanInternals(e,t,2<=arguments.length,!1,!0))},Object.defineProperty(py,"__esModule",{value:!0}),py.toArray=void 0;function vy(e,t){return e.push(t),e}var my=dy,gy=S;py.toArray=function(){return gy.operate(function(e,t){my.reduce(vy,[])(e).subscribe(t)})},Object.defineProperty(R,"__esModule",{value:!0}),R.joinAllInternals=void 0;var Oy=jt,wy=xp,Ey=u,Py=gd,Ty=py;R.joinAllInternals=function(t,e){return Ey.pipe(Ty.toArray(),Py.mergeMap(function(e){return t(e)}),e?wy.mapOneOrManyArgs(e):Oy.identity)},Object.defineProperty(fy,"__esModule",{value:!0}),fy.combineLatestAll=void 0;var Sy=F,jy=R;fy.combineLatestAll=function(e){return jy.joinAllInternals(Sy.combineLatest,e)},Object.defineProperty(ly,"__esModule",{value:!0}),ly.combineAll=void 0;ly.combineAll=fy.combineLatestAll;var Cy={},Iy={},Ry=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Ay=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},ky=(Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.combineLatest=void 0,F),My=S,Ny=Nh,xy=xp,Dy=u,Ly=b;function Uy(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Ly.popResultSelector(r);return t?Dy.pipe(Uy.apply(void 0,Ay([],Ry(r))),xy.mapOneOrManyArgs(t)):My.operate(function(e,t){ky.combineLatestInit(Ay([e],Ry(Ny.argsOrArgArray(r))))(t)})}Iy.combineLatest=Uy;var Fy=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},By=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Vy=(Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.combineLatestWith=void 0,Iy);Cy.combineLatestWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Vy.combineLatest.apply(void 0,By([],Fy(e)))};var xp={},qy=(Object.defineProperty(xp,"__esModule",{value:!0}),xp.concatMap=void 0,gd),Wy=y;xp.concatMap=function(e,t){return Wy.isFunction(t)?qy.mergeMap(e,t,1):qy.mergeMap(e,1)};var zy={},Hy=(Object.defineProperty(zy,"__esModule",{value:!0}),zy.concatMapTo=void 0,xp),Gy=y;zy.concatMapTo=function(e,t){return Gy.isFunction(t)?Hy.concatMap(function(){return e},t):Hy.concatMap(function(){return e})};var Yy={},Ky={},Zy=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Qy=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Xy=(Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.concat=void 0,S),Jy=vd,$y=b,e_=Dl;Ky.concat=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=$y.popScheduler(r);return Xy.operate(function(e,t){Jy.concatAll()(e_.from(Qy([e],Zy(r)),n)).subscribe(t)})};var t_=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},r_=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},n_=(Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.concatWith=void 0,Ky);Yy.concatWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n_.concat.apply(void 0,r_([],t_(e)))};var o_={},i_={},u_=(Object.defineProperty(i_,"__esModule",{value:!0}),i_.fromSubscribable=void 0,E);i_.fromSubscribable=function(t){return new u_.Observable(function(e){return t.subscribe(e)})},Object.defineProperty(o_,"__esModule",{value:!0}),o_.connect=void 0;var a_=C,s_=I,c_=S,l_=i_,f_={connector:function(){return new a_.Subject}};o_.connect=function(n,e){var o=(e=void 0===e?f_:e).connector;return c_.operate(function(e,t){var r=o();s_.innerFrom(n(l_.fromSubscribable(r))).subscribe(t),t.add(e.subscribe(r))})};var i_={},p_=(Object.defineProperty(i_,"__esModule",{value:!0}),i_.count=void 0,dy);i_.count=function(n){return p_.reduce(function(e,t,r){return!n||n(t,r)?e+1:e},0)};var d_={},h_=(Object.defineProperty(d_,"__esModule",{value:!0}),d_.debounce=void 0,S),b_=l,y_=p,__=I;d_.debounce=function(u){return h_.operate(function(e,t){function r(){var e;null!=i&&i.unsubscribe(),i=null,n&&(n=!1,e=o,o=null,t.next(e))}var n=!1,o=null,i=null;e.subscribe(y_.createOperatorSubscriber(t,function(e){null!=i&&i.unsubscribe(),n=!0,o=e,i=y_.createOperatorSubscriber(t,r,b_.noop),__.innerFrom(u(e)).subscribe(i)},function(){r(),t.complete()},void 0,function(){o=i=null}))})};var v_={},m_=(Object.defineProperty(v_,"__esModule",{value:!0}),v_.debounceTime=void 0,T),g_=S,O_=p;v_.debounceTime=function(a,s){return void 0===s&&(s=m_.asyncScheduler),g_.operate(function(e,r){var n=null,t=null,o=null,i=function(){var e;n&&(n.unsubscribe(),e=t,t=n=null,r.next(e))};function u(){var e=o+a,t=s.now();if(t<e)return n=this.schedule(void 0,e-t),void r.add(n);i()}e.subscribe(O_.createOperatorSubscriber(r,function(e){t=e,o=s.now(),n||(n=s.schedule(u,a),r.add(n))},function(){i(),r.complete()},void 0,function(){t=n=null}))})};var w_={},E_=(Object.defineProperty(w_,"__esModule",{value:!0}),w_.defaultIfEmpty=void 0,S),P_=p;w_.defaultIfEmpty=function(n){return E_.operate(function(e,t){var r=!1;e.subscribe(P_.createOperatorSubscriber(t,function(e){r=!0,t.next(e)},function(){r||t.next(n),t.complete()}))})};var A={},T_={},S_={},j_=(Object.defineProperty(S_,"__esModule",{value:!0}),S_.take=void 0,dt),C_=S,I_=p;S_.take=function(n){return n<=0?function(){return j_.EMPTY}:C_.operate(function(e,t){var r=0;e.subscribe(I_.createOperatorSubscriber(t,function(e){++r<=n&&(t.next(e),n<=r&&t.complete())}))})};var R_={},A_=(Object.defineProperty(R_,"__esModule",{value:!0}),R_.ignoreElements=void 0,S),k_=p,M_=l;R_.ignoreElements=function(){return A_.operate(function(e,t){e.subscribe(k_.createOperatorSubscriber(t,M_.noop))})};var N_={},x_=(Object.defineProperty(N_,"__esModule",{value:!0}),N_.mapTo=void 0,Dp);N_.mapTo=function(e){return x_.map(function(){return e})},Object.defineProperty(T_,"__esModule",{value:!0}),T_.delayWhen=void 0;var D_=_d,L_=S_,U_=R_,F_=N_,B_=gd,V_=I;T_.delayWhen=function t(r,n){return n?function(e){return D_.concat(n.pipe(L_.take(1),U_.ignoreElements()),e.pipe(t(r)))}:B_.mergeMap(function(e,t){return V_.innerFrom(r(e,t)).pipe(L_.take(1),F_.mapTo(e))})},Object.defineProperty(A,"__esModule",{value:!0}),A.delay=void 0;var q_=T,W_=T_,z_=mh;A.delay=function(e,t){var r=z_.timer(e,t=void 0===t?q_.asyncScheduler:t);return W_.delayWhen(function(){return r})};var H_={},G_=(Object.defineProperty(H_,"__esModule",{value:!0}),H_.dematerialize=void 0,h),Y_=S,K_=p;H_.dematerialize=function(){return Y_.operate(function(e,t){e.subscribe(K_.createOperatorSubscriber(t,function(e){return G_.observeNotification(e,t)}))})};var Z_={},Q_=(Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.distinct=void 0,S),X_=p,J_=l,$_=I;Z_.distinct=function(o,t){return Q_.operate(function(e,r){var n=new Set;e.subscribe(X_.createOperatorSubscriber(r,function(e){var t=o?o(e):e;n.has(t)||(n.add(t),r.next(e))})),t&&$_.innerFrom(t).subscribe(X_.createOperatorSubscriber(r,function(){return n.clear()},J_.noop))})};var ev={},tv=(Object.defineProperty(ev,"__esModule",{value:!0}),ev.distinctUntilChanged=void 0,jt),rv=S,nv=p;function ov(e,t){return e===t}ev.distinctUntilChanged=function(i,u){return void 0===u&&(u=tv.identity),i=null!=i?i:ov,rv.operate(function(e,r){var n,o=!0;e.subscribe(nv.createOperatorSubscriber(r,function(e){var t=u(e);!o&&i(n,t)||(o=!1,n=t,r.next(e))}))})};var iv={},uv=(Object.defineProperty(iv,"__esModule",{value:!0}),iv.distinctUntilKeyChanged=void 0,ev);iv.distinctUntilKeyChanged=function(r,n){return uv.distinctUntilChanged(function(e,t){return n?n(e[r],t[r]):e[r]===t[r]})};var av={},sv={},cv=(Object.defineProperty(sv,"__esModule",{value:!0}),sv.throwIfEmpty=void 0,Bl),lv=S,fv=p;function pv(){return new cv.EmptyError}sv.throwIfEmpty=function(n){return void 0===n&&(n=pv),lv.operate(function(e,t){var r=!1;e.subscribe(fv.createOperatorSubscriber(t,function(e){r=!0,t.next(e)},function(){return r?t.complete():t.error(n())}))})},Object.defineProperty(av,"__esModule",{value:!0}),av.elementAt=void 0;var dv=Yl,hv=Hh,bv=sv,yv=w_,_v=S_;av.elementAt=function(r,t){if(r<0)throw new dv.ArgumentOutOfRangeError;var n=2<=arguments.length;return function(e){return e.pipe(hv.filter(function(e,t){return t===r}),_v.take(1),n?yv.defaultIfEmpty(t):bv.throwIfEmpty(function(){return new dv.ArgumentOutOfRangeError}))}};var vv={},mv=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},gv=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Ov=(Object.defineProperty(vv,"__esModule",{value:!0}),vv.endWith=void 0,_d),wv=c;vv.endWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return Ov.concat(e,wv.of.apply(void 0,gv([],mv(t))))}};var Ev={},Pv=(Object.defineProperty(Ev,"__esModule",{value:!0}),Ev.every=void 0,S),Tv=p;Ev.every=function(o,i){return Pv.operate(function(t,r){var n=0;t.subscribe(Tv.createOperatorSubscriber(r,function(e){o.call(i,e,n++,t)||(r.next(!1),r.complete())},function(){r.next(!0),r.complete()}))})};var Sv={},jv={},Cv={},Iv=(Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.exhaustMap=void 0,Dp),Rv=I,Av=S,kv=p;Cv.exhaustMap=function t(i,o){return o?function(e){return e.pipe(t(function(r,n){return Rv.innerFrom(i(r,n)).pipe(Iv.map(function(e,t){return o(r,e,n,t)}))}))}:Av.operate(function(e,t){var r=0,n=null,o=!1;e.subscribe(kv.createOperatorSubscriber(t,function(e){n||(n=kv.createOperatorSubscriber(t,void 0,function(){n=null,o&&t.complete()}),Rv.innerFrom(i(e,r++)).subscribe(n))},function(){o=!0,n||t.complete()}))})},Object.defineProperty(jv,"__esModule",{value:!0}),jv.exhaustAll=void 0;var Mv=Cv,Nv=jt;jv.exhaustAll=function(){return Mv.exhaustMap(Nv.identity)},Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.exhaust=void 0;Sv.exhaust=jv.exhaustAll;var xv={},Dv=(Object.defineProperty(xv,"__esModule",{value:!0}),xv.expand=void 0,S),Lv=Od;xv.expand=function(r,n,o){return n=((n=void 0===n?1/0:n)||0)<1?1/0:n,Dv.operate(function(e,t){return Lv.mergeInternals(e,t,r,n,void 0,!0,o)})};var Uv={},Fv=(Object.defineProperty(Uv,"__esModule",{value:!0}),Uv.finalize=void 0,S);Uv.finalize=function(r){return Fv.operate(function(e,t){try{e.subscribe(t)}finally{t.add(r)}})};var Bv={},Vv=(Object.defineProperty(Bv,"__esModule",{value:!0}),Bv.createFind=Bv.find=void 0,S),qv=p;function Wv(i,u,e){var a="index"===e;return function(r,n){var o=0;r.subscribe(qv.createOperatorSubscriber(n,function(e){var t=o++;i.call(u,e,t,r)&&(n.next(a?t:e),n.complete())},function(){n.next(a?-1:void 0),n.complete()}))}}Bv.find=function(e,t){return Vv.operate(Wv(e,t,"value"))},Bv.createFind=Wv;var zv={},Hv=(Object.defineProperty(zv,"__esModule",{value:!0}),zv.findIndex=void 0,S),Gv=Bv;zv.findIndex=function(e,t){return Hv.operate(Gv.createFind(e,t,"index"))};var Yv={},Kv=(Object.defineProperty(Yv,"__esModule",{value:!0}),Yv.first=void 0,Bl),Zv=Hh,Qv=S_,Xv=w_,Jv=sv,$v=jt;Yv.first=function(n,e){var t=2<=arguments.length;return function(r){return r.pipe(n?Zv.filter(function(e,t){return n(e,t,r)}):$v.identity,Qv.take(1),t?Xv.defaultIfEmpty(e):Jv.throwIfEmpty(function(){return new Kv.EmptyError}))}};var em={},tm=(Object.defineProperty(em,"__esModule",{value:!0}),em.groupBy=void 0,E),rm=I,nm=C,om=S,im=p;em.groupBy=function(b,t,y,_){return om.operate(function(e,s){function c(t){return r(function(e){return e.error(t)})}t&&"function"!=typeof t?(y=t.duration,l=t.element,_=t.connector):l=t;var l,f=new Map,r=function(e){f.forEach(e),e(s)},p=0,d=!1,h=new im.OperatorSubscriber(s,function(e){try{var t,r,n=b(e),o=f.get(n);o||(f.set(n,o=_?_():new nm.Subject),i=n,u=o,(a=new tm.Observable(function(e){p++;var t=u.subscribe(e);return function(){t.unsubscribe(),0==--p&&d&&h.unsubscribe()}})).key=i,t=a,s.next(t),y&&(r=im.createOperatorSubscriber(o,function(){o.complete(),null!=r&&r.unsubscribe()},void 0,void 0,function(){return f.delete(n)}),h.add(rm.innerFrom(y(t)).subscribe(r)))),o.next(l?l(e):e)}catch(e){c(e)}var i,u,a},function(){return r(function(e){return e.complete()})},c,function(){return f.clear()},function(){return d=!0,0===p});e.subscribe(h)})};var um={},am=(Object.defineProperty(um,"__esModule",{value:!0}),um.isEmpty=void 0,S),sm=p;um.isEmpty=function(){return am.operate(function(e,t){e.subscribe(sm.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})};var cm={},lm={},fm=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pm=(Object.defineProperty(lm,"__esModule",{value:!0}),lm.takeLast=void 0,dt),dm=S,hm=p;lm.takeLast=function(t){return t<=0?function(){return pm.EMPTY}:dm.operate(function(e,i){var u=[];e.subscribe(hm.createOperatorSubscriber(i,function(e){u.push(e),t<u.length&&u.shift()},function(){var t,e;try{for(var r=fm(u),n=r.next();!n.done;n=r.next()){var o=n.value;i.next(o)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}i.complete()},void 0,function(){u=null}))})},Object.defineProperty(cm,"__esModule",{value:!0}),cm.last=void 0;var bm=Bl,ym=Hh,_m=lm,vm=sv,mm=w_,gm=jt;cm.last=function(n,e){var t=2<=arguments.length;return function(r){return r.pipe(n?ym.filter(function(e,t){return n(e,t,r)}):gm.identity,_m.takeLast(1),t?mm.defaultIfEmpty(e):vm.throwIfEmpty(function(){return new bm.EmptyError}))}};var Om={},wm=(Object.defineProperty(Om,"__esModule",{value:!0}),Om.materialize=void 0,h),Em=S,Pm=p;Om.materialize=function(){return Em.operate(function(e,t){e.subscribe(Pm.createOperatorSubscriber(t,function(e){t.next(wm.Notification.createNext(e))},function(){t.next(wm.Notification.createComplete()),t.complete()},function(e){t.next(wm.Notification.createError(e)),t.complete()}))})};var Tm={},Sm=(Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.max=void 0,dy),jm=y;Tm.max=function(r){return Sm.reduce(jm.isFunction(r)?function(e,t){return 0<r(e,t)?e:t}:function(e,t){return t<e?e:t})};var Cm={},Im=(Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.flatMap=void 0,gd),Im=(Cm.flatMap=Im.mergeMap,{}),Rm=(Object.defineProperty(Im,"__esModule",{value:!0}),Im.mergeMapTo=void 0,gd),Am=y;Im.mergeMapTo=function(e,t,r){return void 0===r&&(r=1/0),Am.isFunction(t)?Rm.mergeMap(function(){return e},t,r):Rm.mergeMap(function(){return e},r="number"==typeof t?t:r)};var km={},Mm=(Object.defineProperty(km,"__esModule",{value:!0}),km.mergeScan=void 0,S),Nm=Od;km.mergeScan=function(n,o,i){return void 0===i&&(i=1/0),Mm.operate(function(e,t){var r=o;return Nm.mergeInternals(e,t,function(e,t){return n(r,e,t)},i,function(e){r=e},!1,void 0,function(){return r=null})})};var Od={},xm={},Dm=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Lm=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Um=(Object.defineProperty(xm,"__esModule",{value:!0}),xm.merge=void 0,S),Fm=md,Bm=b,Vm=Dl;xm.merge=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=Bm.popScheduler(r),o=Bm.popNumber(r,1/0);return Um.operate(function(e,t){Fm.mergeAll(o)(Vm.from(Lm([e],Dm(r)),n)).subscribe(t)})};var qm=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Wm=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},zm=(Object.defineProperty(Od,"__esModule",{value:!0}),Od.mergeWith=void 0,xm);Od.mergeWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zm.merge.apply(void 0,Wm([],qm(e)))};var Hm={},Gm=(Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.min=void 0,dy),Ym=y;Hm.min=function(r){return Gm.reduce(Ym.isFunction(r)?function(e,t){return r(e,t)<0?e:t}:function(e,t){return e<t?e:t})};var Km={},Zm=(Object.defineProperty(Km,"__esModule",{value:!0}),Km.multicast=void 0,Wt),Qm=y,Xm=o_;Km.multicast=function(e,t){var r=Qm.isFunction(e)?e:function(){return e};return Qm.isFunction(t)?Xm.connect(t,{connector:r}):function(e){return new Zm.ConnectableObservable(e,r)}};var Jm={},$m=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},e0=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},t0=(Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.onErrorResumeNext=Jm.onErrorResumeNextWith=void 0,Nh),r0=Mh;function n0(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=t0.argsOrArgArray(e);return function(e){return r0.onErrorResumeNext.apply(void 0,e0([e],$m(r)))}}Jm.onErrorResumeNextWith=n0,Jm.onErrorResumeNext=n0;var o0={},i0=(Object.defineProperty(o0,"__esModule",{value:!0}),o0.pairwise=void 0,S),u0=p;o0.pairwise=function(){return i0.operate(function(e,r){var n,o=!1;e.subscribe(u0.createOperatorSubscriber(r,function(e){var t=n;n=e,o&&r.next([t,e]),o=!0}))})};var a0={},s0=(Object.defineProperty(a0,"__esModule",{value:!0}),a0.pluck=void 0,Dp);a0.pluck=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var i=o.length;if(0===i)throw new Error("list of properties cannot be empty.");return s0.map(function(e){for(var t=e,r=0;r<i;r++){var n=null==t?void 0:t[o[r]];if(void 0===n)return;t=n}return t})};var c0={},l0=(Object.defineProperty(c0,"__esModule",{value:!0}),c0.publish=void 0,C),f0=Km,p0=o_;c0.publish=function(t){return t?function(e){return p0.connect(t)(e)}:function(e){return f0.multicast(new l0.Subject)(e)}};var d0={},h0=(Object.defineProperty(d0,"__esModule",{value:!0}),d0.publishBehavior=void 0,sr),b0=Wt;d0.publishBehavior=function(r){return function(e){var t=new h0.BehaviorSubject(r);return new b0.ConnectableObservable(e,function(){return t})}};var y0={},_0=(Object.defineProperty(y0,"__esModule",{value:!0}),y0.publishLast=void 0,G),v0=Wt;y0.publishLast=function(){return function(e){var t=new _0.AsyncSubject;return new v0.ConnectableObservable(e,function(){return t})}};var m0={},g0=(Object.defineProperty(m0,"__esModule",{value:!0}),m0.publishReplay=void 0,gt),O0=Km,w0=y;m0.publishReplay=function(t,r,e,n){e&&!w0.isFunction(e)&&(n=e);var o=w0.isFunction(e)?e:void 0;return function(e){return O0.multicast(new g0.ReplaySubject(t,r,n),o)(e)}};var E0={},P0=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},T0=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},S0=(Object.defineProperty(E0,"__esModule",{value:!0}),E0.raceWith=void 0,Xh),j0=S,C0=jt;E0.raceWith=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length?j0.operate(function(e,t){S0.raceInit(T0([e],P0(r)))(t)}):C0.identity};var I0={},R0=(Object.defineProperty(I0,"__esModule",{value:!0}),I0.repeat=void 0,dt),A0=S,k0=p,M0=I,N0=mh;I0.repeat=function(e){var t,a,s=1/0;return null!=e&&("object"==typeof e?(t=e.count,s=void 0===t?1/0:t,a=e.delay):s=e),s<=0?function(){return R0.EMPTY}:A0.operate(function(t,r){function n(){var e=!1;o=t.subscribe(k0.createOperatorSubscriber(r,void 0,function(){++i<s?o?u():e=!0:r.complete()})),e&&u()}var o,i=0,u=function(){var e,t;null!=o&&o.unsubscribe(),(o=null)!=a?(e="number"==typeof a?N0.timer(a):M0.innerFrom(a(i)),t=k0.createOperatorSubscriber(r,function(){t.unsubscribe(),n()}),e.subscribe(t)):n()};n()})};var x0={},D0=(Object.defineProperty(x0,"__esModule",{value:!0}),x0.repeatWhen=void 0,I),L0=C,U0=S,F0=p;x0.repeatWhen=function(l){return U0.operate(function(e,t){var r,n,o=!1,i=!1,u=!1,a=function(){return u&&i&&(t.complete(),!0)},s=function(){return n||(n=new L0.Subject,D0.innerFrom(l(n)).subscribe(F0.createOperatorSubscriber(t,function(){r?c():o=!0},function(){i=!0,a()}))),n},c=function(){u=!1,r=e.subscribe(F0.createOperatorSubscriber(t,void 0,function(){u=!0,a()||s().next()})),o&&(r.unsubscribe(),r=null,o=!1,c())};c()})};var B0={},V0=(Object.defineProperty(B0,"__esModule",{value:!0}),B0.retry=void 0,S),q0=p,W0=jt,z0=mh,H0=I;B0.retry=function(e){var t=(e=(e=void 0===e?1/0:e)&&"object"==typeof e?e:{count:e}).count,c=void 0===t?1/0:t,l=e.delay,r=void 0!==(t=e.resetOnSuccess)&&t;return c<=0?W0.identity:V0.operate(function(e,i){var u,a=0,s=function(){var o=!1;u=e.subscribe(q0.createOperatorSubscriber(i,function(e){r&&(a=0),i.next(e)},void 0,function(e){var t,r,n;a++<c?(t=function(){u?(u.unsubscribe(),u=null,s()):o=!0},null!=l?(r="number"==typeof l?z0.timer(l):H0.innerFrom(l(e,a)),n=q0.createOperatorSubscriber(i,function(){n.unsubscribe(),t()},function(){i.complete()}),r.subscribe(n)):t()):i.error(e)})),o&&(u.unsubscribe(),u=null,s())};s()})};var G0={},Y0=(Object.defineProperty(G0,"__esModule",{value:!0}),G0.retryWhen=void 0,I),K0=C,Z0=S,Q0=p;G0.retryWhen=function(u){return Z0.operate(function(e,t){var r,n,o=!1,i=function(){r=e.subscribe(Q0.createOperatorSubscriber(t,void 0,void 0,function(e){n||(n=new K0.Subject,Y0.innerFrom(u(n)).subscribe(Q0.createOperatorSubscriber(t,function(){return r?i():o=!0}))),n&&n.next(e)})),o&&(r.unsubscribe(),r=null,o=!1,i())};i()})};var X0={},J0=(Object.defineProperty(X0,"__esModule",{value:!0}),X0.sample=void 0,I),$0=S,eg=l,tg=p;X0.sample=function(o){return $0.operate(function(e,t){var r=!1,n=null;e.subscribe(tg.createOperatorSubscriber(t,function(e){r=!0,n=e})),J0.innerFrom(o).subscribe(tg.createOperatorSubscriber(t,function(){var e;r&&(r=!1,e=n,n=null,t.next(e))},eg.noop))})};var rg={},ng=(Object.defineProperty(rg,"__esModule",{value:!0}),rg.sampleTime=void 0,T),og=X0,ig=vh;rg.sampleTime=function(e,t){return og.sample(ig.interval(e,t=void 0===t?ng.asyncScheduler:t))};var ug={},ag=(Object.defineProperty(ug,"__esModule",{value:!0}),ug.scan=void 0,S),sg=hy;ug.scan=function(e,t){return ag.operate(sg.scanInternals(e,t,2<=arguments.length,!0))};var hy={},cg=(Object.defineProperty(hy,"__esModule",{value:!0}),hy.sequenceEqual=void 0,S),lg=p,fg=I;function pg(){return{buffer:[],complete:!1}}hy.sequenceEqual=function(u,a){return void 0===a&&(a=function(e,t){return e===t}),cg.operate(function(e,t){function r(n,o){var r=lg.createOperatorSubscriber(t,function(e){var t=o.buffer,r=o.complete;0===t.length?r?i(!1):n.buffer.push(e):a(e,t.shift())||i(!1)},function(){n.complete=!0;var e=o.complete,t=o.buffer;e&&i(0===t.length),null!=r&&r.unsubscribe()});return r}var n=pg(),o=pg(),i=function(e){t.next(e),t.complete()};e.subscribe(r(n,o)),fg.innerFrom(u).subscribe(r(o,n))})};var dg={},hg=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},bg=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},yg=(Object.defineProperty(dg,"__esModule",{value:!0}),dg.share=void 0,I),_g=C,vg=Gt,mg=S;function gg(e,t){for(var r,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!0===t)e();else if(!1!==t)return r=new vg.SafeSubscriber({next:function(){r.unsubscribe(),e()}}),yg.innerFrom(t.apply(void 0,bg([],hg(n)))).subscribe(r)}dg.share=function(e){var t=(e=void 0===e?{}:e).connector,p=void 0===t?function(){return new _g.Subject}:t,d=void 0===(t=e.resetOnError)||t,h=void 0===(t=e.resetOnComplete)||t,b=void 0===(t=e.resetOnRefCountZero)||t;return function(e){function n(){var e=o;f(),null!=e&&e.unsubscribe()}var o,i,u,a=0,s=!1,c=!1,l=function(){null!=i&&i.unsubscribe(),i=void 0},f=function(){l(),o=u=void 0,s=c=!1};return mg.operate(function(e,t){a++,c||s||l();var r=u=null!=u?u:p();t.add(function(){0!==--a||c||s||(i=gg(n,b))}),r.subscribe(t),!o&&0<a&&(o=new vg.SafeSubscriber({next:function(e){return r.next(e)},error:function(e){c=!0,l(),i=gg(f,d,e),r.error(e)},complete:function(){s=!0,l(),i=gg(f,h),r.complete()}}),yg.innerFrom(e).subscribe(o))})(e)}};var Og={},wg=(Object.defineProperty(Og,"__esModule",{value:!0}),Og.shareReplay=void 0,gt),Eg=dg;Og.shareReplay=function(e,t,r){var n,o,i=!1;return e&&"object"==typeof e?(n=e.bufferSize,o=void 0===n?1/0:n,n=e.windowTime,t=void 0===n?1/0:n,i=void 0!==(n=e.refCount)&&n,r=e.scheduler):o=null!=e?e:1/0,Eg.share({connector:function(){return new wg.ReplaySubject(o,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})};var Pg={},Tg=(Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.single=void 0,Bl),Sg=xf,jg=Kf,Cg=S,Ig=p;Pg.single=function(a){return Cg.operate(function(t,r){var n,o=!1,i=!1,u=0;t.subscribe(Ig.createOperatorSubscriber(r,function(e){i=!0,a&&!a(e,u++,t)||(o&&r.error(new Sg.SequenceError("Too many matching values")),o=!0,n=e)},function(){o?(r.next(n),r.complete()):r.error(i?new jg.NotFoundError("No matching values"):new Tg.EmptyError)}))})};var Rg={},Ag=(Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.skip=void 0,Hh);Rg.skip=function(r){return Ag.filter(function(e,t){return r<=t})};var kg={},Mg=(Object.defineProperty(kg,"__esModule",{value:!0}),kg.skipLast=void 0,jt),Ng=S,xg=p;kg.skipLast=function(u){return u<=0?Mg.identity:Ng.operate(function(e,n){var o=new Array(u),i=0;return e.subscribe(xg.createOperatorSubscriber(n,function(e){var t,r=i++;r<u?o[r]=e:(t=o[r=r%u],o[r]=e,n.next(t))})),function(){o=null}})};var Dg={},Lg=(Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.skipUntil=void 0,S),Ug=p,Fg=I,Bg=l;Dg.skipUntil=function(o){return Lg.operate(function(e,t){var r=!1,n=Ug.createOperatorSubscriber(t,function(){null!=n&&n.unsubscribe(),r=!0},Bg.noop);Fg.innerFrom(o).subscribe(n),e.subscribe(Ug.createOperatorSubscriber(t,function(e){return r&&t.next(e)}))})};var Vg={},qg=(Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.skipWhile=void 0,S),Wg=p;Vg.skipWhile=function(o){return qg.operate(function(e,t){var r=!1,n=0;e.subscribe(Wg.createOperatorSubscriber(t,function(e){return(r=r||!o(e,n++))&&t.next(e)}))})};var zg={},Hg=(Object.defineProperty(zg,"__esModule",{value:!0}),zg.startWith=void 0,_d),Gg=b,Yg=S;zg.startWith=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=Gg.popScheduler(r);return Yg.operate(function(e,t){(n?Hg.concat(r,e,n):Hg.concat(r,e)).subscribe(t)})};var Kg={},Zg={},Qg=(Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.switchMap=void 0,I),Xg=S,Jg=p;Zg.switchMap=function(s,c){return Xg.operate(function(e,o){function i(){t&&!u&&o.complete()}var u=null,a=0,t=!1;e.subscribe(Jg.createOperatorSubscriber(o,function(t){null!=u&&u.unsubscribe();var r=0,n=a++;Qg.innerFrom(s(t,n)).subscribe(u=Jg.createOperatorSubscriber(o,function(e){return o.next(c?c(t,e,n,r++):e)},function(){u=null,i()}))},function(){t=!0,i()}))})},Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.switchAll=void 0;var $g=Zg,eO=jt;Kg.switchAll=function(){return $g.switchMap(eO.identity)};var tO={},rO=(Object.defineProperty(tO,"__esModule",{value:!0}),tO.switchMapTo=void 0,Zg),nO=y;tO.switchMapTo=function(e,t){return nO.isFunction(t)?rO.switchMap(function(){return e},t):rO.switchMap(function(){return e})};var oO={},iO=(Object.defineProperty(oO,"__esModule",{value:!0}),oO.switchScan=void 0,Zg),uO=S;oO.switchScan=function(n,o){return uO.operate(function(e,t){var r=o;return iO.switchMap(function(e,t){return n(r,e,t)},function(e,t){return r=t})(e).subscribe(t),function(){r=null}})};var aO={},sO=(Object.defineProperty(aO,"__esModule",{value:!0}),aO.takeUntil=void 0,S),cO=p,lO=I,fO=l;aO.takeUntil=function(r){return sO.operate(function(e,t){lO.innerFrom(r).subscribe(cO.createOperatorSubscriber(t,function(){return t.complete()},fO.noop)),t.closed||e.subscribe(t)})};var pO={},dO=(Object.defineProperty(pO,"__esModule",{value:!0}),pO.takeWhile=void 0,S),hO=p;pO.takeWhile=function(o,i){return void 0===i&&(i=!1),dO.operate(function(e,r){var n=0;e.subscribe(hO.createOperatorSubscriber(r,function(e){var t=o(e,n++);(t||i)&&r.next(e),t||r.complete()}))})};var bO={},yO=(Object.defineProperty(bO,"__esModule",{value:!0}),bO.tap=void 0,y),_O=S,vO=p,mO=jt;bO.tap=function(e,t,r){var o=yO.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return o?_O.operate(function(e,r){null!=(t=o.subscribe)&&t.call(o);var t,n=!0;e.subscribe(vO.createOperatorSubscriber(r,function(e){var t;null!=(t=o.next)&&t.call(o,e),r.next(e)},function(){var e;n=!1,null!=(e=o.complete)&&e.call(o),r.complete()},function(e){var t;n=!1,null!=(t=o.error)&&t.call(o,e),r.error(e)},function(){var e;n&&null!=(e=o.unsubscribe)&&e.call(o),null!=(e=o.finalize)&&e.call(o)}))}):mO.identity};var y={},gO=(Object.defineProperty(y,"__esModule",{value:!0}),y.throttle=void 0,S),OO=p,wO=I;y.throttle=function(h,b){return gO.operate(function(e,t){function r(){var e;a&&(a=!1,e=s,s=null,t.next(e),l||d(e))}var n=null!=b?b:{},o=n.leading,i=void 0===o||o,o=n.trailing,u=void 0!==o&&o,a=!1,s=null,c=null,l=!1,f=function(){null!=c&&c.unsubscribe(),c=null,u&&(r(),l&&t.complete())},p=function(){c=null,l&&t.complete()},d=function(e){return c=wO.innerFrom(h(e)).subscribe(OO.createOperatorSubscriber(t,f,p))};e.subscribe(OO.createOperatorSubscriber(t,function(e){a=!0,s=e,c&&!c.closed||(i?r():d(e))},function(){l=!0,u&&a&&c&&!c.closed||t.complete()}))})};var EO={},PO=(Object.defineProperty(EO,"__esModule",{value:!0}),EO.throttleTime=void 0,T),TO=y,SO=mh;EO.throttleTime=function(e,t,r){var n=SO.timer(e,t=void 0===t?PO.asyncScheduler:t);return TO.throttle(function(){return n},r)};var jO={},CO=(Object.defineProperty(jO,"__esModule",{value:!0}),jO.TimeInterval=jO.timeInterval=void 0,T),IO=S,RO=p;jO.timeInterval=function(i){return void 0===i&&(i=CO.asyncScheduler),IO.operate(function(e,n){var o=i.now();e.subscribe(RO.createOperatorSubscriber(n,function(e){var t=i.now(),r=t-o;o=t,n.next(new AO(e,r))}))})};var AO=function(e,t){this.value=e,this.interval=t},kO=(jO.TimeInterval=AO,{}),MO=(Object.defineProperty(kO,"__esModule",{value:!0}),kO.timeoutWith=void 0,T),NO=Ff,xO=$l;kO.timeoutWith=function(e,t,r){var n,o;if(r=null!=r?r:MO.async,NO.isValidDate(e)?n=e:"number"==typeof e&&(o=e),!t)throw new TypeError("No observable provided to switch to");if(e=function(){return t},null==n&&null==o)throw new TypeError("No timeout provided.");return xO.timeout({first:n,each:o,scheduler:r,with:e})};var Ff={},DO=(Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.timestamp=void 0,o),LO=Dp;Ff.timestamp=function(t){return void 0===t&&(t=DO.dateTimestampProvider),LO.map(function(e){return{value:e,timestamp:t.now()}})};var o={},UO=(Object.defineProperty(o,"__esModule",{value:!0}),o.window=void 0,C),FO=S,BO=p,VO=l,qO=I;o.window=function(o){return FO.operate(function(e,t){function r(e){n.error(e),t.error(e)}var n=new UO.Subject;t.next(n.asObservable());return e.subscribe(BO.createOperatorSubscriber(t,function(e){return null==n?void 0:n.next(e)},function(){n.complete(),t.complete()},r)),qO.innerFrom(o).subscribe(BO.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new UO.Subject)},VO.noop,r)),function(){null!=n&&n.unsubscribe(),n=null}})};var WO={},zO=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},HO=(Object.defineProperty(WO,"__esModule",{value:!0}),WO.windowCount=void 0,C),GO=S,YO=p;WO.windowCount=function(s,e){var c=0<(e=void 0===e?0:e)?e:s;return GO.operate(function(e,i){var u=[new HO.Subject],a=0;i.next(u[0].asObservable()),e.subscribe(YO.createOperatorSubscriber(i,function(e){try{for(var t=zO(u),r=t.next();!r.done;r=t.next())r.value.next(e)}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=t.return)&&o.call(t)}finally{if(n)throw n.error}}var n,o=a-s+1;0<=o&&o%c==0&&u.shift().complete(),++a%c==0&&(n=new HO.Subject,u.push(n),i.next(n.asObservable()))},function(){for(;0<u.length;)u.shift().complete();i.complete()},function(e){for(;0<u.length;)u.shift().error(e);i.error(e)},function(){u=null}))})};var KO={},ZO=(Object.defineProperty(KO,"__esModule",{value:!0}),KO.windowTime=void 0,C),QO=T,XO=P,JO=S,$O=p,ew=O,tw=b,rw=Sf;KO.windowTime=function(c){for(var e,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var l=null!=(e=tw.popScheduler(t))?e:QO.asyncScheduler,f=null!=(e=t[0])?e:null,p=t[1]||1/0;return JO.operate(function(e,n){function r(t){s(function(e){e=e.window;return t(e)}),t(n),n.unsubscribe()}var o=[],i=!1,u=function(e){var t=e.window,r=e.subs;t.complete(),r.unsubscribe(),ew.arrRemove(o,e),i&&a()},a=function(){var e,t,r;o&&(e=new XO.Subscription,n.add(e),t=new ZO.Subject,o.push(r={window:t,subs:e,seen:0}),n.next(t.asObservable()),rw.executeSchedule(e,l,function(){return u(r)},c))},s=(null!==f&&0<=f?rw.executeSchedule(n,l,a,f,!0):i=!0,a(),function(e){return o.slice().forEach(e)});return e.subscribe($O.createOperatorSubscriber(n,function(t){s(function(e){e.window.next(t),p<=++e.seen&&u(e)})},function(){return r(function(e){return e.complete()})},function(t){return r(function(e){return e.error(t)})})),function(){o=null}})};var Sf={},nw=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ow=(Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.windowToggle=void 0,C),iw=P,uw=S,aw=I,sw=p,cw=l,lw=O;Sf.windowToggle=function(t,a){return uw.operate(function(e,o){function i(e){for(;0<u.length;)u.shift().error(e);o.error(e)}var u=[];aw.innerFrom(t).subscribe(sw.createOperatorSubscriber(o,function(e){var t,r=new ow.Subject,n=(u.push(r),new iw.Subscription);try{t=aw.innerFrom(a(e))}catch(e){return void i(e)}o.next(r.asObservable()),n.add(t.subscribe(sw.createOperatorSubscriber(o,function(){lw.arrRemove(u,r),r.complete(),n.unsubscribe()},cw.noop,i)))},cw.noop)),e.subscribe(sw.createOperatorSubscriber(o,function(e){var t,r,n=u.slice();try{for(var o=nw(n),i=o.next();!i.done;i=o.next())i.value.next(e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},function(){for(;0<u.length;)u.shift().complete();o.complete()},i,function(){for(;0<u.length;)u.shift().unsubscribe()}))})};var O={},fw=(Object.defineProperty(O,"__esModule",{value:!0}),O.windowWhen=void 0,C),pw=S,dw=p,hw=I;O.windowWhen=function(u){return pw.operate(function(e,t){var r,n,o=function(e){r.error(e),t.error(e)},i=function(){var e;null!=n&&n.unsubscribe(),null!=r&&r.complete(),r=new fw.Subject,t.next(r.asObservable());try{e=hw.innerFrom(u())}catch(e){return void o(e)}e.subscribe(n=dw.createOperatorSubscriber(t,i,i,o))};i(),e.subscribe(dw.createOperatorSubscriber(t,function(e){return r.next(e)},function(){r.complete(),t.complete()},o,function(){null!=n&&n.unsubscribe(),r=null}))})};var bw={},yw=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},_w=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},vw=(Object.defineProperty(bw,"__esModule",{value:!0}),bw.withLatestFrom=void 0,S),mw=p,gw=I,Ow=jt,ww=l,Ew=b;bw.withLatestFrom=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];var s=Ew.popResultSelector(a);return vw.operate(function(e,r){for(var t=a.length,n=new Array(t),o=a.map(function(){return!1}),i=!1,u=0;u<t;u++)!function(t){gw.innerFrom(a[t]).subscribe(mw.createOperatorSubscriber(r,function(e){n[t]=e,i||o[t]||(o[t]=!0,(i=o.every(Ow.identity))&&(o=null))},ww.noop))}(u);e.subscribe(mw.createOperatorSubscriber(r,function(e){i&&(e=_w([e],yw(n)),r.next(s?s.apply(void 0,_w([],yw(e))):e))}))})};var p={},Pw=(Object.defineProperty(p,"__esModule",{value:!0}),p.zipAll=void 0,lb),Tw=R;p.zipAll=function(e){return Tw.joinAllInternals(Pw.zip,e)};var I={},b={},Sw=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},jw=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},Cw=(Object.defineProperty(b,"__esModule",{value:!0}),b.zip=void 0,lb),Iw=S;b.zip=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Iw.operate(function(e,t){Cw.zip.apply(void 0,jw([e],Sw(r))).subscribe(t)})};var Rw,Aw,kw,Mw,Nw,xw,Dw,Lw,Uw,Fw,Bw,Vw,qw,Ww,zw,Hw,Gw,Yw,Kw,Zw,Qw,Xw,Jw,$w,eE,tE,rE,nE,oE,iE,uE,aE,sE,cE,lE,fE,pE,dE,hE,bE,yE,_E,vE,mE,gE,OE,wE,EE,PE,TE,SE,jE,CE,IE,RE,AE,kE,ME,NE,xE,DE,LE,UE,FE,BE,VE,qE,WE,zE,HE,GE,YE,KE,ZE,QE,XE,JE,$E,eP,tP,rP,nP,oP,iP,uP,aP,sP,cP,lP,fP,pP,dP,hP,bP,yP,_P,vP,mP,gP,OP,wP,EP,PP,TP,SP,jP,CP,IP,RP,AP,kP,MP,NP,xP,DP,LP,UP,FP,BP,VP,qP,WP,zP,HP,GP,YP,KP,ZP,QP,XP,JP,$P,eT,tT,rT,nT,oT,iT,uT,aT,sT,cT,lT,fT,pT,dT,hT,bT,yT,_T,vT,mT,gT,OT,wT,ET,PT,TT,ST,jT,CT,IT,RT,AT,kT,MT,NT,xT,DT=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},LT=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},UT=(Object.defineProperty(I,"__esModule",{value:!0}),I.zipWith=void 0,b);I.zipWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return UT.zip.apply(void 0,LT([],DT(e)))},R=ln,Rw=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),S=r&&r.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Rw(t,e,r)},Object.defineProperty(R,"__esModule",{value:!0}),R.interval=R.iif=R.generate=R.fromEventPattern=R.fromEvent=R.from=R.forkJoin=R.empty=R.defer=R.connectable=R.concat=R.combineLatest=R.bindNodeCallback=R.bindCallback=R.UnsubscriptionError=R.TimeoutError=R.SequenceError=R.ObjectUnsubscribedError=R.NotFoundError=R.EmptyError=R.ArgumentOutOfRangeError=R.firstValueFrom=R.lastValueFrom=R.isObservable=R.identity=R.noop=R.pipe=R.NotificationKind=R.Notification=R.Subscriber=R.Subscription=R.Scheduler=R.VirtualAction=R.VirtualTimeScheduler=R.animationFrameScheduler=R.animationFrame=R.queueScheduler=R.queue=R.asyncScheduler=R.async=R.asapScheduler=R.asap=R.AsyncSubject=R.ReplaySubject=R.BehaviorSubject=R.Subject=R.animationFrames=R.observable=R.ConnectableObservable=R.Observable=void 0,R.filter=R.expand=R.exhaustMap=R.exhaustAll=R.exhaust=R.every=R.endWith=R.elementAt=R.distinctUntilKeyChanged=R.distinctUntilChanged=R.distinct=R.dematerialize=R.delayWhen=R.delay=R.defaultIfEmpty=R.debounceTime=R.debounce=R.count=R.connect=R.concatWith=R.concatMapTo=R.concatMap=R.concatAll=R.combineLatestWith=R.combineLatestAll=R.combineAll=R.catchError=R.bufferWhen=R.bufferToggle=R.bufferTime=R.bufferCount=R.buffer=R.auditTime=R.audit=R.config=R.NEVER=R.EMPTY=R.scheduled=R.zip=R.using=R.timer=R.throwError=R.range=R.race=R.partition=R.pairs=R.onErrorResumeNext=R.of=R.never=R.merge=void 0,R.switchMap=R.switchAll=R.subscribeOn=R.startWith=R.skipWhile=R.skipUntil=R.skipLast=R.skip=R.single=R.shareReplay=R.share=R.sequenceEqual=R.scan=R.sampleTime=R.sample=R.refCount=R.retryWhen=R.retry=R.repeatWhen=R.repeat=R.reduce=R.raceWith=R.publishReplay=R.publishLast=R.publishBehavior=R.publish=R.pluck=R.pairwise=R.onErrorResumeNextWith=R.observeOn=R.multicast=R.min=R.mergeWith=R.mergeScan=R.mergeMapTo=R.mergeMap=R.flatMap=R.mergeAll=R.max=R.materialize=R.mapTo=R.map=R.last=R.isEmpty=R.ignoreElements=R.groupBy=R.first=R.findIndex=R.find=R.finalize=void 0,R.zipWith=R.zipAll=R.withLatestFrom=R.windowWhen=R.windowToggle=R.windowTime=R.windowCount=R.window=R.toArray=R.timestamp=R.timeoutWith=R.timeout=R.timeInterval=R.throwIfEmpty=R.throttleTime=R.throttle=R.tap=R.takeWhile=R.takeUntil=R.takeLast=R.take=R.switchScan=R.switchMapTo=void 0,Aw=E,Object.defineProperty(R,"Observable",{enumerable:!0,get:function(){return Aw.Observable}}),kw=Wt,Object.defineProperty(R,"ConnectableObservable",{enumerable:!0,get:function(){return kw.ConnectableObservable}}),Mw=i,Object.defineProperty(R,"observable",{enumerable:!0,get:function(){return Mw.observable}}),Nw=j,Object.defineProperty(R,"animationFrames",{enumerable:!0,get:function(){return Nw.animationFrames}}),xw=C,Object.defineProperty(R,"Subject",{enumerable:!0,get:function(){return xw.Subject}}),Dw=sr,Object.defineProperty(R,"BehaviorSubject",{enumerable:!0,get:function(){return Dw.BehaviorSubject}}),Lw=gt,Object.defineProperty(R,"ReplaySubject",{enumerable:!0,get:function(){return Lw.ReplaySubject}}),Uw=G,Object.defineProperty(R,"AsyncSubject",{enumerable:!0,get:function(){return Uw.AsyncSubject}}),Fw=g,Object.defineProperty(R,"asap",{enumerable:!0,get:function(){return Fw.asap}}),Object.defineProperty(R,"asapScheduler",{enumerable:!0,get:function(){return Fw.asapScheduler}}),Bw=T,Object.defineProperty(R,"async",{enumerable:!0,get:function(){return Bw.async}}),Object.defineProperty(R,"asyncScheduler",{enumerable:!0,get:function(){return Bw.asyncScheduler}}),Vw=rc,Object.defineProperty(R,"queue",{enumerable:!0,get:function(){return Vw.queue}}),Object.defineProperty(R,"queueScheduler",{enumerable:!0,get:function(){return Vw.queueScheduler}}),qw=t,Object.defineProperty(R,"animationFrame",{enumerable:!0,get:function(){return qw.animationFrame}}),Object.defineProperty(R,"animationFrameScheduler",{enumerable:!0,get:function(){return qw.animationFrameScheduler}}),Ww=n,Object.defineProperty(R,"VirtualTimeScheduler",{enumerable:!0,get:function(){return Ww.VirtualTimeScheduler}}),Object.defineProperty(R,"VirtualAction",{enumerable:!0,get:function(){return Ww.VirtualAction}}),zw=Hn,Object.defineProperty(R,"Scheduler",{enumerable:!0,get:function(){return zw.Scheduler}}),Hw=P,Object.defineProperty(R,"Subscription",{enumerable:!0,get:function(){return Hw.Subscription}}),Gw=Gt,Object.defineProperty(R,"Subscriber",{enumerable:!0,get:function(){return Gw.Subscriber}}),Yw=h,Object.defineProperty(R,"Notification",{enumerable:!0,get:function(){return Yw.Notification}}),Object.defineProperty(R,"NotificationKind",{enumerable:!0,get:function(){return Yw.NotificationKind}}),Kw=u,Object.defineProperty(R,"pipe",{enumerable:!0,get:function(){return Kw.pipe}}),Zw=l,Object.defineProperty(R,"noop",{enumerable:!0,get:function(){return Zw.noop}}),Qw=jt,Object.defineProperty(R,"identity",{enumerable:!0,get:function(){return Qw.identity}}),Xw=Zl,Object.defineProperty(R,"isObservable",{enumerable:!0,get:function(){return Xw.isObservable}}),Jw=ql,Object.defineProperty(R,"lastValueFrom",{enumerable:!0,get:function(){return Jw.lastValueFrom}}),$w=Hl,Object.defineProperty(R,"firstValueFrom",{enumerable:!0,get:function(){return $w.firstValueFrom}}),eE=Yl,Object.defineProperty(R,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return eE.ArgumentOutOfRangeError}}),tE=Bl,Object.defineProperty(R,"EmptyError",{enumerable:!0,get:function(){return tE.EmptyError}}),rE=Kf,Object.defineProperty(R,"NotFoundError",{enumerable:!0,get:function(){return rE.NotFoundError}}),nE=m,Object.defineProperty(R,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return nE.ObjectUnsubscribedError}}),oE=xf,Object.defineProperty(R,"SequenceError",{enumerable:!0,get:function(){return oE.SequenceError}}),iE=$l,Object.defineProperty(R,"TimeoutError",{enumerable:!0,get:function(){return iE.TimeoutError}}),uE=_,Object.defineProperty(R,"UnsubscriptionError",{enumerable:!0,get:function(){return uE.UnsubscriptionError}}),aE=Kl,Object.defineProperty(R,"bindCallback",{enumerable:!0,get:function(){return aE.bindCallback}}),sE=Jp,Object.defineProperty(R,"bindNodeCallback",{enumerable:!0,get:function(){return sE.bindNodeCallback}}),cE=F,Object.defineProperty(R,"combineLatest",{enumerable:!0,get:function(){return cE.combineLatest}}),lE=_d,Object.defineProperty(R,"concat",{enumerable:!0,get:function(){return lE.concat}}),fE=Dd,Object.defineProperty(R,"connectable",{enumerable:!0,get:function(){return fE.connectable}}),pE=Ld,Object.defineProperty(R,"defer",{enumerable:!0,get:function(){return pE.defer}}),dE=dt,Object.defineProperty(R,"empty",{enumerable:!0,get:function(){return dE.empty}}),hE=zd,Object.defineProperty(R,"forkJoin",{enumerable:!0,get:function(){return hE.forkJoin}}),bE=Dl,Object.defineProperty(R,"from",{enumerable:!0,get:function(){return bE.from}}),yE=ed,Object.defineProperty(R,"fromEvent",{enumerable:!0,get:function(){return yE.fromEvent}}),_E=id,Object.defineProperty(R,"fromEventPattern",{enumerable:!0,get:function(){return _E.fromEventPattern}}),vE=Fl,Object.defineProperty(R,"generate",{enumerable:!0,get:function(){return vE.generate}}),mE=Vf,Object.defineProperty(R,"iif",{enumerable:!0,get:function(){return mE.iif}}),gE=vh,Object.defineProperty(R,"interval",{enumerable:!0,get:function(){return gE.interval}}),OE=Al,Object.defineProperty(R,"merge",{enumerable:!0,get:function(){return OE.merge}}),wE=kh,Object.defineProperty(R,"never",{enumerable:!0,get:function(){return wE.never}}),EE=c,Object.defineProperty(R,"of",{enumerable:!0,get:function(){return EE.of}}),PE=Mh,Object.defineProperty(R,"onErrorResumeNext",{enumerable:!0,get:function(){return PE.onErrorResumeNext}}),TE=Vh,Object.defineProperty(R,"pairs",{enumerable:!0,get:function(){return TE.pairs}}),SE=Wh,Object.defineProperty(R,"partition",{enumerable:!0,get:function(){return SE.partition}}),jE=Xh,Object.defineProperty(R,"race",{enumerable:!0,get:function(){return jE.race}}),CE=nb,Object.defineProperty(R,"range",{enumerable:!0,get:function(){return CE.range}}),IE=Ul,Object.defineProperty(R,"throwError",{enumerable:!0,get:function(){return IE.throwError}}),RE=mh,Object.defineProperty(R,"timer",{enumerable:!0,get:function(){return RE.timer}}),AE=ub,Object.defineProperty(R,"using",{enumerable:!0,get:function(){return AE.using}}),kE=lb,Object.defineProperty(R,"zip",{enumerable:!0,get:function(){return kE.zip}}),ME=Ll,Object.defineProperty(R,"scheduled",{enumerable:!0,get:function(){return ME.scheduled}}),NE=dt,Object.defineProperty(R,"EMPTY",{enumerable:!0,get:function(){return NE.EMPTY}}),xE=kh,Object.defineProperty(R,"NEVER",{enumerable:!0,get:function(){return xE.NEVER}}),S(mb,R),DE=or,Object.defineProperty(R,"config",{enumerable:!0,get:function(){return DE.config}}),LE=gb,Object.defineProperty(R,"audit",{enumerable:!0,get:function(){return LE.audit}}),UE=Pb,Object.defineProperty(R,"auditTime",{enumerable:!0,get:function(){return UE.auditTime}}),FE=Cb,Object.defineProperty(R,"buffer",{enumerable:!0,get:function(){return FE.buffer}}),BE=Mb,Object.defineProperty(R,"bufferCount",{enumerable:!0,get:function(){return BE.bufferCount}}),VE=Ub,Object.defineProperty(R,"bufferTime",{enumerable:!0,get:function(){return VE.bufferTime}}),qE=Yb,Object.defineProperty(R,"bufferToggle",{enumerable:!0,get:function(){return qE.bufferToggle}}),WE=ty,Object.defineProperty(R,"bufferWhen",{enumerable:!0,get:function(){return WE.bufferWhen}}),zE=uy,Object.defineProperty(R,"catchError",{enumerable:!0,get:function(){return zE.catchError}}),HE=ly,Object.defineProperty(R,"combineAll",{enumerable:!0,get:function(){return HE.combineAll}}),GE=fy,Object.defineProperty(R,"combineLatestAll",{enumerable:!0,get:function(){return GE.combineLatestAll}}),YE=Cy,Object.defineProperty(R,"combineLatestWith",{enumerable:!0,get:function(){return YE.combineLatestWith}}),KE=vd,Object.defineProperty(R,"concatAll",{enumerable:!0,get:function(){return KE.concatAll}}),ZE=xp,Object.defineProperty(R,"concatMap",{enumerable:!0,get:function(){return ZE.concatMap}}),QE=zy,Object.defineProperty(R,"concatMapTo",{enumerable:!0,get:function(){return QE.concatMapTo}}),XE=Yy,Object.defineProperty(R,"concatWith",{enumerable:!0,get:function(){return XE.concatWith}}),JE=o_,Object.defineProperty(R,"connect",{enumerable:!0,get:function(){return JE.connect}}),$E=i_,Object.defineProperty(R,"count",{enumerable:!0,get:function(){return $E.count}}),eP=d_,Object.defineProperty(R,"debounce",{enumerable:!0,get:function(){return eP.debounce}}),tP=v_,Object.defineProperty(R,"debounceTime",{enumerable:!0,get:function(){return tP.debounceTime}}),rP=w_,Object.defineProperty(R,"defaultIfEmpty",{enumerable:!0,get:function(){return rP.defaultIfEmpty}}),nP=A,Object.defineProperty(R,"delay",{enumerable:!0,get:function(){return nP.delay}}),oP=T_,Object.defineProperty(R,"delayWhen",{enumerable:!0,get:function(){return oP.delayWhen}}),iP=H_,Object.defineProperty(R,"dematerialize",{enumerable:!0,get:function(){return iP.dematerialize}}),uP=Z_,Object.defineProperty(R,"distinct",{enumerable:!0,get:function(){return uP.distinct}}),aP=ev,Object.defineProperty(R,"distinctUntilChanged",{enumerable:!0,get:function(){return aP.distinctUntilChanged}}),sP=iv,Object.defineProperty(R,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return sP.distinctUntilKeyChanged}}),cP=av,Object.defineProperty(R,"elementAt",{enumerable:!0,get:function(){return cP.elementAt}}),lP=vv,Object.defineProperty(R,"endWith",{enumerable:!0,get:function(){return lP.endWith}}),fP=Ev,Object.defineProperty(R,"every",{enumerable:!0,get:function(){return fP.every}}),pP=Sv,Object.defineProperty(R,"exhaust",{enumerable:!0,get:function(){return pP.exhaust}}),dP=jv,Object.defineProperty(R,"exhaustAll",{enumerable:!0,get:function(){return dP.exhaustAll}}),hP=Cv,Object.defineProperty(R,"exhaustMap",{enumerable:!0,get:function(){return hP.exhaustMap}}),bP=xv,Object.defineProperty(R,"expand",{enumerable:!0,get:function(){return bP.expand}}),yP=Hh,Object.defineProperty(R,"filter",{enumerable:!0,get:function(){return yP.filter}}),_P=Uv,Object.defineProperty(R,"finalize",{enumerable:!0,get:function(){return _P.finalize}}),vP=Bv,Object.defineProperty(R,"find",{enumerable:!0,get:function(){return vP.find}}),mP=zv,Object.defineProperty(R,"findIndex",{enumerable:!0,get:function(){return mP.findIndex}}),gP=Yv,Object.defineProperty(R,"first",{enumerable:!0,get:function(){return gP.first}}),OP=em,Object.defineProperty(R,"groupBy",{enumerable:!0,get:function(){return OP.groupBy}}),wP=R_,Object.defineProperty(R,"ignoreElements",{enumerable:!0,get:function(){return wP.ignoreElements}}),EP=um,Object.defineProperty(R,"isEmpty",{enumerable:!0,get:function(){return EP.isEmpty}}),PP=cm,Object.defineProperty(R,"last",{enumerable:!0,get:function(){return PP.last}}),TP=Dp,Object.defineProperty(R,"map",{enumerable:!0,get:function(){return TP.map}}),SP=N_,Object.defineProperty(R,"mapTo",{enumerable:!0,get:function(){return SP.mapTo}}),jP=Om,Object.defineProperty(R,"materialize",{enumerable:!0,get:function(){return jP.materialize}}),CP=Tm,Object.defineProperty(R,"max",{enumerable:!0,get:function(){return CP.max}}),IP=md,Object.defineProperty(R,"mergeAll",{enumerable:!0,get:function(){return IP.mergeAll}}),RP=Cm,Object.defineProperty(R,"flatMap",{enumerable:!0,get:function(){return RP.flatMap}}),AP=gd,Object.defineProperty(R,"mergeMap",{enumerable:!0,get:function(){return AP.mergeMap}}),kP=Im,Object.defineProperty(R,"mergeMapTo",{enumerable:!0,get:function(){return kP.mergeMapTo}}),MP=km,Object.defineProperty(R,"mergeScan",{enumerable:!0,get:function(){return MP.mergeScan}}),NP=Od,Object.defineProperty(R,"mergeWith",{enumerable:!0,get:function(){return NP.mergeWith}}),xP=Hm,Object.defineProperty(R,"min",{enumerable:!0,get:function(){return xP.min}}),DP=Km,Object.defineProperty(R,"multicast",{enumerable:!0,get:function(){return DP.multicast}}),LP=v,Object.defineProperty(R,"observeOn",{enumerable:!0,get:function(){return LP.observeOn}}),UP=Jm,Object.defineProperty(R,"onErrorResumeNextWith",{enumerable:!0,get:function(){return UP.onErrorResumeNextWith}}),FP=o0,Object.defineProperty(R,"pairwise",{enumerable:!0,get:function(){return FP.pairwise}}),BP=a0,Object.defineProperty(R,"pluck",{enumerable:!0,get:function(){return BP.pluck}}),VP=c0,Object.defineProperty(R,"publish",{enumerable:!0,get:function(){return VP.publish}}),qP=d0,Object.defineProperty(R,"publishBehavior",{enumerable:!0,get:function(){return qP.publishBehavior}}),WP=y0,Object.defineProperty(R,"publishLast",{enumerable:!0,get:function(){return WP.publishLast}}),zP=m0,Object.defineProperty(R,"publishReplay",{enumerable:!0,get:function(){return zP.publishReplay}}),HP=E0,Object.defineProperty(R,"raceWith",{enumerable:!0,get:function(){return HP.raceWith}}),GP=dy,Object.defineProperty(R,"reduce",{enumerable:!0,get:function(){return GP.reduce}}),YP=I0,Object.defineProperty(R,"repeat",{enumerable:!0,get:function(){return YP.repeat}}),KP=x0,Object.defineProperty(R,"repeatWhen",{enumerable:!0,get:function(){return KP.repeatWhen}}),ZP=B0,Object.defineProperty(R,"retry",{enumerable:!0,get:function(){return ZP.retry}}),QP=G0,Object.defineProperty(R,"retryWhen",{enumerable:!0,get:function(){return QP.retryWhen}}),XP=zn,Object.defineProperty(R,"refCount",{enumerable:!0,get:function(){return XP.refCount}}),JP=X0,Object.defineProperty(R,"sample",{enumerable:!0,get:function(){return JP.sample}}),$P=rg,Object.defineProperty(R,"sampleTime",{enumerable:!0,get:function(){return $P.sampleTime}}),eT=ug,Object.defineProperty(R,"scan",{enumerable:!0,get:function(){return eT.scan}}),tT=hy,Object.defineProperty(R,"sequenceEqual",{enumerable:!0,get:function(){return tT.sequenceEqual}}),rT=dg,Object.defineProperty(R,"share",{enumerable:!0,get:function(){return rT.share}}),nT=Og,Object.defineProperty(R,"shareReplay",{enumerable:!0,get:function(){return nT.shareReplay}}),oT=Pg,Object.defineProperty(R,"single",{enumerable:!0,get:function(){return oT.single}}),iT=Rg,Object.defineProperty(R,"skip",{enumerable:!0,get:function(){return iT.skip}}),uT=kg,Object.defineProperty(R,"skipLast",{enumerable:!0,get:function(){return uT.skipLast}}),aT=Dg,Object.defineProperty(R,"skipUntil",{enumerable:!0,get:function(){return aT.skipUntil}}),sT=Vg,Object.defineProperty(R,"skipWhile",{enumerable:!0,get:function(){return sT.skipWhile}}),cT=zg,Object.defineProperty(R,"startWith",{enumerable:!0,get:function(){return cT.startWith}}),lT=Rf,Object.defineProperty(R,"subscribeOn",{enumerable:!0,get:function(){return lT.subscribeOn}}),fT=Kg,Object.defineProperty(R,"switchAll",{enumerable:!0,get:function(){return fT.switchAll}}),pT=Zg,Object.defineProperty(R,"switchMap",{enumerable:!0,get:function(){return pT.switchMap}}),dT=tO,Object.defineProperty(R,"switchMapTo",{enumerable:!0,get:function(){return dT.switchMapTo}}),hT=oO,Object.defineProperty(R,"switchScan",{enumerable:!0,get:function(){return hT.switchScan}}),bT=S_,Object.defineProperty(R,"take",{enumerable:!0,get:function(){return bT.take}}),yT=lm,Object.defineProperty(R,"takeLast",{enumerable:!0,get:function(){return yT.takeLast}}),_T=aO,Object.defineProperty(R,"takeUntil",{enumerable:!0,get:function(){return _T.takeUntil}}),vT=pO,Object.defineProperty(R,"takeWhile",{enumerable:!0,get:function(){return vT.takeWhile}}),mT=bO,Object.defineProperty(R,"tap",{enumerable:!0,get:function(){return mT.tap}}),gT=y,Object.defineProperty(R,"throttle",{enumerable:!0,get:function(){return gT.throttle}}),OT=EO,Object.defineProperty(R,"throttleTime",{enumerable:!0,get:function(){return OT.throttleTime}}),wT=sv,Object.defineProperty(R,"throwIfEmpty",{enumerable:!0,get:function(){return wT.throwIfEmpty}}),ET=jO,Object.defineProperty(R,"timeInterval",{enumerable:!0,get:function(){return ET.timeInterval}}),PT=$l,Object.defineProperty(R,"timeout",{enumerable:!0,get:function(){return PT.timeout}}),TT=kO,Object.defineProperty(R,"timeoutWith",{enumerable:!0,get:function(){return TT.timeoutWith}}),ST=Ff,Object.defineProperty(R,"timestamp",{enumerable:!0,get:function(){return ST.timestamp}}),jT=py,Object.defineProperty(R,"toArray",{enumerable:!0,get:function(){return jT.toArray}}),CT=o,Object.defineProperty(R,"window",{enumerable:!0,get:function(){return CT.window}}),IT=WO,Object.defineProperty(R,"windowCount",{enumerable:!0,get:function(){return IT.windowCount}}),RT=KO,Object.defineProperty(R,"windowTime",{enumerable:!0,get:function(){return RT.windowTime}}),AT=Sf,Object.defineProperty(R,"windowToggle",{enumerable:!0,get:function(){return AT.windowToggle}}),kT=O,Object.defineProperty(R,"windowWhen",{enumerable:!0,get:function(){return kT.windowWhen}}),MT=bw,Object.defineProperty(R,"withLatestFrom",{enumerable:!0,get:function(){return MT.withLatestFrom}}),NT=p,Object.defineProperty(R,"zipAll",{enumerable:!0,get:function(){return NT.zipAll}}),xT=I,Object.defineProperty(R,"zipWith",{enumerable:!0,get:function(){return xT.zipWith}});var E={},Wt={},FT=(Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.partition=void 0,zh),BT=Hh;Wt.partition=function(t,r){return function(e){return[BT.filter(t,r)(e),BT.filter(FT.not(t,r))(e)]}};var VT,qT,WT,zT,HT,GT,YT,KT,ZT,QT,XT,JT,$T,eS,tS,rS,nS,oS,iS,uS,aS,sS,cS,lS,fS,pS,dS,hS,bS,yS,_S,vS,mS,gS,OS,wS,ES,PS,TS,SS,jS,CS,IS,RS,AS,kS,MS,NS,xS,DS,LS,US,FS,BS,VS,qS,WS,zS,HS,GS,YS,KS,ZS,QS,XS,JS,$S,e1,t1,r1,n1,o1,i1,u1,a1,s1,c1,l1,f1,p1,d1,h1,b1,y1,_1,v1,m1,g1,O1,w1,E1,P1,T1,S1,j1,C1,I1,R1,A1,k1,M1,N1,x1,D1,L1,U1,F1,B1,V1,q1,W1,z1,H1,i={},G1=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Y1=r&&r.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},K1=(Object.defineProperty(i,"__esModule",{value:!0}),i.race=void 0,Nh),Z1=E0;i.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Z1.raceWith.apply(void 0,Y1([],G1(K1.argsOrArgArray(e))))},j=E,Object.defineProperty(j,"__esModule",{value:!0}),j.mergeAll=j.merge=j.max=j.materialize=j.mapTo=j.map=j.last=j.isEmpty=j.ignoreElements=j.groupBy=j.first=j.findIndex=j.find=j.finalize=j.filter=j.expand=j.exhaustMap=j.exhaustAll=j.exhaust=j.every=j.endWith=j.elementAt=j.distinctUntilKeyChanged=j.distinctUntilChanged=j.distinct=j.dematerialize=j.delayWhen=j.delay=j.defaultIfEmpty=j.debounceTime=j.debounce=j.count=j.connect=j.concatWith=j.concatMapTo=j.concatMap=j.concatAll=j.concat=j.combineLatestWith=j.combineLatest=j.combineLatestAll=j.combineAll=j.catchError=j.bufferWhen=j.bufferToggle=j.bufferTime=j.bufferCount=j.buffer=j.auditTime=j.audit=void 0,j.timeInterval=j.throwIfEmpty=j.throttleTime=j.throttle=j.tap=j.takeWhile=j.takeUntil=j.takeLast=j.take=j.switchScan=j.switchMapTo=j.switchMap=j.switchAll=j.subscribeOn=j.startWith=j.skipWhile=j.skipUntil=j.skipLast=j.skip=j.single=j.shareReplay=j.share=j.sequenceEqual=j.scan=j.sampleTime=j.sample=j.refCount=j.retryWhen=j.retry=j.repeatWhen=j.repeat=j.reduce=j.raceWith=j.race=j.publishReplay=j.publishLast=j.publishBehavior=j.publish=j.pluck=j.partition=j.pairwise=j.onErrorResumeNext=j.observeOn=j.multicast=j.min=j.mergeWith=j.mergeScan=j.mergeMapTo=j.mergeMap=j.flatMap=void 0,j.zipWith=j.zipAll=j.zip=j.withLatestFrom=j.windowWhen=j.windowToggle=j.windowTime=j.windowCount=j.window=j.toArray=j.timestamp=j.timeoutWith=j.timeout=void 0,VT=gb,Object.defineProperty(j,"audit",{enumerable:!0,get:function(){return VT.audit}}),qT=Pb,Object.defineProperty(j,"auditTime",{enumerable:!0,get:function(){return qT.auditTime}}),WT=Cb,Object.defineProperty(j,"buffer",{enumerable:!0,get:function(){return WT.buffer}}),zT=Mb,Object.defineProperty(j,"bufferCount",{enumerable:!0,get:function(){return zT.bufferCount}}),HT=Ub,Object.defineProperty(j,"bufferTime",{enumerable:!0,get:function(){return HT.bufferTime}}),GT=Yb,Object.defineProperty(j,"bufferToggle",{enumerable:!0,get:function(){return GT.bufferToggle}}),YT=ty,Object.defineProperty(j,"bufferWhen",{enumerable:!0,get:function(){return YT.bufferWhen}}),KT=uy,Object.defineProperty(j,"catchError",{enumerable:!0,get:function(){return KT.catchError}}),ZT=ly,Object.defineProperty(j,"combineAll",{enumerable:!0,get:function(){return ZT.combineAll}}),QT=fy,Object.defineProperty(j,"combineLatestAll",{enumerable:!0,get:function(){return QT.combineLatestAll}}),XT=Iy,Object.defineProperty(j,"combineLatest",{enumerable:!0,get:function(){return XT.combineLatest}}),JT=Cy,Object.defineProperty(j,"combineLatestWith",{enumerable:!0,get:function(){return JT.combineLatestWith}}),$T=Ky,Object.defineProperty(j,"concat",{enumerable:!0,get:function(){return $T.concat}}),eS=vd,Object.defineProperty(j,"concatAll",{enumerable:!0,get:function(){return eS.concatAll}}),tS=xp,Object.defineProperty(j,"concatMap",{enumerable:!0,get:function(){return tS.concatMap}}),rS=zy,Object.defineProperty(j,"concatMapTo",{enumerable:!0,get:function(){return rS.concatMapTo}}),nS=Yy,Object.defineProperty(j,"concatWith",{enumerable:!0,get:function(){return nS.concatWith}}),oS=o_,Object.defineProperty(j,"connect",{enumerable:!0,get:function(){return oS.connect}}),iS=i_,Object.defineProperty(j,"count",{enumerable:!0,get:function(){return iS.count}}),uS=d_,Object.defineProperty(j,"debounce",{enumerable:!0,get:function(){return uS.debounce}}),aS=v_,Object.defineProperty(j,"debounceTime",{enumerable:!0,get:function(){return aS.debounceTime}}),sS=w_,Object.defineProperty(j,"defaultIfEmpty",{enumerable:!0,get:function(){return sS.defaultIfEmpty}}),cS=A,Object.defineProperty(j,"delay",{enumerable:!0,get:function(){return cS.delay}}),lS=T_,Object.defineProperty(j,"delayWhen",{enumerable:!0,get:function(){return lS.delayWhen}}),fS=H_,Object.defineProperty(j,"dematerialize",{enumerable:!0,get:function(){return fS.dematerialize}}),pS=Z_,Object.defineProperty(j,"distinct",{enumerable:!0,get:function(){return pS.distinct}}),dS=ev,Object.defineProperty(j,"distinctUntilChanged",{enumerable:!0,get:function(){return dS.distinctUntilChanged}}),hS=iv,Object.defineProperty(j,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return hS.distinctUntilKeyChanged}}),bS=av,Object.defineProperty(j,"elementAt",{enumerable:!0,get:function(){return bS.elementAt}}),yS=vv,Object.defineProperty(j,"endWith",{enumerable:!0,get:function(){return yS.endWith}}),_S=Ev,Object.defineProperty(j,"every",{enumerable:!0,get:function(){return _S.every}}),vS=Sv,Object.defineProperty(j,"exhaust",{enumerable:!0,get:function(){return vS.exhaust}}),mS=jv,Object.defineProperty(j,"exhaustAll",{enumerable:!0,get:function(){return mS.exhaustAll}}),gS=Cv,Object.defineProperty(j,"exhaustMap",{enumerable:!0,get:function(){return gS.exhaustMap}}),OS=xv,Object.defineProperty(j,"expand",{enumerable:!0,get:function(){return OS.expand}}),wS=Hh,Object.defineProperty(j,"filter",{enumerable:!0,get:function(){return wS.filter}}),ES=Uv,Object.defineProperty(j,"finalize",{enumerable:!0,get:function(){return ES.finalize}}),PS=Bv,Object.defineProperty(j,"find",{enumerable:!0,get:function(){return PS.find}}),TS=zv,Object.defineProperty(j,"findIndex",{enumerable:!0,get:function(){return TS.findIndex}}),SS=Yv,Object.defineProperty(j,"first",{enumerable:!0,get:function(){return SS.first}}),jS=em,Object.defineProperty(j,"groupBy",{enumerable:!0,get:function(){return jS.groupBy}}),CS=R_,Object.defineProperty(j,"ignoreElements",{enumerable:!0,get:function(){return CS.ignoreElements}}),IS=um,Object.defineProperty(j,"isEmpty",{enumerable:!0,get:function(){return IS.isEmpty}}),RS=cm,Object.defineProperty(j,"last",{enumerable:!0,get:function(){return RS.last}}),AS=Dp,Object.defineProperty(j,"map",{enumerable:!0,get:function(){return AS.map}}),kS=N_,Object.defineProperty(j,"mapTo",{enumerable:!0,get:function(){return kS.mapTo}}),MS=Om,Object.defineProperty(j,"materialize",{enumerable:!0,get:function(){return MS.materialize}}),NS=Tm,Object.defineProperty(j,"max",{enumerable:!0,get:function(){return NS.max}}),xS=xm,Object.defineProperty(j,"merge",{enumerable:!0,get:function(){return xS.merge}}),DS=md,Object.defineProperty(j,"mergeAll",{enumerable:!0,get:function(){return DS.mergeAll}}),LS=Cm,Object.defineProperty(j,"flatMap",{enumerable:!0,get:function(){return LS.flatMap}}),US=gd,Object.defineProperty(j,"mergeMap",{enumerable:!0,get:function(){return US.mergeMap}}),FS=Im,Object.defineProperty(j,"mergeMapTo",{enumerable:!0,get:function(){return FS.mergeMapTo}}),BS=km,Object.defineProperty(j,"mergeScan",{enumerable:!0,get:function(){return BS.mergeScan}}),VS=Od,Object.defineProperty(j,"mergeWith",{enumerable:!0,get:function(){return VS.mergeWith}}),qS=Hm,Object.defineProperty(j,"min",{enumerable:!0,get:function(){return qS.min}}),WS=Km,Object.defineProperty(j,"multicast",{enumerable:!0,get:function(){return WS.multicast}}),zS=v,Object.defineProperty(j,"observeOn",{enumerable:!0,get:function(){return zS.observeOn}}),HS=Jm,Object.defineProperty(j,"onErrorResumeNext",{enumerable:!0,get:function(){return HS.onErrorResumeNext}}),GS=o0,Object.defineProperty(j,"pairwise",{enumerable:!0,get:function(){return GS.pairwise}}),YS=Wt,Object.defineProperty(j,"partition",{enumerable:!0,get:function(){return YS.partition}}),KS=a0,Object.defineProperty(j,"pluck",{enumerable:!0,get:function(){return KS.pluck}}),ZS=c0,Object.defineProperty(j,"publish",{enumerable:!0,get:function(){return ZS.publish}}),QS=d0,Object.defineProperty(j,"publishBehavior",{enumerable:!0,get:function(){return QS.publishBehavior}}),XS=y0,Object.defineProperty(j,"publishLast",{enumerable:!0,get:function(){return XS.publishLast}}),JS=m0,Object.defineProperty(j,"publishReplay",{enumerable:!0,get:function(){return JS.publishReplay}}),$S=i,Object.defineProperty(j,"race",{enumerable:!0,get:function(){return $S.race}}),e1=E0,Object.defineProperty(j,"raceWith",{enumerable:!0,get:function(){return e1.raceWith}}),t1=dy,Object.defineProperty(j,"reduce",{enumerable:!0,get:function(){return t1.reduce}}),r1=I0,Object.defineProperty(j,"repeat",{enumerable:!0,get:function(){return r1.repeat}}),n1=x0,Object.defineProperty(j,"repeatWhen",{enumerable:!0,get:function(){return n1.repeatWhen}}),o1=B0,Object.defineProperty(j,"retry",{enumerable:!0,get:function(){return o1.retry}}),i1=G0,Object.defineProperty(j,"retryWhen",{enumerable:!0,get:function(){return i1.retryWhen}}),u1=zn,Object.defineProperty(j,"refCount",{enumerable:!0,get:function(){return u1.refCount}}),a1=X0,Object.defineProperty(j,"sample",{enumerable:!0,get:function(){return a1.sample}}),s1=rg,Object.defineProperty(j,"sampleTime",{enumerable:!0,get:function(){return s1.sampleTime}}),c1=ug,Object.defineProperty(j,"scan",{enumerable:!0,get:function(){return c1.scan}}),l1=hy,Object.defineProperty(j,"sequenceEqual",{enumerable:!0,get:function(){return l1.sequenceEqual}}),f1=dg,Object.defineProperty(j,"share",{enumerable:!0,get:function(){return f1.share}}),p1=Og,Object.defineProperty(j,"shareReplay",{enumerable:!0,get:function(){return p1.shareReplay}}),d1=Pg,Object.defineProperty(j,"single",{enumerable:!0,get:function(){return d1.single}}),h1=Rg,Object.defineProperty(j,"skip",{enumerable:!0,get:function(){return h1.skip}}),b1=kg,Object.defineProperty(j,"skipLast",{enumerable:!0,get:function(){return b1.skipLast}}),y1=Dg,Object.defineProperty(j,"skipUntil",{enumerable:!0,get:function(){return y1.skipUntil}}),_1=Vg,Object.defineProperty(j,"skipWhile",{enumerable:!0,get:function(){return _1.skipWhile}}),v1=zg,Object.defineProperty(j,"startWith",{enumerable:!0,get:function(){return v1.startWith}}),m1=Rf,Object.defineProperty(j,"subscribeOn",{enumerable:!0,get:function(){return m1.subscribeOn}}),g1=Kg,Object.defineProperty(j,"switchAll",{enumerable:!0,get:function(){return g1.switchAll}}),O1=Zg,Object.defineProperty(j,"switchMap",{enumerable:!0,get:function(){return O1.switchMap}}),w1=tO,Object.defineProperty(j,"switchMapTo",{enumerable:!0,get:function(){return w1.switchMapTo}}),E1=oO,Object.defineProperty(j,"switchScan",{enumerable:!0,get:function(){return E1.switchScan}}),P1=S_,Object.defineProperty(j,"take",{enumerable:!0,get:function(){return P1.take}}),T1=lm,Object.defineProperty(j,"takeLast",{enumerable:!0,get:function(){return T1.takeLast}}),S1=aO,Object.defineProperty(j,"takeUntil",{enumerable:!0,get:function(){return S1.takeUntil}}),j1=pO,Object.defineProperty(j,"takeWhile",{enumerable:!0,get:function(){return j1.takeWhile}}),C1=bO,Object.defineProperty(j,"tap",{enumerable:!0,get:function(){return C1.tap}}),I1=y,Object.defineProperty(j,"throttle",{enumerable:!0,get:function(){return I1.throttle}}),R1=EO,Object.defineProperty(j,"throttleTime",{enumerable:!0,get:function(){return R1.throttleTime}}),A1=sv,Object.defineProperty(j,"throwIfEmpty",{enumerable:!0,get:function(){return A1.throwIfEmpty}}),k1=jO,Object.defineProperty(j,"timeInterval",{enumerable:!0,get:function(){return k1.timeInterval}}),M1=$l,Object.defineProperty(j,"timeout",{enumerable:!0,get:function(){return M1.timeout}}),N1=kO,Object.defineProperty(j,"timeoutWith",{enumerable:!0,get:function(){return N1.timeoutWith}}),x1=Ff,Object.defineProperty(j,"timestamp",{enumerable:!0,get:function(){return x1.timestamp}}),D1=py,Object.defineProperty(j,"toArray",{enumerable:!0,get:function(){return D1.toArray}}),L1=o,Object.defineProperty(j,"window",{enumerable:!0,get:function(){return L1.window}}),U1=WO,Object.defineProperty(j,"windowCount",{enumerable:!0,get:function(){return U1.windowCount}}),F1=KO,Object.defineProperty(j,"windowTime",{enumerable:!0,get:function(){return F1.windowTime}}),B1=Sf,Object.defineProperty(j,"windowToggle",{enumerable:!0,get:function(){return B1.windowToggle}}),V1=O,Object.defineProperty(j,"windowWhen",{enumerable:!0,get:function(){return V1.windowWhen}}),q1=bw,Object.defineProperty(j,"withLatestFrom",{enumerable:!0,get:function(){return q1.withLatestFrom}}),W1=b,Object.defineProperty(j,"zip",{enumerable:!0,get:function(){return W1.zip}}),z1=p,Object.defineProperty(j,"zipAll",{enumerable:!0,get:function(){return z1.zipAll}}),H1=I,Object.defineProperty(j,"zipWith",{enumerable:!0,get:function(){return H1.zipWith}});var C={},Q1=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},X1=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},J1=(Object.defineProperty(C,"__esModule",{value:!0}),e),$1=ln,ej=E,tj=0,rj=1,nj=2;function oj(e,t){e=e.pipe((0,ej.publishReplay)(1),(0,ej.refCount)());this._result=e,this._keys=e.pipe((0,ej.mergeMap)(function(e){return(0,$1.from)(e.keys())}),(0,ej.publishReplay)(1),(0,ej.refCount)()),this._records=void 0,this._controls=new ij,this._summary=new $1.ReplaySubject,this._state=t||tj}oj.prototype.keys=function(){return this._keys},oj.prototype.records=function(){var r=this,e=this._result.pipe((0,ej.mergeMap)(function(t){return new $1.Observable(function(e){return r._startStreaming({result:t,recordsObserver:e})})}));return e.push=function(){return r._push()},e},oj.prototype.consume=function(){var r=this;return this._result.pipe((0,ej.mergeMap)(function(t){return new $1.Observable(function(e){return r._startStreaming({result:t,summaryObserver:e})})}))},oj.prototype.pause=function(){this._controls.pause()},oj.prototype.resume=function(){return this._controls.resume()},oj.prototype.push=function(){return this._controls.push()},oj.prototype._startStreaming=function(e){var e=void 0===e?{}:e,t=e.result,r=e.recordsObserver,r=void 0===r?null:r,e=e.summaryObserver,e=void 0===e?null:e,n=[];return e&&n.push(this._summary.subscribe(e)),this._state<rj?(this._state=rj,this._setupRecordsStream(t),r?n.push(this._records.subscribe(r)):t._cancel(),n.push({unsubscribe:function(){t._cancel&&t._cancel()}})):r&&r.error((0,J1.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){n.forEach(function(e){return e.unsubscribe()})}},oj.prototype._toObservable=function(){var n=this;return new $1.Observable(function(r){n._result.subscribe({complete:function(){return r.complete()},next:function(e){return r.next(new oj((t=e,new $1.Observable(function(e){e.next(t),e.complete()}))),n._state);var t},error:function(e){return r.error(e)}})})},oj.prototype._setupRecordsStream=function(n){var t=this;return this._records||(this._records=function(o,i,u){var e=this;void 0===u&&(u=new ij);var a=new $1.Subject,s=function(n){return Q1(e,void 0,void 0,function(){var t,r;return X1(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),u.pushing=!0,[4,n];case 1:return t=e.sent(),r=t.done,t=t.value,r?(a.complete(),i.complete()):(a.next(t),u.paused||s(o.next()).catch(function(){})),[3,4];case 2:return r=e.sent(),a.error(r),i.error(r),[3,4];case 3:return u.pushing=!1,[7];case 4:return[2]}})})};function t(t){return Q1(this,void 0,void 0,function(){return X1(this,function(e){switch(e.label){case 0:return[4,s(o.next(t))];case 1:return e.sent(),[2]}})})}return(u.pusher=t)(),a}(n[Symbol.asyncIterator](),{complete:function(){return Q1(t,void 0,void 0,function(){var t,r;return X1(this,function(e){switch(e.label){case 0:return this._state=nj,r=(t=this._summary).next,[4,n.summary()];case 1:return r.apply(t,[e.sent()]),this._summary.complete(),[2]}})})},error:function(e){t._state=nj,t._summary.error(e)}},this._controls),this._records)},C.default=oj;uj.prototype.pause=function(){this._paused=!0},Object.defineProperty(uj.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(uj.prototype,"pushing",{get:function(){return this._pushing},set:function(e){this._pushing=e},enumerable:!1,configurable:!0}),uj.prototype.resume=function(){return Q1(this,void 0,void 0,function(){var t;return X1(this,function(e){switch(e.label){case 0:return t=this._paused,this._paused=!1,!t||this._pushing?[3,2]:[4,this._push()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},uj.prototype.push=function(){return Q1(this,void 0,void 0,function(){return X1(this,function(e){switch(e.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,e.sent()]}})})},Object.defineProperty(uj.prototype,"pusher",{get:function(){return this._push},set:function(e){this._push=e},enumerable:!1,configurable:!0});var ij=uj;function uj(e){void 0===e&&(e=function(){return Q1(t,void 0,void 0,function(){return X1(this,function(e){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=e}var sr={},gt=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},aj=(Object.defineProperty(sr,"__esModule",{value:!0}),ln),sj=gt(C);function cj(e){this._txc=e}gt(e),cj.prototype.run=function(e,r){var n=this;return new sj.default(new aj.Observable(function(t){try{t.next(n._txc.run(e,r)),t.complete()}catch(e){t.error(e)}return function(){}}))},cj.prototype.commit=function(){var e=this;return new aj.Observable(function(t){e._txc.commit().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},cj.prototype.rollback=function(){var e=this;return new aj.Observable(function(t){e._txc.rollback().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},cj.prototype.isOpen=function(){return this._txc.isOpen()},cj.prototype.close=function(){var e=this;return new aj.Observable(function(t){e._txc.close().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},sr.default=cj;G={},g=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function lj(e){e=e.run;this._run=e}Object.defineProperty(G,"__esModule",{value:!0}),g(C),g(sr),lj.fromTransaction=function(e){return new lj({run:e.run.bind(e)})},lj.prototype.run=function(e,t){return this._run(e,t)},G.default=lj;var T={},fj=(Object.defineProperty(T,"__esModule",{value:!0}),e),pj=ln,dj=E,hj=(fj.internal.logger.Logger,fj.error.SERVICE_UNAVAILABLE);function bj(e){var e=void 0===e?{}:e,t=e.maxRetryTimeout,r=e.initialDelay,r=void 0===r?1e3:r,n=e.delayMultiplier,n=void 0===n?2:n,o=e.delayJitter,o=void 0===o?.2:o,e=e.logger,e=void 0===e?null:e;this._maxRetryTimeout=yj(void 0===t?3e4:t,3e4),this._initialDelay=yj(r,1e3),this._delayMultiplier=yj(n,2),this._delayJitter=yj(o,.2),this._logger=e}function yj(e,t){return e||0===e?e:t}bj.prototype.retry=function(e){var a=this;return e.pipe((0,dj.retryWhen)(function(e){var n=[],o=Date.now(),i=1,u=a._initialDelay;return e.pipe((0,dj.mergeMap)(function(e){if(!(0,fj.isRetryableError)(e))return(0,pj.throwError)(function(){return e});var t;if(n.push(e),2<=i&&Date.now()-o>=a._maxRetryTimeout)return(t=(0,fj.newError)("Failed after retried for ".concat(i," times in ").concat(a._maxRetryTimeout," ms. Make sure that your database is online and retry again."),hj)).seenErrors=n,(0,pj.throwError)(function(){return t});var r=a._computeNextDelay(u);return u*=a._delayMultiplier,i++,a._logger&&a._logger.warn("Transaction failed and will be retried in ".concat(r)),(0,pj.of)(1).pipe((0,dj.delay)(r))}))}))},bj.prototype._computeNextDelay=function(e){var t=e*this._delayJitter;return e-t+2*t*Math.random()},T.default=bj;var rc=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_j=(Object.defineProperty(w,"__esModule",{value:!0}),ln),vj=E,mj=rc(C),t=e,gj=rc(sr),Oj=rc(G),wj=rc(T),n=t.internal.constants,Ej=n.ACCESS_MODE_READ,Pj=n.ACCESS_MODE_WRITE,Tj=n.TELEMETRY_APIS,Sj=t.internal.txConfig.TxConfig;function jj(e){var e=void 0===e?{}:e,t=e.session,r=e.config,e=e.log;this._session=t,this._retryLogic=function(e){e=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new wj.default({maxRetryTimeout:e})}(r),this._log=e}jj.prototype.run=function(e,r,n){var o=this;return new mj.default(new _j.Observable(function(t){try{t.next(o._session.run(e,r,n)),t.complete()}catch(e){t.error(e)}return function(){}}))},jj.prototype.beginTransaction=function(e){return this._beginTransaction(this._session._mode,e,{api:Tj.UNMANAGED_TRANSACTION})},jj.prototype.executeRead=function(e,t){return this._executeInTransaction(Ej,e,t)},jj.prototype.executeWrite=function(e,t){return this._executeInTransaction(Pj,e,t)},jj.prototype._executeInTransaction=function(e,t,r){return this._runTransaction(e,t,r,function(e){return new Oj.default({run:e.run.bind(e)})})},jj.prototype.close=function(){var e=this;return new _j.Observable(function(t){e._session.close().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},jj.prototype[Symbol.asyncDispose]=function(){return this.close()},jj.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},jj.prototype._beginTransaction=function(e,t,r){var n=this,o=Sj.empty();return t&&(o=new Sj(t,this._log)),new _j.Observable(function(t){try{n._session._beginTransaction(e,o,r).then(function(e){t.next(new gj.default(e)),t.complete()}).catch(function(e){return t.error(e)})}catch(e){t.error(e)}return function(){}})},jj.prototype._runTransaction=function(e,r,t,n){var o=this,i=(void 0===n&&(n=function(e){return e}),Sj.empty()),u=(t&&(i=new Sj(t)),{apiTelemetryConfig:{api:Tj.MANAGED_TRANSACTION,onTelemetrySuccess:function(){u.apiTelemetryConfig=void 0}}});return this._retryLogic.retry((0,_j.of)(1).pipe((0,vj.mergeMap)(function(){return o._beginTransaction(e,i,u.apiTelemetryConfig)}),(0,vj.mergeMap)(function(t){return(0,_j.defer)(function(){try{return r(n(t))}catch(e){return(0,_j.throwError)(function(){return e})}}).pipe((0,vj.catchError)(function(e){return t.rollback().pipe((0,vj.concatWith)((0,_j.throwError)(function(){return e})))}),(0,vj.concatWith)(t.commit()))})))},w.default=jj;var Cj,Ij,Hn=r&&r.__extends||(Cj=function(e,t){return(Cj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Cj(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),P=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Gt=(Object.defineProperty(U,"__esModule",{value:!0}),U.WRITE=U.READ=U.Driver=void 0,e),Rj=P(w),Aj=Gt.internal.constants.FETCH_ALL,h=Gt.driver.READ,kj=Gt.driver.WRITE,u=(U.READ=h,U.WRITE=kj,Hn(Mj,Ij=Gt.Driver),Mj.prototype.rxSession=function(e){var e=void 0===e?{}:e,t=e.defaultAccessMode,r=e.bookmarks,n=e.database,o=e.fetchSize,i=e.impersonatedUser,u=e.bookmarkManager,a=e.notificationFilter,e=e.auth;return new Rj.default({session:this._newSession({defaultAccessMode:void 0===t?kj:t,bookmarkOrBookmarks:r,database:void 0===n?"":n,impersonatedUser:i,auth:e,reactive:!1,fetchSize:function(e,t){e=parseInt(e,10);{if(0<e||e===Aj)return e;if(0===e||e<0)throw new Error("The fetch size can only be a positive value or ".concat(Aj," for ALL. However fetchSize = ").concat(e));return t}}(o,this._config.fetchSize),bookmarkManager:u,notificationFilter:a,log:this._log}),config:this._config,log:this._log})},Mj);function Mj(){return null!==Ij&&Ij.apply(this,arguments)||this}U.Driver=u,U.default=u;l={},Object.defineProperty(l,"__esModule",{value:!0}),l.default="6.0.0",jt={},Zl={},ql={};function Nj(){}Object.defineProperty(ql,"__esModule",{value:!0}),Nj.prototype.selectReader=function(e){throw new Error("Abstract function")},Nj.prototype.selectWriter=function(e){throw new Error("Abstract function")},ql.default=Nj;Hl={},Yl={};function xj(e){this._offset=e||0}Object.defineProperty(Yl,"__esModule",{value:!0}),xj.prototype.next=function(e){if(0===e)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%e},Yl.default=xj;var Dj,Lj,Bl=r&&r.__extends||(Dj=function(e,t){return(Dj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Dj(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Kf=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Uj=(Object.defineProperty(Hl,"__esModule",{value:!0}),Kf(Yl)),m=Kf(ql),xf=(Lj=m.default,Bl(Fj,Lj),Fj.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},Fj.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},Fj.prototype._select=function(e,t){var r=e.length;if(0===r)return null;var n=t.next(r),o=n,i=null,u=Number.MAX_SAFE_INTEGER;do{var a=e[o],s=this._connectionPool.activeResourceCount(a)}while(s<u&&(i=a,u=s),o===r-1?o=0:o++,o!==n);return i},Fj);function Fj(e){var t=Lj.call(this)||this;return t._readersIndex=new Uj.default,t._writersIndex=new Uj.default,t._connectionPool=e,t}Hl.default=xf;_=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.LeastConnectedLoadBalancingStrategy=Zl.LoadBalancingStrategy=void 0,Kl=_(ql),Zl.LoadBalancingStrategy=Kl.default,Jp=_(Hl),Zl.LeastConnectedLoadBalancingStrategy=Jp.default,Zl.default=Jp.default,F={},_d={},Dd={},Ld={},zd={},Dl={},ed={},id={byteLength:function(e){var e=Gj(e),t=e[0],e=e[1];return 3*(t+e)/4-e}};id.toByteArray=function(e){var t,r,n=Gj(e),o=n[0],n=n[1],i=new qj(function(e,t){return 3*(e+t)/4-t}(o,n)),u=0,a=0<n?o-4:o;for(r=0;r<a;r+=4)t=Vj[e.charCodeAt(r)]<<18|Vj[e.charCodeAt(r+1)]<<12|Vj[e.charCodeAt(r+2)]<<6|Vj[e.charCodeAt(r+3)],i[u++]=t>>16&255,i[u++]=t>>8&255,i[u++]=255&t;2===n&&(t=Vj[e.charCodeAt(r)]<<2|Vj[e.charCodeAt(r+1)]>>4,i[u++]=255&t);1===n&&(t=Vj[e.charCodeAt(r)]<<10|Vj[e.charCodeAt(r+1)]<<4|Vj[e.charCodeAt(r+2)]>>2,i[u++]=t>>8&255,i[u++]=255&t);return i},id.fromByteArray=function(e){for(var t,r=e.length,n=r%3,o=[],i=0,u=r-n;i<u;i+=16383)o.push(function(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(function(e){return Bj[e>>18&63]+Bj[e>>12&63]+Bj[e>>6&63]+Bj[63&e]}(n));return o.join("")}(e,i,u<i+16383?u:i+16383));1==n?(t=e[r-1],o.push(Bj[t>>2]+Bj[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],o.push(Bj[t>>10]+Bj[t>>4&63]+Bj[t<<2&63]+"="));return o.join("")};for(var Bj=[],Vj=[],qj="undefined"!=typeof Uint8Array?Uint8Array:Array,Wj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zj=0,Hj=Wj.length;zj<Hj;++zj)Bj[zj]=Wj[zj],Vj[Wj.charCodeAt(zj)]=zj;function Gj(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}Vj["-".charCodeAt(0)]=62,Vj["_".charCodeAt(0)]=63;Fl={read:function(e,t,r,n,o){var i,u,a=8*o-n-1,s=(1<<a)-1,c=s>>1,l=-7,f=r?o-1:0,p=r?-1:1,o=e[t+f];for(f+=p,i=o&(1<<-l)-1,o>>=-l,l+=a;0<l;i=256*i+e[t+f],f+=p,l-=8);for(u=i&(1<<-l)-1,i>>=-l,l+=n;0<l;u=256*u+e[t+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===s)return u?NaN:1/0*(o?-1:1);u+=Math.pow(2,n),i-=c}return(o?-1:1)*u*Math.pow(2,i-n)},write:function(e,t,r,n,o,i){var u,a,s=8*i-o-1,c=(1<<s)-1,l=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,u=c):(u=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-u))<1&&(u--,n*=2),2<=(t+=1<=u+l?f/n:f*Math.pow(2,1-l))*n&&(u++,n/=2),c<=u+l?(a=0,u=c):1<=u+l?(a=(t*n-1)*Math.pow(2,o),u+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),u=0));8<=o;e[r+p]=255&a,p+=d,a/=256,o-=8);for(u=u<<o|a,s+=o;0<s;e[r+p]=255&u,p+=d,u/=256,s-=8);e[r+p-d]|=128*i}};{var Yj=ed;const WL=id,zL=Fl,HL=(Vf="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,Yj.Buffer=k,Yj.SlowBuffer=function(e){+e!=e&&(e=0);return k.alloc(+e)},Yj.INSPECT_MAX_BYTES=50,2147483647);function Kj(e){if(e>HL)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,k.prototype),e}function k(e,t,r){if("number"!=typeof e)return Zj(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return Xj(e)}function Zj(t,r,e){if("string"==typeof t){var n=t;var o=r;"string"==typeof o&&""!==o||(o="utf8");if(!k.isEncoding(o))throw new TypeError("Unknown encoding: "+o);var i=0|tC(n,o);let e=Kj(i);n=e.write(n,o);n!==i&&(e=e.slice(0,n));return e}if(ArrayBuffer.isView(t))return PC(o=t,Uint8Array)?$j((i=new Uint8Array(o)).buffer,i.byteOffset,i.byteLength):Jj(o);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(PC(t,ArrayBuffer)||t&&PC(t.buffer,ArrayBuffer))return $j(t,r,e);if("undefined"!=typeof SharedArrayBuffer&&(PC(t,SharedArrayBuffer)||t&&PC(t.buffer,SharedArrayBuffer)))return $j(t,r,e);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return k.from(n,r,e);var u=function(e){{var t,r;if(k.isBuffer(e))return t=0|eC(e.length),0===(r=Kj(t)).length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||TC(e.length)?Kj(0):Jj(e);if("Buffer"===e.type&&Array.isArray(e.data))return Jj(e.data)}(t);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return k.from(t[Symbol.toPrimitive]("string"),r,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function Qj(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Xj(e){return Qj(e),Kj(e<0?0:0|eC(e))}function Jj(t){var r=t.length<0?0:0|eC(t.length);const n=Kj(r);for(let e=0;e<r;e+=1)n[e]=255&t[e];return n}function $j(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,k.prototype),n}function eC(e){if(e>=HL)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+HL.toString(16)+" bytes");return 0|e}function tC(e,t){if(k.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||PC(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return OC(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return wC(e).length;default:if(o)return n?-1:OC(e).length;t=(""+t).toLowerCase(),o=!0}}function rC(e,r,n){let t=!1;if((r=void 0===r||r<0?0:r)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(r>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":{var o=this;var i=r;var u=n;var a=o.length;(!i||i<0)&&(i=0);(!u||u<0||a<u)&&(u=a);let t="";for(let e=i;e<u;++e)t+=ZL[o[e]];return t;return}case"utf8":case"utf-8":return sC(this,r,n);case"ascii":{var s=this;a=r;var c=n;let t="";c=Math.min(s.length,c);for(let e=a;e<c;++e)t+=String.fromCharCode(127&s[e]);return t;return}case"latin1":case"binary":{var l=this;i=r;var f=n;let t="";f=Math.min(l.length,f);for(let e=i;e<f;++e)t+=String.fromCharCode(l[e]);return t;return}case"base64":return d=this,b=n,0===(h=r)&&b===d.length?WL.fromByteArray(d):WL.fromByteArray(d.slice(h,b));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":{d=this;h=r;b=n;var p=d.slice(h,b);let t="";for(let e=0;e<p.length-1;e+=2)t+=String.fromCharCode(p[e]+256*p[e+1]);return t;return}default:if(t)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),t=!0}var d,h,b}function nC(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function oC(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=TC(r=+r)?o?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=k.from(t,n)),k.isBuffer(t))return 0===t.length?-1:iC(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):iC(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function iC(r,n,t,e,o){let i=1,u=r.length,a=n.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(r.length<2||n.length<2)return-1;i=2,u/=2,a/=2,t/=2}function s(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}let c;if(o){let e=-1;for(c=t;c<u;c++)if(s(r,c)===s(n,-1===e?0:c-e)){if(-1===e&&(e=c),c-e+1===a)return e*i}else-1!==e&&(c-=c-e),e=-1}else for(t+a>u&&(t=u-a),c=t;0<=c;c--){let t=!0;for(let e=0;e<a;e++)if(s(r,c+e)!==s(n,e)){t=!1;break}if(t)return c}return-1}function uC(e,t,r,n){return EC(function(t){const r=[];for(let e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}(t),e,r,n)}function aC(e,t,r,n){return EC(function(t,r){var n,o;const i=[];for(let e=0;e<t.length&&!((r-=2)<0);++e)o=t.charCodeAt(e),n=o>>8,o=o%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function sC(u,e,t){t=Math.min(u.length,t);const r=[];let a=e;for(;a<t;){var s=u[a];let o=null,i=239<s?4:223<s?3:191<s?2:1;if(a+i<=t){let e,t,r,n;switch(i){case 1:s<128&&(o=s);break;case 2:128==(192&(e=u[a+1]))&&127<(n=(31&s)<<6|63&e)&&(o=n);break;case 3:e=u[a+1],t=u[a+2],128==(192&e)&&128==(192&t)&&2047<(n=(15&s)<<12|(63&e)<<6|63&t)&&(n<55296||57343<n)&&(o=n);break;case 4:e=u[a+1],t=u[a+2],r=u[a+3],128==(192&e)&&128==(192&t)&&128==(192&r)&&65535<(n=(15&s)<<18|(63&e)<<12|(63&t)<<6|63&r)&&n<1114112&&(o=n)}}null===o?(o=65533,i=1):65535<o&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),a+=i}{var n=r,o=n.length;if(o<=GL)return String.fromCharCode.apply(String,n);let e="",t=0;for(;t<o;)e+=String.fromCharCode.apply(String,n.slice(t,t+=GL));return e}}Yj.kMaxLength=HL,(k.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1);var e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(k.prototype,"parent",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.buffer}}),Object.defineProperty(k.prototype,"offset",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.byteOffset}}),k.poolSize=8192,k.from=Zj,Object.setPrototypeOf(k.prototype,Uint8Array.prototype),Object.setPrototypeOf(k,Uint8Array),k.alloc=function(e,t,r){return t=t,r=r,Qj(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?Kj(e).fill(t,r):Kj(e).fill(t):Kj(e)},k.allocUnsafe=Xj,k.allocUnsafeSlow=Xj,k.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==k.prototype},k.compare=function(r,n){if(PC(r,Uint8Array)&&(r=k.from(r,r.offset,r.byteLength)),PC(n,Uint8Array)&&(n=k.from(n,n.offset,n.byteLength)),!k.isBuffer(r)||!k.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;let o=r.length,i=n.length;for(let e=0,t=Math.min(o,i);e<t;++e)if(r[e]!==n[e]){o=r[e],i=n[e];break}return o<i?-1:i<o?1:0},k.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},k.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return k.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=k.allocUnsafe(e);let o=0;for(r=0;r<t.length;++r){let e=t[r];if(PC(e,Uint8Array))o+e.length>n.length?(e=k.isBuffer(e)?e:k.from(e)).copy(n,o):Uint8Array.prototype.set.call(n,e,o);else{if(!k.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,o)}o+=e.length}return n},k.byteLength=tC,k.prototype._isBuffer=!0,k.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)nC(this,e,e+1);return this},k.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)nC(this,e,e+3),nC(this,e+1,e+2);return this},k.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)nC(this,e,e+7),nC(this,e+1,e+6),nC(this,e+2,e+5),nC(this,e+3,e+4);return this},k.prototype.toLocaleString=k.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?sC(this,0,e):rC.apply(this,arguments)},k.prototype.equals=function(e){if(k.isBuffer(e))return this===e||0===k.compare(this,e);throw new TypeError("Argument must be a Buffer")},k.prototype.inspect=function(){let e="";var t=Yj.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Vf&&(k.prototype[Vf]=k.prototype.inspect),k.prototype.compare=function(e,t,r,n,o){if(PC(e,Uint8Array)&&(e=k.from(e,e.offset,e.byteLength)),!k.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=t)return 0;if(o<=n)return-1;if(r<=t)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),u=(r>>>=0)-(t>>>=0);var a=Math.min(i,u),s=this.slice(n,o),c=e.slice(t,r);for(let e=0;e<a;++e)if(s[e]!==c[e]){i=s[e],u=c[e];break}return i<u?-1:u<i?1:0},k.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},k.prototype.indexOf=function(e,t,r){return oC(this,e,t,r,!0)},k.prototype.lastIndexOf=function(e,t,r){return oC(this,e,t,r,!1)},k.prototype.write=function(t,r,n,e){if(void 0===r)e="utf8",n=this.length,r=0;else if(void 0===n&&"string"==typeof r)e=r,n=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(n)?(n>>>=0,void 0===e&&(e="utf8")):(e=n,n=void 0)}var o,i,u,a=this.length-r;if((void 0===n||a<n)&&(n=a),0<t.length&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");e=e||"utf8";let s=!1;for(;;)switch(e){case"hex":{var c=this;var l=t;var f=r;var p=n;f=Number(f)||0;var d=c.length-f;(!p||d<(p=Number(p)))&&(p=d),(d=l.length)/2<p&&(p=d/2);let e;for(e=0;e<p;++e){var h=parseInt(l.substr(2*e,2),16);if(TC(h))return e;c[f+e]=h}return e;return}case"utf8":case"utf-8":return d=r,u=n,EC(OC(t,(i=this).length-d),i,d,u);case"ascii":case"latin1":case"binary":return uC(this,t,r,n);case"base64":return i=this,u=r,o=n,EC(wC(t),i,u,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return aC(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),s=!0}},k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const GL=4096;function cC(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function lC(e,t,r,n,o,i){if(!k.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function fC(e,t,r,n,o){vC(t,n,o,e,r,7);n=Number(t&BigInt(4294967295)),e[r++]=n,e[r++]=n>>=8,e[r++]=n>>=8,e[r++]=n>>=8,o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,e[r++]=o>>=8,e[r++]=o>>=8,e[r++]=o>>=8,r}function pC(e,t,r,n,o){vC(t,n,o,e,r,7);n=Number(t&BigInt(4294967295)),e[r+7]=n,e[r+6]=n>>=8,e[r+5]=n>>=8,e[r+4]=n>>=8,o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,e[r+2]=o>>=8,e[r+1]=o>>=8,e[r]=o>>=8,r+8}function dC(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function hC(e,t,r,n,o){return t=+t,r>>>=0,o||dC(e,0,r,4),zL.write(e,t,r,n,23,4),r+4}function bC(e,t,r,n,o){return t=+t,r>>>=0,o||dC(e,0,r,8),zL.write(e,t,r,n,52,8),r+8}k.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return Object.setPrototypeOf(r,k.prototype),r},k.prototype.readUintLE=k.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||cC(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},k.prototype.readUintBE=k.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||cC(e,t,this.length);let n=this[e+--t],o=1;for(;0<t&&(o*=256);)n+=this[e+--t]*o;return n},k.prototype.readUint8=k.prototype.readUInt8=function(e,t){return e>>>=0,t||cC(e,1,this.length),this[e]},k.prototype.readUint16LE=k.prototype.readUInt16LE=function(e,t){return e>>>=0,t||cC(e,2,this.length),this[e]|this[e+1]<<8},k.prototype.readUint16BE=k.prototype.readUInt16BE=function(e,t){return e>>>=0,t||cC(e,2,this.length),this[e]<<8|this[e+1]},k.prototype.readUint32LE=k.prototype.readUInt32LE=function(e,t){return e>>>=0,t||cC(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},k.prototype.readUint32BE=k.prototype.readUInt32BE=function(e,t){return e>>>=0,t||cC(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},k.prototype.readBigUInt64LE=SC(function(e){mC(e>>>=0,"offset");var t=this[e],r=this[e+7],t=(void 0!==t&&void 0!==r||gC(e,this.length-8),t+256*this[++e]+65536*this[++e]+this[++e]*2**24),e=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(t)+(BigInt(e)<<BigInt(32))}),k.prototype.readBigUInt64BE=SC(function(e){mC(e>>>=0,"offset");var t=this[e],r=this[e+7],t=(void 0!==t&&void 0!==r||gC(e,this.length-8),t*2**24+65536*this[++e]+256*this[++e]+this[++e]),e=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(t)<<BigInt(32))+BigInt(e)}),k.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||cC(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},k.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||cC(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;0<n&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},k.prototype.readInt8=function(e,t){return e>>>=0,t||cC(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},k.prototype.readInt16LE=function(e,t){e>>>=0,t||cC(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},k.prototype.readInt16BE=function(e,t){e>>>=0,t||cC(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},k.prototype.readInt32LE=function(e,t){return e>>>=0,t||cC(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},k.prototype.readInt32BE=function(e,t){return e>>>=0,t||cC(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},k.prototype.readBigInt64LE=SC(function(e){mC(e>>>=0,"offset");var t=this[e],r=this[e+7],r=(void 0!==t&&void 0!==r||gC(e,this.length-8),this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24));return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),k.prototype.readBigInt64BE=SC(function(e){mC(e>>>=0,"offset");var t=this[e],r=this[e+7],t=(void 0!==t&&void 0!==r||gC(e,this.length-8),(t<<24)+65536*this[++e]+256*this[++e]+this[++e]);return(BigInt(t)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),k.prototype.readFloatLE=function(e,t){return e>>>=0,t||cC(e,4,this.length),zL.read(this,e,!0,23,4)},k.prototype.readFloatBE=function(e,t){return e>>>=0,t||cC(e,4,this.length),zL.read(this,e,!1,23,4)},k.prototype.readDoubleLE=function(e,t){return e>>>=0,t||cC(e,8,this.length),zL.read(this,e,!0,52,8)},k.prototype.readDoubleBE=function(e,t){return e>>>=0,t||cC(e,8,this.length),zL.read(this,e,!1,52,8)},k.prototype.writeUintLE=k.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||lC(this,e,t,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},k.prototype.writeUintBE=k.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||lC(this,e,t,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+r},k.prototype.writeUint8=k.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,1,255,0),this[t]=255&e,t+1},k.prototype.writeUint16LE=k.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},k.prototype.writeUint16BE=k.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},k.prototype.writeUint32LE=k.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},k.prototype.writeUint32BE=k.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},k.prototype.writeBigUInt64LE=SC(function(e,t=0){return fC(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),k.prototype.writeBigUInt64BE=SC(function(e,t=0){return pC(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),k.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||lC(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);let o=0,i=1,u=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/i>>0)-u&255;return t+r},k.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||lC(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);let o=r-1,i=1,u=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/i>>0)-u&255;return t+r},k.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},k.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},k.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},k.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},k.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||lC(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},k.prototype.writeBigInt64LE=SC(function(e,t=0){return fC(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),k.prototype.writeBigInt64BE=SC(function(e,t=0){return pC(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),k.prototype.writeFloatLE=function(e,t,r){return hC(this,e,t,!0,r)},k.prototype.writeFloatBE=function(e,t,r){return hC(this,e,t,!1,r)},k.prototype.writeDoubleLE=function(e,t,r){return bC(this,e,t,!0,r)},k.prototype.writeDoubleBE=function(e,t,r){return bC(this,e,t,!1,r)},k.prototype.copy=function(e,t,r,n){if(!k.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o=(n=e.length-t<n-r?e.length-t+r:n)-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},k.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!k.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o;1===e.length&&(o=e.charCodeAt(0),("utf8"===n&&o<128||"latin1"===n)&&(e=o))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0;let i;if("number"==typeof(e=e||0))for(i=t;i<r;++i)this[i]=e;else{var u=k.isBuffer(e)?e:k.from(e,n),a=u.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=u[i%a]}return this};const YL={};function yC(e,t,r){YL[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=this.name+` [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return this.name+` [${e}]: `+this.message}}}function _C(e){let t="",r=e.length;for(var n="-"===e[0]?1:0;r>=4+n;r-=3)t="_"+e.slice(r-3,r)+t;return""+e.slice(0,r)+t}function vC(t,r,n,e,o,i){if(n<t||t<r){var u="bigint"==typeof r?"n":"";let e;throw e=3<i?0===r||r===BigInt(0)?`>= 0${u} and < 2${u} ** `+8*(i+1)+u:`>= -(2${u} ** ${8*(i+1)-1}${u}) and < 2 ** `+(8*(i+1)-1)+u:`>= ${r}${u} and <= `+n+u,new YL.ERR_OUT_OF_RANGE("value",e,t)}r=e,n=i,mC(u=o,"offset"),void 0!==r[u]&&void 0!==r[u+n]||gC(u,r.length-(n+1))}function mC(e,t){if("number"!=typeof e)throw new YL.ERR_INVALID_ARG_TYPE(t,"number",e)}function gC(e,t,r){if(Math.floor(e)!==e)throw mC(e,r),new YL.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new YL.ERR_BUFFER_OUT_OF_BOUNDS;throw new YL.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= `+t,e)}yC("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?e+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"},RangeError),yC("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type `+typeof t},TypeError),yC("ERR_OUT_OF_RANGE",function(e,t,r){e=`The value of "${e}" is out of range.`;let n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=_C(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=_C(n)),n+="n"),e+=` It must be ${t}. Received `+n},RangeError);const KL=/[^+/0-9A-Za-z-_]/g;function OC(t,r){r=r||1/0;let n;var o=t.length;let i=null;const u=[];for(let e=0;e<o;++e){if(55295<(n=t.charCodeAt(e))&&n<57344){if(!i){if(56319<n){-1<(r-=3)&&u.push(239,191,189);continue}if(e+1===o){-1<(r-=3)&&u.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(r-=3)&&u.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(r-=3)&&u.push(239,191,189);if(i=null,n<128){if(--r<0)break;u.push(n)}else if(n<2048){if((r-=2)<0)break;u.push(n>>6|192,63&n|128)}else if(n<65536){if((r-=3)<0)break;u.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;u.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return u}function wC(e){return WL.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(KL,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function EC(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function PC(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function TC(e){return e!=e}const ZL=function(){var r="0123456789abcdef";const n=new Array(256);for(let t=0;t<16;++t){var o=16*t;for(let e=0;e<16;++e)n[o+e]=r[t]+r[e]}return n}();function SC(e){return"undefined"==typeof BigInt?jC:e}function jC(){throw new Error("BigInt not supported")}}var CC,vh={},Al={},c=r&&r.__extends||(CC=function(e,t){return(CC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}CC(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Mh=(Object.defineProperty(Al,"__esModule",{value:!0}),M.prototype.getUInt8=function(e){throw new Error("Not implemented")},M.prototype.getInt8=function(e){throw new Error("Not implemented")},M.prototype.getFloat64=function(e){throw new Error("Not implemented")},M.prototype.getVarInt=function(e){throw new Error("Not implemented")},M.prototype.putUInt8=function(e,t){throw new Error("Not implemented")},M.prototype.putInt8=function(e,t){throw new Error("Not implemented")},M.prototype.putFloat64=function(e,t){throw new Error("Not implemented")},M.prototype.getInt16=function(e){return this.getInt8(e)<<8|this.getUInt8(e+1)},M.prototype.getUInt16=function(e){return this.getUInt8(e)<<8|this.getUInt8(e+1)},M.prototype.getInt32=function(e){return this.getInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},M.prototype.getUInt32=function(e){return this.getUInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},M.prototype.getInt64=function(e){return this.getInt8(e)<<56|this.getUInt8(e+1)<<48|this.getUInt8(e+2)<<40|this.getUInt8(e+3)<<32|this.getUInt8(e+4)<<24|this.getUInt8(e+5)<<16|this.getUInt8(e+6)<<8|this.getUInt8(e+7)},M.prototype.getSlice=function(e,t){return new RC(e,t,this)},M.prototype.putInt16=function(e,t){this.putInt8(e,t>>8),this.putUInt8(e+1,255&t)},M.prototype.putUInt16=function(e,t){this.putUInt8(e,t>>8&255),this.putUInt8(e+1,255&t)},M.prototype.putInt32=function(e,t){this.putInt8(e,t>>24),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},M.prototype.putUInt32=function(e,t){this.putUInt8(e,t>>24&255),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},M.prototype.putInt64=function(e,t){this.putInt8(e,t>>48),this.putUInt8(e+1,t>>42&255),this.putUInt8(e+2,t>>36&255),this.putUInt8(e+3,t>>30&255),this.putUInt8(e+4,t>>24&255),this.putUInt8(e+5,t>>16&255),this.putUInt8(e+6,t>>8&255),this.putUInt8(e+7,255&t)},M.prototype.putVarInt=function(e,t){for(var r=0;1<t;){var n=t%128;128<=t&&(n+=128),t/=128,this.putUInt8(e+r,n),r+=1}return r},M.prototype.putBytes=function(e,t){for(var r=0,n=t.remaining();r<n;r++)this.putUInt8(e+r,t.readUInt8())},M.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},M.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},M.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},M.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},M.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},M.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},M.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},M.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},M.prototype.readVarInt=function(){var e=this.getVarInt(this.position);return this._updatePos(e.length),e.value},M.prototype.writeUInt8=function(e){this.putUInt8(this._updatePos(1),e)},M.prototype.writeInt8=function(e){this.putInt8(this._updatePos(1),e)},M.prototype.writeInt16=function(e){this.putInt16(this._updatePos(2),e)},M.prototype.writeInt32=function(e){this.putInt32(this._updatePos(4),e)},M.prototype.writeUInt32=function(e){this.putUInt32(this._updatePos(4),e)},M.prototype.writeInt64=function(e){this.putInt64(this._updatePos(8),e)},M.prototype.writeFloat64=function(e){this.putFloat64(this._updatePos(8),e)},M.prototype.writeVarInt=function(e){e=this.putVarInt(this.position,e);this._updatePos(e)},M.prototype.writeBytes=function(e){this.putBytes(this._updatePos(e.remaining()),e)},M.prototype.readSlice=function(e){return this.getSlice(this._updatePos(e),e)},M.prototype._updatePos=function(e){var t=this.position;return this.position+=e,t},M.prototype.remaining=function(){return this.length-this.position},M.prototype.hasRemaining=function(){return 0<this.remaining()},M.prototype.reset=function(){this.position=0},M.prototype.toString=function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()},M.prototype.toHex=function(){for(var e="",t=0;t<this.length;t++){var r=this.getUInt8(t).toString(16);e+=r=1===r.length?"0"+r:r,t!==this.length-1&&(e+=" ")}return e},M);function M(e){this.position=0,this.length=e}Al.default=Mh;c(AC,IC=Mh),AC.prototype.putUInt8=function(e,t){this._inner.putUInt8(this._start+e,t)},AC.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},AC.prototype.putInt8=function(e,t){this._inner.putInt8(this._start+e,t)},AC.prototype.putFloat64=function(e,t){this._inner.putFloat64(this._start+e,t)},AC.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},AC.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)};var IC,RC=AC;function AC(e,t,r){t=IC.call(this,t)||this;return t._start=e,t._inner=r,t}var kC,MC,Vh=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Wh=(Object.defineProperty(vh,"__esModule",{value:!0}),vh.BaseBuffer=void 0,Vh(Al)),Xh=(vh.BaseBuffer=Wh.default,vh.default=Wh.default,r&&r.__extends||(kC=function(e,t){return(kC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}kC(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),nb=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},NC=(Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.alloc=function(e){return new xC(e)},nb(ed)),Ul=nb(vh),xC=(MC=Ul.default,Xh(DC,MC),DC.prototype.getUInt8=function(e){return this._buffer.readUInt8(e)},DC.prototype.getInt8=function(e){return this._buffer.readInt8(e)},DC.prototype.getFloat64=function(e){return this._buffer.readDoubleBE(e)},DC.prototype.getVarInt=function(e){for(var t=0,r=this._buffer.readInt8(e+t),n=r%128;1<=r/128;)n+=(r=this._buffer.readInt8(e+(t+=1)))%128;return{length:t+1,value:n}},DC.prototype.putUInt8=function(e,t){this._buffer.writeUInt8(t,e)},DC.prototype.putInt8=function(e,t){this._buffer.writeInt8(t,e)},DC.prototype.putFloat64=function(e,t){this._buffer.writeDoubleBE(t,e)},DC.prototype.putBytes=function(e,t){var r;t instanceof DC?(r=Math.min(t.length-t.position,this.length-e),t._buffer.copy(this._buffer,e,t.position,t.position+r),t.position+=r):MC.prototype.putBytes.call(this,e,t)},DC.prototype.getSlice=function(e,t){return new DC(this._buffer.slice(e,e+t))},DC);function DC(e){var t=this,e=(e=e)instanceof NC.default.Buffer?e:"number"==typeof e&&"function"==typeof NC.default.Buffer.alloc?NC.default.Buffer.alloc(e):new NC.default.Buffer(e);return(t=MC.call(this,e.length)||this)._buffer=e,t}Dl.default=xC;var mh=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},LC=(Object.defineProperty(zd,"__esModule",{value:!0}),mh(Dl)),UC=e,ub=UC.internal.util,FC=ub.ENCRYPTION_OFF,BC=ub.ENCRYPTION_ON;function VC(e,t,r){void 0===t&&(t=qC),void 0===r&&(r=function(e){return new WebSocket(e)});var n,o=this,t=(this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=e,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null,function(e,t){var r=function(e){return!0===e.encrypted||e.encrypted===BC}(e),n=function(e){return!1===e.encrypted||e.encrypted===FC}(e),e=e.trust,t=function(e){e="function"==typeof e?e():"";return e&&0<=e.toLowerCase().indexOf("https")}(t);if(function(e,t,r){null!==r&&(e&&!r?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):t&&r&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(r,n,t),n)return{scheme:"ws",error:null};if(t)return{scheme:"wss",error:null};if(r)return e&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==e?{scheme:null,error:(0,UC.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+e+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+FC+'"` in the driver configuration.')}:{scheme:"wss",error:null};return{scheme:"ws",error:null}}(e,t)),i=t.scheme,t=t.error;t?this._error=t:(this._ws=function(t,r,n){var o=t+"://"+r.asHostPort();try{return n(o)}catch(e){if(function(e,t){return"SyntaxError"===e.name&&function(e){return"["===e.charAt(0)&&-1!==e.indexOf("]")}(t.asHostPort())}(e,r))return o=function(e,t){var r=t.host().replace(/:/g,"-").replace("%","s")+".ipv6-literal.net";return"".concat(e,"://").concat(r,":").concat(t.port())}(t,r),n(o);throw e}}(i,e.address,r),this._ws.binaryType="arraybuffer",(n=this)._ws.onclose=function(e){e&&!e.wasClean&&n._handleConnectionError(),n._open=!1},this._ws.onopen=function(){n._clearConnectionTimeout();var e=n._pending;n._pending=null;for(var t=0;t<e.length;t++)n.write(e[t])},this._ws.onmessage=function(e){o._resetTimeout(),n.onmessage&&(e=new LC.default(e.data),n.onmessage(e))},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout())}function qC(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}VC.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,UC.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,UC.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},VC.prototype.write=function(e){if(null!==this._pending)this._pending.push(e);else{if(!(e instanceof LC.default))throw(0,UC.newError)("Don't know how to send buffer: "+e);try{this._ws.send(e._buffer)}catch(e){if(1===this._ws.readyState)throw(0,UC.newError)("unexpected failure to write.",void 0,e);this._handleConnectionError()}}},VC.prototype.close=function(){var r=this;return null===this._closingPromise&&(this._closingPromise=new Promise(function(e,t){r._clearConnectionTimeout(),r._ws&&3!==r._ws.readyState?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){e()},r._ws.close()):e()})),this._closingPromise},VC.prototype.setupReceiveTimeout=function(e){this._receiveTimeout=e},VC.prototype.stopReceiveTimeout=function(){null!==this._receiveTimeout&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,null!=this._receiveTimeoutId&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},VC.prototype.startReceiveTimeout=function(){this._open&&null!==this._receiveTimeout&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},VC.prototype._resetTimeout=function(){var e=this;this._receiveTimeoutStarted&&(null!==this._receiveTimeoutId&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){e._receiveTimeoutId=null,e._timedout=!0,e.stopReceiveTimeout(),e._error=(0,UC.newError)("Connection lost. Server didn't respond in ".concat(e._receiveTimeout,"ms"),e._config.connectionErrorCode),e.close(),e.onerror&&e.onerror(e._error)},this._receiveTimeout))},VC.prototype._setupConnectionTimeout=function(){var e,t=this,r=this._config.connectionTimeout;return r?(e=this._ws,setTimeout(function(){1!==e.readyState&&(t._connectionTimeoutFired=!0,e.close())},r)):null},VC.prototype._clearConnectionTimeout=function(){var e=this._connectionTimeoutId;!e&&0!==e||(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(e))},zd.default=VC;var WC,lb={},Ll=r&&r.__extends||(WC=function(e,t){return(WC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}WC(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(lb,"__esModule",{value:!0});var zC,dt=e.internal.resolver.BaseHostNameResolver,kh=(Ll(HC,zC=dt),HC.prototype.resolve=function(e){return this._resolveToItself(e)},HC);function HC(){return null!==zC&&zC.apply(this,arguments)||this}lb.default=kh;var GC,S={},YC=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},KC=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},mb=(Object.defineProperty(S,"__esModule",{value:!0}),S.default={load:function(t){return YC(this,void 0,void 0,function(){return KC(this,function(e){return[2,t]})})}},r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}}),or=(Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.ClientCertificatesLoader=Ld.HostNameResolver=Ld.Channel=void 0,mb(zd)),R=mb(lb),zh=mb(S),Nh=(Ld.Channel=or.default,Ld.HostNameResolver=R.default,Ld.ClientCertificatesLoader=zh.default,{}),gb={},Pb=r&&r.__extends||(GC=function(e,t){return(GC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}GC(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(gb,"__esModule",{value:!0});var ZC,QC=Dl,Cb=(ZC=vh.BaseBuffer,Pb(XC,ZC),XC.prototype.getUInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getUInt8(e);e-=r.length}},XC.prototype.getInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getInt8(e);e-=r.length}},XC.prototype.getFloat64=function(e){for(var t=(0,QC.alloc)(8),r=0;r<8;r++)t.putUInt8(r,this.getUInt8(e+r));return t.getFloat64(0)},XC);function XC(e){for(var t=this,r=0,n=0;n<e.length;n++)r+=e[n].length;return(t=ZC.call(this,r)||this)._buffers=e,t}gb.default=Cb;var JC,$C,Mb=r&&r.__extends||(JC=function(e,t){return(JC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}JC(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ub=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Yb=(Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.Dechunker=Nh.Chunker=void 0,Ub(Al)),eI=Dl,tI=Ub(gb),ty=($C=Yb.default,Mb(rI,$C),rI.prototype.putUInt8=function(e,t){this._ensure(1),this._buffer.writeUInt8(t)},rI.prototype.putInt8=function(e,t){this._ensure(1),this._buffer.writeInt8(t)},rI.prototype.putFloat64=function(e,t){this._ensure(8),this._buffer.writeFloat64(t)},rI.prototype.putBytes=function(e,t){for(;0<t.remaining();)this._ensure(1),this._buffer.remaining()>t.remaining()?this._buffer.writeBytes(t):this._buffer.writeBytes(t.readSlice(this._buffer.remaining()));return this},rI.prototype.flush=function(){var e;return 0<this._buffer.position&&(this._closeChunkIfOpen(),e=this._buffer,this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,eI.alloc)(this._bufferSize),this._chunkOpen=!1),this},rI.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},rI.prototype._ensure=function(e){e=this._chunkOpen?e:e+2;this._buffer.remaining()<e&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},rI.prototype._closeChunkIfOpen=function(){var e;this._chunkOpen&&(e=this._buffer.position-(this._currentChunkStart+2),this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1)},rI);function rI(e,t){var r=$C.call(this,0)||this;return r._bufferSize=t||1400,r._ch=e,r._buffer=(0,eI.alloc)(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}function nI(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}Nh.Chunker=ty,nI.prototype.AWAITING_CHUNK=function(e){return 2<=e.remaining()?this._onHeader(e.readUInt16()):(this._partialChunkHeader=e.readUInt8()<<8,this.IN_HEADER)},nI.prototype.IN_HEADER=function(e){return this._onHeader(65535&(this._partialChunkHeader|e.readUInt8()))},nI.prototype.IN_CHUNK=function(e){return this._chunkSize<=e.remaining()?(this._currentMessage.push(e.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=e.remaining(),this._currentMessage.push(e.readSlice(e.remaining())),this.IN_CHUNK)},nI.prototype.CLOSED=function(e){},nI.prototype._onHeader=function(e){if(0!==e)return this._chunkSize=e,this.IN_CHUNK;var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new tI.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK},nI.prototype.write=function(e){for(;e.hasRemaining();)this._state=this._state(e)},Nh.Dechunker=nI;var uy={},oI=(Object.defineProperty(uy,"__esModule",{value:!0}),e),ly=oI.internal.util,fy=ly.ENCRYPTION_OFF,Iy=ly.ENCRYPTION_ON,iI=oI.error.SERVICE_UNAVAILABLE,uI=[null,void 0,!0,!1,Iy,fy],aI=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];uy.default=function(e,t,r,n){this.address=e,this.encrypted=function(e){e=e.encrypted;if(-1!==uI.indexOf(e))return e;throw(0,oI.newError)("Illegal value of the encrypted setting ".concat(e,". Expected one of ").concat(uI))}(t),this.trust=function(e){e=e.trust;if(-1!==aI.indexOf(e))return e;throw(0,oI.newError)("Illegal value of the trust setting ".concat(e,". Expected one of ").concat(aI))}(t),this.trustedCertificates=t.trustedCertificates||[],this.connectionErrorCode=r||iI,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=n};var sI,cI,Cy={},Ky={},vd={exports:{}};function lI(e,t){for(var r in e)t[r]=e[r]}function fI(e,t,r){return cI(e,t,r)}zy=(xp=vd).exports,(cI=(sI=ed).Buffer).from&&cI.alloc&&cI.allocUnsafe&&cI.allocUnsafeSlow?xp.exports=sI:(lI(sI,zy),zy.Buffer=fI),fI.prototype=Object.create(cI.prototype),lI(cI,fI),fI.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return cI(e,t,r)},fI.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=cI(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},fI.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return cI(e)},fI.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return sI.SlowBuffer(e)};var pI=vd.exports.Buffer,dI=pI.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function hI(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||pI.isEncoding!==dI&&dI(e))return t||e;throw new Error("Unknown encoding: "+e)}function bI(e){var t;switch(this.encoding=hI(e),this.encoding){case"utf16le":this.text=vI,this.end=mI,t=4;break;case"utf8":this.fillLast=_I,t=4;break;case"base64":this.text=gI,this.end=OI,t=3;break;default:return this.write=wI,void(this.end=EI)}this.lastNeed=0,this.lastTotal=0,this.lastChar=pI.allocUnsafe(t)}function yI(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function _I(e){var t,r=this.lastTotal-this.lastNeed,n=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,"�"):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,"�"):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,"�"):void 0:void 0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function vI(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function mI(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function gI(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function OI(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function wI(e){return e.toString(this.encoding)}function EI(e){return e&&e.length?this.write(e):""}(Ky.StringDecoder=bI).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},bI.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"�":e},bI.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=yI(t[n]);if(0<=o)return 0<o&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if(0<=(o=yI(t[n])))return 0<o&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if(0<=(o=yI(t[n])))return 0<o&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;r=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},bI.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var PI,TI,SI,jI,CI,Yy=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},II=(Object.defineProperty(Cy,"__esModule",{value:!0}),Yy(Dl)),RI=e,AI=Yy(ed),kI=new Ky.StringDecoder("utf8");Cy.default={encode:function(e){return new II.default((e=e,"function"==typeof AI.default.Buffer.from?AI.default.Buffer.from(e,"utf8"):new AI.default.Buffer(e,"utf8")))},decode:function(e,t){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return n=t,a=(r=e).position,n=a+n,r.position=Math.min(n,r.length),r._buffer.toString("utf8",a,n);var o,i,u,r,n,a;if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return o=function(e){return kI.write(e._buffer)},r=function(){return kI.end()},i=t,u=(a=e).position,a._updatePos(Math.min(t,a.length-u)),a._buffers.reduce(function(e,t){var r,n;return i<=0?e:u>=t.length?(u-=t.length,""):(t._updatePos(u-t.position),r=Math.min(t.length-u,i),n=t.readSlice(r),t._updatePos(r),i=Math.max(i-n.length,0),u=0,e+o(n))},"")+r();throw(0,RI.newError)("Don't know how to decode strings from '".concat(e,"'"))}},o_=Dd,PI=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i_=r&&r.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||PI(t,e,r)},TI=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(o_,"__esModule",{value:!0}),o_.utf8=o_.alloc=o_.ChannelConfig=void 0,i_(Ld,o_),i_(Nh,o_),SI=uy,Object.defineProperty(o_,"ChannelConfig",{enumerable:!0,get:function(){return TI(SI).default}}),jI=Dl,Object.defineProperty(o_,"alloc",{enumerable:!0,get:function(){return jI.alloc}}),CI=Cy,Object.defineProperty(o_,"utf8",{enumerable:!0,get:function(){return TI(CI).default}}),Object.defineProperty(_d,"__esModule",{value:!0}),_d.default=function(f,e){return function(t,o){var i=this;return new Promise(function(r,n){function e(e){n(e)}t.onerror=e.bind(i),t._error&&e(t._error),t.onmessage=function(t){try{var e=function(e,t){e=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(72!==e[0]||84!==e[1]||84!==e[2]||80!==e[3])return new NI.ProtocolVersion(e[3],e[2]);throw t.error("Handshake failed since server responded with HTTP."),(0,NI.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)")}(t,o);r({protocolVersion:e,capabilites:0,buffer:t,consumeRemainingBuffer:function(e){t.hasRemaining()&&e(t.readSlice(t.remaining()))}})}catch(e){n(e)}},t.write(function(e){if(4<e.length)throw(0,NI.newError)("It should not have more than 4 versions of the protocol");var o=(0,MI.alloc)(20);return o.writeInt32(1616949271),e.forEach(function(e){var t,r,n;e instanceof Array?(r=(n=e[0]).major,n=n.minor,t=e[1].minor,o.writeInt32(n-t<<16|n<<8|r)):(r=e.major,n=e.minor,o.writeInt32(n<<8|r))}),o.reset(),o}([LI(255,1),[LI(5,8),LI(5,0)],[LI(4,4),LI(4,2)],LI(3,0)]))})}(f,e).then(function(e){if(e.protocolVersion.isEqualTo(new NI.ProtocolVersion(255,1))){for(var n=f,o=e.buffer,t=o.readVarInt(),r=[],i=0;i<t;i++){var u=[o.readUInt8(),o.readUInt8(),o.readUInt8(),o.readUInt8()];r=r.concat(function(e){for(var t=[],r=e[3],n=e[2],o=0;o<=e[1];o++)t.push({major:r,minor:n-o});return t}(u))}o.readVarInt();var a=DI,s=0,c=0;for(r.sort(function(e,t){return Number(e.major)!==Number(t.major)?Number(t.major)-Number(e.major):Number(t.minor)-Number(e.minor)}),i=0;i<r.length;i++){var l=r[i];if(xI.includes(l.major+"."+l.minor)){s=l.major,c=l.minor;break}}return new Promise(function(e,t){try{var r=(0,MI.alloc)(5);r.writeInt32(c<<8|s),r.writeVarInt(a),n.write(r),e({protocolVersion:new NI.ProtocolVersion(s,c),capabilites:a,consumeRemainingBuffer:function(e){o.hasRemaining()&&e(o.readSlice(o.remaining()))}})}catch(e){t(e)}})}return e})};var MI=Dd,NI=e,xI=["6.0","5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],DI=0;function LI(e,t){return{major:e,minor:t}}var UI,d_={},v_={},w_={},A={},T_={},H_=r&&r.__extends||(UI=function(e,t){return(UI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}UI(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Z_=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ev=(Object.defineProperty(T_,"__esModule",{value:!0}),Z_(e),FI.ofRecord=function(e){return null===e?FI.ofNull():new YI(e)},FI.ofMessageResponse=function(e){return null===e?FI.ofNull():new VI(e)},FI.ofNull=function(){return new zI},Object.defineProperty(FI.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(FI.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(FI.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(FI.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),FI);function FI(){}T_.default=ev;H_(qI,BI=ev),Object.defineProperty(qI.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(qI.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(qI.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(qI.prototype,"isNull",{get:function(){return null===this._response},enumerable:!1,configurable:!0});var BI,VI=qI;function qI(e){var t=BI.call(this)||this;return t._response=e,t}H_(HI,WI=ev),Object.defineProperty(HI.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0});var WI,zI=HI;function HI(){return null!==WI&&WI.apply(this,arguments)||this}H_(KI,GI=ev),Object.defineProperty(KI.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(KI.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(KI.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(KI.prototype,"isNull",{get:function(){return null===this._record},enumerable:!1,configurable:!0});var GI,YI=KI;function KI(e){var t=GI.call(this)||this;return t._record=e,t}var iv={},av={},ZI=(Object.defineProperty(av,"__esModule",{value:!0}),av.identity=function(e){return e},av.reuseOngoingRequest=function(o,i){void 0===i&&(i=null);var u=new Map;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ZI.json.stringify(e);if(u.has(r))return u.get(r);var n=o.apply(i,e);return u.set(r,n),n.finally(function(){u.delete(r)})}},e);var vv={},QI=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(vv,"__esModule",{value:!0}),vv.equals=function(e,t){var r,n;if(e===t)return!0;if(null===e||null===t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;try{for(var u=QI(o),a=u.next();!a.done;a=u.next()){var s=a.value;if(e[s]!==t[s])return!1}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return!0};var XI,JI,$I=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),eR=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ev=r&&r.__importStar||(XI=function(e){return(XI=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=XI(e),n=0;n<r.length;n++)"default"!==r[n]&&$I(t,e,r[n]);return eR(t,e),t}),Sv=(Object.defineProperty(iv,"__esModule",{value:!0}),iv.object=iv.functional=void 0,iv.functional=Ev(av),iv.object=Ev(vv),r&&r.__extends||(JI=function(e,t){return(JI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}JI(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),jv=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},tR=(Object.defineProperty(A,"__esModule",{value:!0}),A.TelemetryObserver=A.ProcedureRouteObserver=A.RouteObserver=A.CompletedObserver=A.FailedObserver=A.ResetObserver=A.LogoffObserver=A.LoginObserver=A.ResultStreamObserver=A.StreamObserver=void 0,e),rR=jv(T_),nR=iv,oR=tR.internal.constants.FETCH_ALL,iR=tR.error.PROTOCOL_ERROR,Cv=(uR.prototype.onNext=function(e){},uR.prototype.onError=function(e){},uR.prototype.onCompleted=function(e){},uR);function uR(){}A.StreamObserver=Cv;Sv(sR,aR=Cv),sR.prototype.pause=function(){this._paused=!0},sR.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},sR.prototype.onNext=function(e){this._haveRecordStreamed=!0;var t=new tR.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(e){return e.onNext})?this._observers.forEach(function(e){e.onNext&&e.onNext(t)}):(this._queuedRecords.push(t),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},sR.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},sR.prototype.onError=function(e){this._state.onError(this,e)},sR.prototype.cancel=function(){this._discard=!0},sR.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(TR.STREAMING)},sR.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(TR.SUCCEEDED)},sR.prototype.subscribe=function(e){if(this._head&&e.onKeys&&e.onKeys(this._head),0<this._queuedRecords.length&&e.onNext)for(var t=0;t<this._queuedRecords.length;t++)e.onNext(this._queuedRecords[t]),this._queuedRecords.length-t-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===TR.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._error&&e.onError(this._error),this._observers.push(e),this._state===TR.READY&&this._handleStreaming()},sR.prototype._handleHasMore=function(e){this._setState(TR.READY),this._handleStreaming(),delete e.has_more},sR.prototype._handlePullSuccess=function(e){var t,r=this,n=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:0<this._fieldKeys.length}},e));[void 0,null,"r","w","rw","s"].includes(n.type)?(this._setState(TR.SUCCEEDED),e=null,t=function(){r._tail=n,r._observers.some(function(e){return e.onCompleted})&&r._observers.forEach(function(e){e.onCompleted&&e.onCompleted(n)}),r._afterComplete&&r._afterComplete(n)},(e=this._beforeComplete?this._beforeComplete(n):e)?Promise.resolve(e).then(t):t()):this.onError((0,tR.newError)('Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got \''.concat(n.type,"'"),iR))},sR.prototype._handleRunSuccess=function(e,t){var r=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&0<e.fields.length){this._fieldKeys=e.fields;for(var n=0;n<e.fields.length;n++)this._fieldLookup[e.fields[n]]=n}null!==e.db&&void 0!==this._onDb&&this._onDb(e.db),null!=e.fields&&delete e.fields,null!==e.qid&&void 0!==e.qid&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var o=null,i=(this._beforeKeys&&(o=this._beforeKeys(this._fieldKeys)),function(){r._head=r._fieldKeys,r._observers.some(function(e){return e.onKeys})&&r._observers.forEach(function(e){e.onKeys&&e.onKeys(r._fieldKeys)}),r._afterKeys&&r._afterKeys(r._fieldKeys),t()});o?Promise.resolve(o).then(i):i()}},sR.prototype._handleError=function(t){function e(){r._observers.some(function(e){return e.onError})&&r._observers.forEach(function(e){e.onError&&e.onError(t)}),r._afterError&&r._afterError(t)}var r=this,n=(this._setState(TR.FAILED),this._error=t,null);this._beforeError&&(n=this._beforeError(t));n?Promise.resolve(n).then(e):e()},sR.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._paused||!this._discard&&!this._autoPull||this._more())},sR.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(TR.STREAMING)},sR.prototype._storeMetadataForCompletion=function(e){for(var t,r=Object.keys(e),n=r.length;n--;)t=r[n],this._meta[t]=e[t]},sR.prototype._setState=function(e){this._state=e},sR.prototype._setupAutoPull=function(){this._autoPull=!0};var aR,xv=sR;function sR(e){var e=void 0===e?{}:e,t=e.reactive,t=void 0!==t&&t,r=e.moreFunction,n=e.discardFunction,o=e.fetchSize,o=void 0===o?oR:o,i=e.beforeError,u=e.afterError,a=e.beforeKeys,s=e.afterKeys,c=e.beforeComplete,l=e.afterComplete,f=e.server,p=e.highRecordWatermark,p=void 0===p?Number.MAX_VALUE:p,d=e.lowRecordWatermark,d=void 0===d?Number.MAX_VALUE:d,h=e.enrichMetadata,e=e.onDb,b=aR.call(this)||this;return b._fieldKeys=null,b._fieldLookup=null,b._head=null,b._queuedRecords=[],b._tail=null,b._error=null,b._observers=[],b._meta={},b._server=f,b._beforeError=i,b._afterError=u,b._beforeKeys=a,b._afterKeys=s,b._beforeComplete=c,b._afterComplete=l,b._enrichMetadata=h||nR.functional.identity,b._queryId=null,b._moreFunction=r,b._discardFunction=n,b._discard=!1,b._fetchSize=o,b._lowRecordWatermark=d,b._highRecordWatermark=p,b._setState(t?TR.READY:TR.READY_STREAMING),b._setupAutoPull(),b._paused=!1,b._pulled=!t,b._haveRecordStreamed=!1,b._onDb=e,b}A.ResultStreamObserver=xv;Sv(lR,cR=Cv),lR.prototype.onNext=function(e){this.onError((0,tR.newError)("Received RECORD when initializing "+tR.json.stringify(e)))},lR.prototype.onError=function(e){this._onError&&this._onError(e)},lR.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)};var cR,Hh=lR;function lR(e){var e=void 0===e?{}:e,t=e.onError,e=e.onCompleted,r=cR.call(this)||this;return r._onError=t,r._onCompleted=e,r}A.LoginObserver=Hh;Sv(pR,fR=Cv),pR.prototype.onNext=function(e){this.onError((0,tR.newError)("Received RECORD when logging off "+tR.json.stringify(e)))},pR.prototype.onError=function(e){this._onError&&this._onError(e)},pR.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)};var fR,Uv=pR;function pR(e){var e=void 0===e?{}:e,t=e.onError,e=e.onCompleted,r=fR.call(this)||this;return r._onError=t,r._onCompleted=e,r}A.LogoffObserver=Uv;Sv(hR,dR=Cv),hR.prototype.onNext=function(e){this.onError((0,tR.newError)("Received RECORD when resetting: received record is: "+tR.json.stringify(e),iR))},hR.prototype.onError=function(e){e.code===iR&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},hR.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)};var dR,Bv=hR;function hR(e){var e=void 0===e?{}:e,t=e.onProtocolError,r=e.onError,e=e.onComplete,n=dR.call(this)||this;return n._onProtocolError=t,n._onError=r,n._onComplete=e,n}A.ResetObserver=Bv;Sv(yR,bR=xv),yR.prototype.onNext=function(e){this.onError((0,tR.newError)("Received RECORD when sending telemetry "+tR.json.stringify(e),iR))},yR.prototype.onError=function(e){this._onError&&this._onError(e)},yR.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)};var bR,zv=yR;function yR(e){var e=void 0===e?{}:e,t=e.onError,e=e.onCompleted,r=bR.call(this)||this;return r._onError=t,r._onCompleted=e,r}A.TelemetryObserver=zv;Sv(vR,_R=xv);var _R,Yv=vR;function vR(e){var t=e.error,e=e.onError,e=_R.call(this,{beforeError:e})||this;return e.onError(t),e}A.FailedObserver=Yv;Sv(gR,mR=xv);var mR,em=gR;function gR(){var e=mR.call(this)||this;return mR.prototype.markCompleted.call(e),e}A.CompletedObserver=em;Sv(wR,OR=Cv),wR.prototype.onNext=function(e){this._records.push(e)},wR.prototype.onError=function(e){e.code===iR&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},wR.prototype.onCompleted=function(){null!==this._records&&1!==this._records.length?this.onError((0,tR.newError)("Illegal response from router. Received "+this._records.length+" records but expected only one.\n"+tR.json.stringify(this._records),iR)):this._onCompleted&&this._onCompleted(rR.default.ofRecord(this._records[0]))};var OR,R_=wR;function wR(e){var t=e.resultObserver,r=e.onProtocolError,n=e.onError,e=e.onCompleted,o=OR.call(this)||this;return o._resultObserver=t,o._onError=n,o._onCompleted=e,o._records=[],o._onProtocolError=r,t.subscribe(o),o}A.ProcedureRouteObserver=R_;Sv(PR,ER=Cv),PR.prototype.onNext=function(e){this.onError((0,tR.newError)("Received RECORD when resetting: received record is: "+tR.json.stringify(e),iR))},PR.prototype.onError=function(e){e.code===iR&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},PR.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(rR.default.ofMessageResponse(e))};var ER,um=PR;function PR(e){var e=void 0===e?{}:e,t=e.onProtocolError,r=e.onError,e=e.onCompleted,n=ER.call(this)||this;return n._onProtocolError=t,n._onError=r,n._onCompleted=e,n}A.RouteObserver=um;var TR={READY_STREAMING:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){e._setState(TR.STREAMING)})},onError:function(e,t){e._handleError(t)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){return e._handleStreaming()})},onError:function(e,t){e._handleError(t)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,t){t.has_more?e._handleHasMore(t):e._handlePullSuccess(t)},onError:function(e,t){e._handleError(t)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}},SR=(Object.defineProperty(w_,"__esModule",{value:!0}),w_.assertDatabaseIsEmpty=function(e,t,r){void 0===t&&(t=function(){});if(e)throw e=(0,SR.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality"),t(e.message),r.onError(e),e},w_.assertTxConfigIsEmpty=function(e,t,r){void 0===t&&(t=function(){});if(e&&!e.isEmpty())throw e=(0,SR.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality"),t(e.message),r.onError(e),e},w_.assertImpersonatedUserIsEmpty=function(e,t,r){void 0===t&&(t=function(){});if(e)throw e=(0,SR.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,".")),t(e.message),r.onError(e),e},w_.assertNotificationFilterIsEmpty=function(e,t,r){void 0===t&&(t=function(){});if(void 0!==e)throw e=(0,SR.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(SR.json.stringify(e),".")),t(e.message),r.onError(e),e},e);var cm={},Dp={},N_={},jR=(Object.defineProperty(N_,"__esModule",{value:!0}),N_.Structure=void 0,N_.verifyStructSize=function(e,t,r){if(t!==r)throw(0,jR.newError)("Wrong struct size for ".concat(e,", expected ").concat(t," but was ").concat(r),CR)},e),CR=jR.error.PROTOCOL_ERROR,Om=(Object.defineProperty(IR.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),IR.prototype.toString=function(){for(var e="",t=0;t<this.fields.length;t++)0<t&&(e+=", "),e+=this.fields[t];return"Structure("+this.signature+", ["+e+"])"},IR);function IR(e,t){this.signature=e,this.fields=t}N_.Structure=Om,N_.default=Om,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.Unpacker=Dp.Packer=void 0;var RR=Dd,AR=iv,kR=N_,MR=e,NR=MR.error.PROTOCOL_ERROR;function xR(e){this._ch=e,this._byteArraysSupported=!0}function DR(e,t){void 0===t&&(t=!1),this._disableLosslessIntegers=e=void 0===e?!1:e,this._useBigInt=t}xR.prototype.packable=function(o,i){var e,u=this;void 0===i&&(i=AR.functional.identity);try{o=i(o)}catch(e){return function(){throw e}}if(null===o)return function(){return u._ch.writeUInt8(192)};if(!0===o)return function(){return u._ch.writeUInt8(195)};if(!1===o)return function(){return u._ch.writeUInt8(194)};if("number"==typeof o)return function(){return u.packFloat(o)};if("string"==typeof o)return function(){return u.packString(o)};if("bigint"==typeof o)return function(){return u.packInteger((0,MR.int)(o))};if((0,MR.isInt)(o))return function(){return u.packInteger(o)};if(o instanceof Int8Array)return function(){return u.packBytes(o)};if(o instanceof Array)return function(){u.packListHeader(o.length);for(var e=0;e<o.length;e++)u.packable(void 0===o[e]?null:o[e],i)()};if(null!=(e=o)&&"function"==typeof e[Symbol.iterator])return this.packableIterable(o,i);if(o instanceof kR.Structure){for(var t=[],r=0;r<o.fields.length;r++)t[r]=this.packable(o.fields[r],i);return function(){return u.packStruct(o.signature,t)}}return"object"==typeof o?function(){for(var e=Object.keys(o),t=0,r=0;r<e.length;r++)void 0!==o[e[r]]&&t++;u.packMapHeader(t);for(r=0;r<e.length;r++){var n=e[r];void 0!==o[n]&&(u.packString(n),u.packable(o[n],i)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(o))},xR.prototype.packableIterable=function(t,e){try{var r=Array.from(t);return this.packable(r,e)}catch(e){throw(0,MR.newError)("Cannot pack given iterable, ".concat(e.message,": ").concat(t))}},xR.prototype.packStruct=function(e,t){this.packStructHeader((t=t||[]).length,e);for(var r=0;r<t.length;r++)t[r]()},xR.prototype.packInteger=function(e){var t=e.high,r=e.low;e.greaterThanOrEqual(-16)&&e.lessThan(128)?this._ch.writeInt8(r):e.greaterThanOrEqual(-128)&&e.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(r)):e.greaterThanOrEqual(-32768)&&e.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(r)):(e.greaterThanOrEqual(-2147483648)&&e.lessThan(2147483648)?this._ch.writeUInt8(202):(this._ch.writeUInt8(203),this._ch.writeInt32(t)),this._ch.writeInt32(r))},xR.prototype.packFloat=function(e){this._ch.writeUInt8(193),this._ch.writeFloat64(e)},xR.prototype.packString=function(e){var e=RR.utf8.encode(e),t=e.length;if(t<16)this._ch.writeUInt8(128|t),this._ch.writeBytes(e);else if(t<256)this._ch.writeUInt8(208),this._ch.writeUInt8(t),this._ch.writeBytes(e);else if(t<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256),this._ch.writeBytes(e);else{if(!(t<4294967296))throw(0,MR.newError)("UTF-8 strings of size "+t+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256),this._ch.writeBytes(e)}},xR.prototype.packListHeader=function(e){if(e<16)this._ch.writeUInt8(144|e);else if(e<256)this._ch.writeUInt8(212),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,MR.newError)("Lists of size "+e+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},xR.prototype.packBytes=function(e){if(!this._byteArraysSupported)throw(0,MR.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(e.length);for(var t=0;t<e.length;t++)this._ch.writeInt8(e[t])},xR.prototype.packBytesHeader=function(e){if(e<256)this._ch.writeUInt8(204),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,MR.newError)("Byte arrays of size "+e+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},xR.prototype.packMapHeader=function(e){if(e<16)this._ch.writeUInt8(160|e);else if(e<256)this._ch.writeUInt8(216),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,MR.newError)("Maps of size "+e+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},xR.prototype.packStructHeader=function(e,t){if(e<16)this._ch.writeUInt8(176|e),this._ch.writeUInt8(t);else if(e<256)this._ch.writeUInt8(220),this._ch.writeUInt8(e),this._ch.writeUInt8(t);else{if(!(e<65536))throw(0,MR.newError)("Structures of size "+e+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256)}},xR.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},xR.prototype._nonPackableValue=function(e){return function(){throw(0,MR.newError)(e,NR)}},Dp.Packer=xR,DR.prototype.unpack=function(e,t){void 0===t&&(t=AR.functional.identity);var r=e.readUInt8(),n=240&r,o=15&r;if(192===r)return null;var i=this._unpackBoolean(r);if(null!==i)return i;i=this._unpackNumberOrInteger(r,e);if(null!==i){if((0,MR.isInt)(i)){if(this._useBigInt)return i.toBigInt();if(this._disableLosslessIntegers)return i.toNumberOrInfinity()}return i}i=this._unpackString(r,n,o,e);if(null!==i)return i;i=this._unpackList(r,n,o,e,t);if(null!==i)return i;i=this._unpackByteArray(r,e);if(null!==i)return i;i=this._unpackMap(r,n,o,e,t);if(null!==i)return i;i=this._unpackStruct(r,n,o,e,t);if(null!==i)return i;throw(0,MR.newError)("Unknown packed value with marker "+r.toString(16))},DR.prototype.unpackInteger=function(e){var t=e.readUInt8(),e=this._unpackInteger(t,e);if(null==e)throw(0,MR.newError)("Unable to unpack integer value with marker "+t.toString(16));return e},DR.prototype._unpackBoolean=function(e){return 195===e||194!==e&&null},DR.prototype._unpackNumberOrInteger=function(e,t){return 193===e?t.readFloat64():this._unpackInteger(e,t)},DR.prototype._unpackInteger=function(e,t){var r;return 0<=e&&e<128?(0,MR.int)(e):240<=e&&e<256?(0,MR.int)(e-256):200===e?(0,MR.int)(t.readInt8()):201===e?(0,MR.int)(t.readInt16()):202===e?(r=t.readInt32(),(0,MR.int)(r)):203===e?(r=t.readInt32(),e=t.readInt32(),new MR.Integer(e,r)):null},DR.prototype._unpackString=function(e,t,r,n){return 128===t?RR.utf8.decode(n,r):208===e?RR.utf8.decode(n,n.readUInt8()):209===e?RR.utf8.decode(n,n.readUInt16()):210===e?RR.utf8.decode(n,n.readUInt32()):null},DR.prototype._unpackList=function(e,t,r,n,o){return 144===t?this._unpackListWithSize(r,n,o):212===e?this._unpackListWithSize(n.readUInt8(),n,o):213===e?this._unpackListWithSize(n.readUInt16(),n,o):214===e?this._unpackListWithSize(n.readUInt32(),n,o):null},DR.prototype._unpackListWithSize=function(e,t,r){for(var n=[],o=0;o<e;o++)n.push(this.unpack(t,r));return n},DR.prototype._unpackByteArray=function(e,t){return 204===e?this._unpackByteArrayWithSize(t.readUInt8(),t):205===e?this._unpackByteArrayWithSize(t.readUInt16(),t):206===e?this._unpackByteArrayWithSize(t.readUInt32(),t):null},DR.prototype._unpackByteArrayWithSize=function(e,t){for(var r=new Int8Array(e),n=0;n<e;n++)r[n]=t.readInt8();return r},DR.prototype._unpackMap=function(e,t,r,n,o){return 160===t?this._unpackMapWithSize(r,n,o):216===e?this._unpackMapWithSize(n.readUInt8(),n,o):217===e?this._unpackMapWithSize(n.readUInt16(),n,o):218===e?this._unpackMapWithSize(n.readUInt32(),n,o):null},DR.prototype._unpackMapWithSize=function(e,t,r){for(var n={},o=0;o<e;o++)n[this.unpack(t,r)]=this.unpack(t,r);return n},DR.prototype._unpackStruct=function(e,t,r,n,o){return 176===t?this._unpackStructWithSize(r,n,o):220===e?this._unpackStructWithSize(n.readUInt8(),n,o):221===e?this._unpackStructWithSize(n.readUInt16(),n,o):null},DR.prototype._unpackStructWithSize=function(e,t,r){for(var n=t.readUInt8(),o=new kR.Structure(n,[]),i=0;i<e;i++)o.fields.push(this.unpack(t,r));return r(o)},Dp.Unpacker=DR;var LR,UR,FR,Tm={},xm=r&&r.__extends||(LR=function(e,t){return(LR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}LR(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),BR=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),VR=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),md=r&&r.__importStar||(UR=function(e){return(UR=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=UR(e),n=0;n<r.length;n++)"default"!==r[n]&&BR(t,e,r[n]);return VR(t,e),t}),Cm=(Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.Unpacker=Tm.Packer=void 0,md(Dp)),gd=(FR=Cm.Packer,xm(qR,FR),qR.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},qR);function qR(){return null!==FR&&FR.apply(this,arguments)||this}Tm.Packer=gd;WR=Cm.Unpacker,xm(zR,WR);var WR,Im=zR;function zR(e,t){return WR.call(this,e=void 0===e?!1:e,t=void 0===t?!1:t)||this}Tm.Unpacker=Im;var HR,GR=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),YR=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),km=r&&r.__importStar||(HR=function(e){return(HR=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=HR(e),n=0;n<r.length;n++)"default"!==r[n]&&GR(t,e,r[n]);return YR(t,e),t}),Od=(Object.defineProperty(cm,"__esModule",{value:!0}),cm.structure=cm.v2=cm.v1=void 0,km(Dp)),Hm=(cm.v1=Od,km(Tm)),Km=(cm.v2=Hm,km(N_)),v=(cm.structure=Km,cm.default=Hm,{}),KR=(Object.defineProperty(v,"__esModule",{value:!0}),v.SIGNATURES=void 0,e),Jm=KR.internal.constants,ZR=Jm.ACCESS_MODE_READ,QR=Jm.FETCH_ALL,XR=KR.internal.util.assertString,o0=Object.freeze({INIT:1,RESET:15,RUN:16,PULL_ALL:63,HELLO:1,GOODBYE:2,BEGIN:17,COMMIT:18,ROLLBACK:19,TELEMETRY:84,ROUTE:102,LOGON:106,LOGOFF:107,DISCARD:47,PULL:63}),Wt=(v.SIGNATURES=o0,N.init=function(e,t){return new N(1,[e,t],function(){return"INIT ".concat(e," {...}")})},N.run=function(e,t){return new N(16,[e,t],function(){return"RUN ".concat(e," ").concat(KR.json.stringify(t))})},N.pullAll=function(){return rA},N.reset=function(){return nA},N.hello=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);t=Object.assign({user_agent:e},t);return r&&(t.routing=r),n&&(t.patch_bolt=n),new N(1,[t],function(){return"HELLO {user_agent: '".concat(e,"', ...}")})},N.hello5x1=function(e,t){var r={user_agent:e};return(t=void 0===t?null:t)&&(r.routing=t),new N(1,[r],function(){return"HELLO {user_agent: '".concat(e,"', ...}")})},N.hello5x2=function(e,t,r){void 0===r&&(r=null);var n={user_agent:e};return eA(n,t=void 0===t?null:t),r&&(n.routing=r),new N(1,[n],function(){return"HELLO ".concat(KR.json.stringify(n))})},N.hello5x3=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var o={};return e&&(o.user_agent=e),t&&(o.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),eA(o,r),n&&(o.routing=n),new N(1,[o],function(){return"HELLO ".concat(KR.json.stringify(o))})},N.hello5x5=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var o={};return e&&(o.user_agent=e),t&&(o.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),tA(o,r),n&&(o.routing=n),new N(1,[o],function(){return"HELLO ".concat(KR.json.stringify(o))})},N.logon=function(e){return new N(106,[e],function(){return"LOGON { ... }"})},N.logoff=function(){return new N(107,[],function(){return"LOGOFF"})},N.begin=function(e){var e=void 0===e?{}:e,t=JR(e.bookmarks,e.txConfig,e.database,e.mode,e.impersonatedUser,e.notificationFilter);return new N(17,[t],function(){return"BEGIN ".concat(KR.json.stringify(t))})},N.begin5x5=function(e){var e=void 0===e?{}:e,t=JR(e.bookmarks,e.txConfig,e.database,e.mode,e.impersonatedUser,e.notificationFilter,{appendNotificationFilter:tA});return new N(17,[t],function(){return"BEGIN ".concat(KR.json.stringify(t))})},N.commit=function(){return oA},N.rollback=function(){return iA},N.runWithMetadata=function(e,t,r){var r=void 0===r?{}:r,n=JR(r.bookmarks,r.txConfig,r.database,r.mode,r.impersonatedUser,r.notificationFilter);return new N(16,[e,t,n],function(){return"RUN ".concat(e," ").concat(KR.json.stringify(t)," ").concat(KR.json.stringify(n))})},N.runWithMetadata5x5=function(e,t,r){var r=void 0===r?{}:r,n=JR(r.bookmarks,r.txConfig,r.database,r.mode,r.impersonatedUser,r.notificationFilter,{appendNotificationFilter:tA});return new N(16,[e,t,n],function(){return"RUN ".concat(e," ").concat(KR.json.stringify(t)," ").concat(KR.json.stringify(n))})},N.goodbye=function(){return uA},N.pull=function(e){var e=void 0===e?{}:e,t=e.stmtId,t=void 0===t?-1:t,e=e.n,r=$R(null==t?-1:t,(void 0===e?QR:e)||QR);return new N(63,[r],function(){return"PULL ".concat(KR.json.stringify(r))})},N.discard=function(e){var e=void 0===e?{}:e,t=e.stmtId,t=void 0===t?-1:t,e=e.n,r=$R(null==t?-1:t,(void 0===e?QR:e)||QR);return new N(47,[r],function(){return"DISCARD ".concat(KR.json.stringify(r))})},N.telemetry=function(e){var e=e.api,t=(0,KR.int)(e);return new N(84,[t],function(){return"TELEMETRY ".concat(t.toString())})},N.route=function(e,t,r){return new N(102,[e=void 0===e?{}:e,t=void 0===t?[]:t,r=void 0===r?null:r],function(){return"ROUTE ".concat(KR.json.stringify(e)," ").concat(KR.json.stringify(t)," ").concat(r)})},N.routeV4x4=function(e,t,r){void 0===e&&(e={}),void 0===t&&(t=[]);var n={};return(r=void 0===r?{}:r).databaseName&&(n.db=r.databaseName),r.impersonatedUser&&(n.imp_user=r.impersonatedUser),new N(102,[e,t,n],function(){return"ROUTE ".concat(KR.json.stringify(e)," ").concat(KR.json.stringify(t)," ").concat(KR.json.stringify(n))})},N);function N(e,t,r){this.signature=e,this.fields=t,this.toString=r}function JR(e,t,r,n,o,i,u){void 0===u&&(u={});var a={};return e.isEmpty()||(a.bookmarks=e.values()),null!==t.timeout&&(a.tx_timeout=t.timeout),t.metadata&&(a.tx_metadata=t.metadata),r&&(a.db=XR(r,"database")),o&&(a.imp_user=XR(o,"impersonatedUser")),n===ZR&&(a.mode="r"),(null!=(e=u.appendNotificationFilter)?e:eA)(a,i),a}function $R(e,t){t={n:(0,KR.int)(t)};return-1!==e&&(t.qid=(0,KR.int)(e)),t}function eA(e,t){t&&(t.minimumSeverityLevel&&(e.notifications_minimum_severity=t.minimumSeverityLevel),t.disabledCategories&&(e.notifications_disabled_categories=t.disabledCategories),t.disabledClassifications&&(e.notifications_disabled_categories=t.disabledClassifications))}function tA(e,t){t&&(t.minimumSeverityLevel&&(e.notifications_minimum_severity=t.minimumSeverityLevel),t.disabledCategories&&(e.notifications_disabled_classifications=t.disabledCategories),t.disabledClassifications&&(e.notifications_disabled_classifications=t.disabledClassifications))}var rA=new(v.default=Wt)(63,[],function(){return"PULL_ALL"}),nA=new Wt(15,[],function(){return"RESET"}),oA=new Wt(18,[],function(){return"COMMIT"}),iA=new Wt(19,[],function(){return"ROLLBACK"}),uA=new Wt(2,[],function(){return"GOODBYE"}),a0={},c0={},aA=(Object.defineProperty(c0,"__esModule",{value:!0}),c0.TypeTransformer=void 0,cm),sA=e.internal.objectUtil;function cA(e){this._transformers=e,this._transformersPerSignature=new Map(e.map(function(e){return[e.signature,e]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}function lA(e){var t=e.signature,r=e.fromStructure,n=e.toStructure,e=e.isTypeInstance;this.signature=t,this.isTypeInstance=e,this.fromStructure=r,this.toStructure=n,Object.freeze(this)}cA.prototype.fromStructure=function(e){try{return e instanceof aA.structure.Structure&&this._transformersPerSignature.has(e.signature)?(0,this._transformersPerSignature.get(e.signature).fromStructure)(e):e}catch(e){return sA.createBrokenObject(e)}},cA.prototype.toStructure=function(t){var e=this._transformers.find(function(e){return(0,e.isTypeInstance)(t)});return void 0!==e?e.toStructure(t):t},c0.default=cA,lA.prototype.extendsWith=function(e){var t=e.signature,r=e.fromStructure,n=e.toStructure,e=e.isTypeInstance;return new lA({signature:t||this.signature,fromStructure:r||this.fromStructure,toStructure:n||this.toStructure,isTypeInstance:e||this.isTypeInstance})},c0.TypeTransformer=lA;var fA=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},pA=(Object.defineProperty(a0,"__esModule",{value:!0}),e),dA=cm,hA=c0,bA=pA.error.PROTOCOL_ERROR;a0.default={createNodeTransformer:function(){return new hA.TypeTransformer({signature:78,isTypeInstance:function(e){return e instanceof pA.Node},toStructure:function(e){throw(0,pA.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),bA)},fromStructure:function(e){dA.structure.verifyStructSize("Node",3,e.size);var e=fA(e.fields,3),t=e[0],r=e[1],e=e[2];return new pA.Node(t,r,e)}})},createRelationshipTransformer:function(){return new hA.TypeTransformer({signature:82,isTypeInstance:function(e){return e instanceof pA.Relationship},toStructure:function(e){throw(0,pA.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),bA)},fromStructure:function(e){dA.structure.verifyStructSize("Relationship",5,e.size);var e=fA(e.fields,5),t=e[0],r=e[1],n=e[2],o=e[3],e=e[4];return new pA.Relationship(t,r,n,o,e)}})},createUnboundRelationshipTransformer:function(){return new hA.TypeTransformer({signature:114,isTypeInstance:function(e){return e instanceof pA.UnboundRelationship},toStructure:function(e){throw(0,pA.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),bA)},fromStructure:function(e){dA.structure.verifyStructSize("UnboundRelationship",3,e.size);var e=fA(e.fields,3),t=e[0],r=e[1],e=e[2];return new pA.UnboundRelationship(t,r,e)}})},createPathTransformer:function(){return new hA.TypeTransformer({signature:80,isTypeInstance:function(e){return e instanceof pA.Path},toStructure:function(e){throw(0,pA.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),bA)},fromStructure:function(e){dA.structure.verifyStructSize("Path",3,e.size);for(var e=fA(e.fields,3),t=e[0],r=e[1],n=e[2],o=[],i=t[0],u=0;u<n.length;u+=2){var a=t[n[u+1]],s=(0,pA.toNumber)(n[u]),c=void 0;0<s?(c=r[s-1])instanceof pA.UnboundRelationship&&(r[s-1]=c=c.bindTo(i,a)):(c=r[-s-1])instanceof pA.UnboundRelationship&&(r[-s-1]=c=c.bindTo(a,i)),o.push(new pA.PathSegment(i,c,a)),i=a}return new pA.Path(t[0],t[t.length-1],o)}})},createVectorTransformer:function(){return new hA.TypeTransformer({signature:86,isTypeInstance:function(e){return e instanceof pA.Vector},toStructure:function(e){throw(0,pA.newError)("Sending vector types require server and driver to be communicating with Bolt protocol 6.0 or later. Please update your database version.")},fromStructure:function(e){throw(0,pA.newError)("Server tried to send Vector object, but server and driver are communicating on a version of the Bolt protocol that does not support vectors.")}})}};var yA,_A=r&&r.__assign||function(){return(_A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},vA=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),mA=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d0=r&&r.__importStar||(yA=function(e){return(yA=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=yA(e),n=0;n<r.length;n++)"default"!==r[n]&&vA(t,e,r[n]);return mA(t,e),t}),y0=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},gA=(Object.defineProperty(v_,"__esModule",{value:!0}),w_),OA=cm,wA=d0(v),EA=A,PA=e,TA=y0(a0),SA=y0(c0),jA=PA.internal.bookmarks.Bookmarks,m0=PA.internal.constants,CA=m0.ACCESS_MODE_WRITE,IA=m0.BOLT_PROTOCOL_V1,RA=(PA.internal.logger.Logger,PA.internal.txConfig.TxConfig),AA=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),i=(Object.defineProperty(kA.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new SA.default(Object.values(TA.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(kA.prototype,"version",{get:function(){return IA},enumerable:!1,configurable:!0}),Object.defineProperty(kA.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(kA.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(kA.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),kA.prototype.packer=function(){return this._packer},kA.prototype.packable=function(e){return this._packer.packable(e,this.transformer.toStructure)},kA.prototype.unpacker=function(){return this._unpacker},kA.prototype.unpack=function(e){return this._unpacker.unpack(e,this.transformer.fromStructure)},kA.prototype.transformMetadata=function(e){return e},kA.prototype.enrichErrorMetadata=function(e){return _A(_A({},e),{diagnostic_record:null!==e.diagnostic_record?_A(_A({},AA),e.diagnostic_record):null})},kA.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,u=e.onComplete,e=new EA.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return t._onLoginCompleted(e,u)}});return(0,gA.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(wA.default.init(r,n),e,!0),e},kA.prototype.logoff=function(e){var e=void 0===e?{}:e,t=e.onComplete,r=e.onError,e=(e.flush,new EA.LogoffObserver({onCompleted:t,onError:r})),t=(0,PA.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(t.message),e.onError(t),t},kA.prototype.logon=function(e){var t=this,e=void 0===e?{}:e,r=e.authToken,n=e.onComplete,o=e.onError,e=(e.flush,new EA.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},r,n)},onError:function(e){return t._onLoginError(e,o)}})),i=(0,PA.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(i.message),e.onError(i),i},kA.prototype.prepareToClose=function(){},kA.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,u=e.notificationFilter,a=e.beforeError,s=e.afterError,c=e.beforeComplete,e=e.afterComplete;return this.run("BEGIN",t?t.asBeginTransactionParameters():{},{bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i,notificationFilter:u,beforeError:a,afterError:s,beforeComplete:c,afterComplete:e,flush:!1})},kA.prototype.commitTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete;return this.run("COMMIT",{},{bookmarks:jA.empty(),txConfig:RA.empty(),mode:CA,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e})},kA.prototype.rollbackTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete;return this.run("ROLLBACK",{},{bookmarks:jA.empty(),txConfig:RA.empty(),mode:CA,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e})},kA.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=(r.bookmarks,r.txConfig),o=r.database,i=(r.mode,r.impersonatedUser),u=r.notificationFilter,a=r.beforeKeys,s=r.afterKeys,c=r.beforeError,l=r.afterError,f=r.beforeComplete,p=r.afterComplete,d=r.flush,d=void 0===d||d,h=r.highRecordWatermark,h=void 0===h?Number.MAX_VALUE:h,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,a=new EA.ResultStreamObserver({server:this._server,beforeKeys:a,afterKeys:s,beforeError:c,afterError:l,beforeComplete:f,afterComplete:p,highRecordWatermark:h,lowRecordWatermark:r});return(0,gA.assertTxConfigIsEmpty)(n,this._onProtocolError,a),(0,gA.assertDatabaseIsEmpty)(o,this._onProtocolError,a),(0,gA.assertImpersonatedUserIsEmpty)(i,this._onProtocolError,a),(0,gA.assertNotificationFilterIsEmpty)(u,this._onProtocolError,a),this.write(wA.default.run(e,t),a,!1),this.write(wA.default.pullAll(),a,d),a},Object.defineProperty(kA.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),kA.prototype.reset=function(e){var e=void 0===e?{}:e,t=e.onError,e=e.onComplete,t=new EA.ResetObserver({onProtocolError:this._onProtocolError,onError:t,onComplete:e});return this.write(wA.default.reset(),t,!0),t},kA.prototype.telemetry=function(e,t){e.api;e=void 0===t?{}:t,e.onError,t=e.onCompleted,e=new EA.CompletedObserver;return t&&t(),e},kA.prototype._createPacker=function(e){return new OA.v1.Packer(e)},kA.prototype._createUnpacker=function(e,t){return new OA.v1.Unpacker(e,t)},kA.prototype.write=function(e,t,r){this._lastMessageSignature=e.signature;var n=new OA.structure.Structure(e.signature,e.fields);this.packable(n)(),this.queueObserverIfProtocolIsNotBroken(t)&&(this._log.isDebugEnabled()&&this._log.debug("C: ".concat(e)),this._chunker.messageBoundary(),r&&this._chunker.flush())},kA.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===wA.SIGNATURES.HELLO||this._lastMessageSignature===wA.SIGNATURES.LOGON},kA.prototype.isLastMessageReset=function(){return this._lastMessageSignature===wA.SIGNATURES.RESET},kA.prototype.notifyFatalError=function(e){return this._fatalError=e,this._responseHandler._notifyErrorToObservers(e)},kA.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},kA.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},kA.prototype.queueObserverIfProtocolIsNotBroken=function(e){return this.isBroken()?(this.notifyFatalErrorToObserver(e),!1):this._responseHandler._queueObserver(e)},kA.prototype.isBroken=function(){return!!this._fatalError},kA.prototype.notifyFatalErrorToObserver=function(e){e&&e.onError&&e.onError(this._fatalError)},kA.prototype.resetFailure=function(){this._responseHandler._resetFailure()},kA.prototype._onLoginCompleted=function(e,t,r){this._initialized=!0,this._authToken=t,e&&(t=e.server,this._server.version||(this._server.version=t)),r&&r(e)},kA.prototype._onLoginError=function(e,t){this._onProtocolError(e.message),t&&t(e)},kA);function kA(e,t,r,n,o,i){var r=void 0===r?{}:r,u=r.disableLosslessIntegers,r=r.useBigInt;void 0===n&&(n=function(){return null}),this._server=e||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(u,r),this._responseHandler=n(this),this._log=o,this._onProtocolError=i,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:u,useBigInt:r}}v_.default=i;var E0={},dy={},I0={},MA=(Object.defineProperty(I0,"__esModule",{value:!0}),I0.epochDayToDate=qA,I0.nanoOfDayToLocalTime=WA,I0.epochSecondAndNanoToLocalDateTime=function(e,t){var r=BA(e,FA),e=VA(e,FA).multiply(UA).add(t),t=qA(r),r=WA(e);return new MA.LocalDateTime(t.year,t.month,t.day,r.hour,r.minute,r.second,r.nanosecond)},e),x0=MA.internal.temporalUtil,NA=x0.DAYS_0000_TO_1970,xA=x0.DAYS_PER_400_YEAR_CYCLE,DA=x0.NANOS_PER_HOUR,LA=x0.NANOS_PER_MINUTE,UA=x0.NANOS_PER_SECOND,FA=x0.SECONDS_PER_DAY,BA=x0.floorDiv,VA=x0.floorMod;function qA(e){var e=(e=(0,MA.int)(e)).add(NA).subtract(60),t=(0,MA.int)(0),r=(e.lessThan(0)&&(t=(r=e.add(1).div(xA).subtract(1)).multiply(400),e=e.add(r.multiply(-xA))),e.multiply(400).add(591).div(xA)),n=e.subtract(r.multiply(365).add(r.div(4)).subtract(r.div(100)).add(r.div(400))),e=(n.lessThan(0)&&(r=r.subtract(1),n=e.subtract(r.multiply(365).add(r.div(4)).subtract(r.div(100)).add(r.div(400)))),r=r.add(t),n),t=e.multiply(5).add(2).div(153),n=t.add(2).modulo(12).add(1),e=e.subtract(t.multiply(306).add(5).div(10)).add(1),r=r.add(t.div(10));return new MA.Date(r,n,e)}function WA(e){var t=(e=(0,MA.int)(e)).div(DA),r=(e=e.subtract(t.multiply(DA))).div(LA),n=(e=e.subtract(r.multiply(LA))).div(UA),e=e.subtract(n.multiply(UA));return new MA.LocalTime(t,r,n,e)}var zA=r&&r.__assign||function(){return(zA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},HA=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},B0=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},GA=(Object.defineProperty(dy,"__esModule",{value:!0}),e),YA=cm,KA=c0,ZA=I0,G0=B0(a0),zn=GA.internal.temporalUtil,QA=zn.dateToEpochDay,XA=zn.localDateTimeToEpochSecond,JA=zn.localTimeToNanoOfDay;function $A(e,t,r){if(!t&&!r)return e;var n,o,i,u=Object.create(Object.getPrototypeOf(e));for(n in e)!0===Object.prototype.hasOwnProperty.call(e,n)&&(o=e[n],u[n]=(0,GA.isInt)(o)?(i=o,r?i.toBigInt():i.toNumberOrInfinity()):o);return Object.freeze(u),u}dy.default=zA(zA({},G0.default),{createPoint2DTransformer:function(){return new KA.TypeTransformer({signature:88,isTypeInstance:function(e){return(0,GA.isPoint)(e)&&(null===e.z||void 0===e.z)},toStructure:function(e){return new YA.structure.Structure(88,[(0,GA.int)(e.srid),e.x,e.y])},fromStructure:function(e){YA.structure.verifyStructSize("Point2D",3,e.size);var e=HA(e.fields,3),t=e[0],r=e[1],e=e[2];return new GA.Point(t,r,e,void 0)}})},createPoint3DTransformer:function(){return new KA.TypeTransformer({signature:89,isTypeInstance:function(e){return(0,GA.isPoint)(e)&&null!==e.z&&void 0!==e.z},toStructure:function(e){return new YA.structure.Structure(89,[(0,GA.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){YA.structure.verifyStructSize("Point3D",4,e.size);var e=HA(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new GA.Point(t,r,n,e)}})},createDurationTransformer:function(){return new KA.TypeTransformer({signature:69,isTypeInstance:GA.isDuration,toStructure:function(e){var t=(0,GA.int)(e.months),r=(0,GA.int)(e.days),n=(0,GA.int)(e.seconds),e=(0,GA.int)(e.nanoseconds);return new YA.structure.Structure(69,[t,r,n,e])},fromStructure:function(e){YA.structure.verifyStructSize("Duration",4,e.size);var e=HA(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new GA.Duration(t,r,n,e)}})},createLocalTimeTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new KA.TypeTransformer({signature:116,isTypeInstance:GA.isLocalTime,toStructure:function(e){e=JA(e.hour,e.minute,e.second,e.nanosecond);return new YA.structure.Structure(116,[e])},fromStructure:function(e){YA.structure.verifyStructSize("LocalTime",1,e.size);e=HA(e.fields,1)[0];return $A((0,ZA.nanoOfDayToLocalTime)(e),t,r)}})},createTimeTransformer:function(e){var r=e.disableLosslessIntegers,n=e.useBigInt;return new KA.TypeTransformer({signature:84,isTypeInstance:GA.isTime,toStructure:function(e){var t=JA(e.hour,e.minute,e.second,e.nanosecond),e=(0,GA.int)(e.timeZoneOffsetSeconds);return new YA.structure.Structure(84,[t,e])},fromStructure:function(e){YA.structure.verifyStructSize("Time",2,e.size);var e=HA(e.fields,2),t=e[0],e=e[1],t=(0,ZA.nanoOfDayToLocalTime)(t);return $A(new GA.Time(t.hour,t.minute,t.second,t.nanosecond,e),r,n)}})},createDateTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new KA.TypeTransformer({signature:68,isTypeInstance:GA.isDate,toStructure:function(e){e=QA(e.year,e.month,e.day);return new YA.structure.Structure(68,[e])},fromStructure:function(e){YA.structure.verifyStructSize("Date",1,e.size);e=HA(e.fields,1)[0];return $A((0,ZA.epochDayToDate)(e),t,r)}})},createLocalDateTimeTransformer:function(e){var r=e.disableLosslessIntegers,n=e.useBigInt;return new KA.TypeTransformer({signature:100,isTypeInstance:GA.isLocalDateTime,toStructure:function(e){var t=XA(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),e=(0,GA.int)(e.nanosecond);return new YA.structure.Structure(100,[t,e])},fromStructure:function(e){YA.structure.verifyStructSize("LocalDateTime",2,e.size);var e=HA(e.fields,2),t=e[0],e=e[1];return $A((0,ZA.epochSecondAndNanoToLocalDateTime)(t,e),r,n)}})},createDateTimeWithZoneIdTransformer:function(e){var n=e.disableLosslessIntegers,o=e.useBigInt;return new KA.TypeTransformer({signature:102,isTypeInstance:function(e){return(0,GA.isDateTime)(e)&&null!=e.timeZoneId},toStructure:function(e){var t=XA(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,GA.int)(e.nanosecond),e=e.timeZoneId;return new YA.structure.Structure(102,[t,r,e])},fromStructure:function(e){YA.structure.verifyStructSize("DateTimeWithZoneId",3,e.size);var e=HA(e.fields,3),t=e[0],r=e[1],e=e[2],t=(0,ZA.epochSecondAndNanoToLocalDateTime)(t,r);return $A(new GA.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,null,e),n,o)}})},createDateTimeWithOffsetTransformer:function(e){var n=e.disableLosslessIntegers,o=e.useBigInt;return new KA.TypeTransformer({signature:70,isTypeInstance:function(e){return(0,GA.isDateTime)(e)&&null==e.timeZoneId},toStructure:function(e){var t=XA(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,GA.int)(e.nanosecond),e=(0,GA.int)(e.timeZoneOffsetSeconds);return new YA.structure.Structure(70,[t,r,e])},fromStructure:function(e){YA.structure.verifyStructSize("DateTimeWithZoneOffset",3,e.size);var e=HA(e.fields,3),t=e[0],r=e[1],e=e[2],t=(0,ZA.epochSecondAndNanoToLocalDateTime)(t,r);return $A(new GA.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,e,null),n,o)}})}});var ek,tk,X0=r&&r.__extends||(ek=function(e,t){return(ek=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ek(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),rg=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ug=(Object.defineProperty(E0,"__esModule",{value:!0}),rg(v_)),rk=rg(cm),hy=e,nk=rg(dy),ok=rg(c0),ik=hy.internal.constants.BOLT_PROTOCOL_V2,dg=(tk=ug.default,X0(uk,tk),uk.prototype._createPacker=function(e){return new rk.default.Packer(e)},uk.prototype._createUnpacker=function(e,t){return new rk.default.Unpacker(e,t)},Object.defineProperty(uk.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new ok.default(Object.values(nk.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(uk.prototype,"version",{get:function(){return ik},enumerable:!1,configurable:!0}),uk);function uk(){return null!==tk&&tk.apply(this,arguments)||this}E0.default=dg;var ak,sk,Og={},Pg={},ck=r&&r.__assign||function(){return(ck=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Rg=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},kg=(Object.defineProperty(Pg,"__esModule",{value:!0}),Rg(dy)),Dg=(Pg.default=ck({},kg.default),r&&r.__extends||(ak=function(e,t){return(ak=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ak(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),lk=r&&r.__assign||function(){return(lk=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Vg=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},zg=(Object.defineProperty(Og,"__esModule",{value:!0}),Vg(E0)),fk=Vg(v),pk=w_,dk=A,hk=Vg(Pg),bk=Vg(c0),yk=(e.internal.bookmarks.Bookmarks,e.internal.constants.BOLT_PROTOCOL_V3),_k=e.internal.txConfig.TxConfig,vk="context",mk="CALL dbms.cluster.routing.getRoutingTable($".concat(vk,")"),gk=new dk.StreamObserver,Rf=(sk=zg.default,Dg(Ok,sk),Object.defineProperty(Ok.prototype,"version",{get:function(){return yk},enumerable:!1,configurable:!0}),Object.defineProperty(Ok.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new bk.default(Object.values(hk.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Ok.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},Ok.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,u=e.onComplete,e=new dk.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return t._onLoginCompleted(e,n,u)}});return(0,pk.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(fk.default.hello(r,n),e,!0),e},Ok.prototype.prepareToClose=function(){this.write(fk.default.goodbye(),gk,!0)},Ok.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.impersonatedUser,i=e.notificationFilter,u=e.mode,a=e.beforeError,s=e.afterError,c=e.beforeComplete,e=e.afterComplete,a=new dk.ResultStreamObserver({server:this._server,beforeError:a,afterError:s,beforeComplete:c,afterComplete:e});return a.prepareToHandleSingleResponse(),(0,pk.assertDatabaseIsEmpty)(n,this._onProtocolError,a),(0,pk.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,a),(0,pk.assertNotificationFilterIsEmpty)(i,this._onProtocolError,a),this.write(fk.default.begin({bookmarks:t,txConfig:r,mode:u}),a,!0),a},Ok.prototype.commitTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete,t=new dk.ResultStreamObserver({server:this._server,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e});return t.prepareToHandleSingleResponse(),this.write(fk.default.commit(),t,!0),t},Ok.prototype.rollbackTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete,t=new dk.ResultStreamObserver({server:this._server,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e});return t.prepareToHandleSingleResponse(),this.write(fk.default.rollback(),t,!0),t},Ok.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,u=r.impersonatedUser,a=r.notificationFilter,s=r.mode,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,p=r.afterError,d=r.beforeComplete,h=r.afterComplete,b=r.flush,b=void 0===b||b,y=r.highRecordWatermark,y=void 0===y?Number.MAX_VALUE:y,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new dk.ResultStreamObserver({server:this._server,beforeKeys:c,afterKeys:l,beforeError:f,afterError:p,beforeComplete:d,afterComplete:h,highRecordWatermark:y,lowRecordWatermark:r});return(0,pk.assertDatabaseIsEmpty)(i,this._onProtocolError,c),(0,pk.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,c),(0,pk.assertNotificationFilterIsEmpty)(a,this._onProtocolError,c),this.write(fk.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,mode:s}),c,!1),this.write(fk.default.pullAll(),c,b),c},Ok.prototype.requestRoutingInformation=function(e){var t,r=e.routingContext,n=e.sessionContext,n=void 0===n?{}:n,o=e.onError,e=e.onCompleted,r=this.run(mk,((t={})[vk]=void 0===r?{}:r,t),lk(lk({},n),{txConfig:_k.empty()}));return new dk.ProcedureRouteObserver({resultObserver:r,onProtocolError:this._onProtocolError,onError:o,onCompleted:e})},Ok);function Ok(){return null!==sk&&sk.apply(this,arguments)||this}Og.default=Rf;var wk,Ek,Kg={},Zg={},Pk=r&&r.__assign||function(){return(Pk=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},tO=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},oO=(Object.defineProperty(Zg,"__esModule",{value:!0}),tO(Pg)),S_=(Zg.default=Pk({},oO.default),r&&r.__extends||(wk=function(e,t){return(wk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}wk(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),Tk=r&&r.__assign||function(){return(Tk=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},lm=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},aO=(Object.defineProperty(Kg,"__esModule",{value:!0}),lm(Og)),Sk=lm(v),jk=w_,Ck=A,Ik=lm(Zg),Rk=lm(c0),pO=(e.internal.bookmarks.Bookmarks,e.internal.constants),Ak=pO.BOLT_PROTOCOL_V4_0,kk=pO.FETCH_ALL,Mk=e.internal.txConfig.TxConfig,Nk="context",xk="database",Dk="CALL dbms.routing.getRoutingTable($".concat(Nk,", $").concat(xk,")"),bO=(Ek=aO.default,S_(Lk,Ek),Object.defineProperty(Lk.prototype,"version",{get:function(){return Ak},enumerable:!1,configurable:!0}),Object.defineProperty(Lk.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new Rk.default(Object.values(Ik.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Lk.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.impersonatedUser,i=e.notificationFilter,u=e.mode,a=e.beforeError,s=e.afterError,c=e.beforeComplete,e=e.afterComplete,a=new Ck.ResultStreamObserver({server:this._server,beforeError:a,afterError:s,beforeComplete:c,afterComplete:e});return a.prepareToHandleSingleResponse(),(0,jk.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,a),(0,jk.assertNotificationFilterIsEmpty)(i,this._onProtocolError,a),this.write(Sk.default.begin({bookmarks:t,txConfig:r,database:n,mode:u}),a,!0),a},Lk.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,u=r.impersonatedUser,a=r.notificationFilter,s=r.mode,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,p=r.afterError,d=r.beforeComplete,h=r.afterComplete,b=r.flush,b=void 0===b||b,y=r.reactive,y=void 0!==y&&y,_=r.fetchSize,_=void 0===_?kk:_,v=r.highRecordWatermark,v=void 0===v?Number.MAX_VALUE:v,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new Ck.ResultStreamObserver({server:this._server,reactive:y,fetchSize:_,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:p,beforeComplete:d,afterComplete:h,highRecordWatermark:v,lowRecordWatermark:r}),l=((0,jk.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,c),(0,jk.assertNotificationFilterIsEmpty)(a,this._onProtocolError,c),y);return this.write(Sk.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,database:i,mode:s}),c,l&&b),y||this.write(Sk.default.pull({n:_}),c,b),c},Lk.prototype._requestMore=function(e,t,r){this.write(Sk.default.pull({stmtId:e,n:t}),r,!0)},Lk.prototype._requestDiscard=function(e,t){this.write(Sk.default.discard({stmtId:e}),t,!0)},Lk.prototype._noOp=function(){},Lk.prototype.requestRoutingInformation=function(e){var t,r=e.routingContext,n=e.databaseName,n=void 0===n?null:n,o=e.sessionContext,o=void 0===o?{}:o,i=e.onError,e=e.onCompleted,r=this.run(Dk,((t={})[Nk]=void 0===r?{}:r,t[xk]=n,t),Tk(Tk({},o),{txConfig:Mk.empty()}));return new Ck.ProcedureRouteObserver({resultObserver:r,onProtocolError:this._onProtocolError,onError:i,onCompleted:e})},Lk);function Lk(){return null!==Ek&&Ek.apply(this,arguments)||this}Kg.default=bO;var Uk,Fk,y={},EO={},Bk=r&&r.__assign||function(){return(Bk=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},sv=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},jO=(Object.defineProperty(EO,"__esModule",{value:!0}),sv(Zg)),$l=(EO.default=Bk({},jO.default),r&&r.__extends||(Uk=function(e,t){return(Uk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Uk(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),kO=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ff=(Object.defineProperty(y,"__esModule",{value:!0}),kO(Kg)),Vk=kO(v),qk=A,py=e,Wk=w_,zk=kO(EO),Hk=kO(c0),Gk=py.internal.constants.BOLT_PROTOCOL_V4_1,o=(Fk=Ff.default,$l(Yk,Fk),Object.defineProperty(Yk.prototype,"version",{get:function(){return Gk},enumerable:!1,configurable:!0}),Object.defineProperty(Yk.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new Hk.default(Object.values(zk.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Yk.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,u=e.onComplete,e=new qk.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return t._onLoginCompleted(e,n,u)}});return(0,Wk.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(Vk.default.hello(r,n,this._serversideRouting),e,!0),e},Yk);function Yk(e,t,r,n,o,i,u){e=Fk.call(this,e,t,r,n=void 0===n?function(){return null}:n,o,i)||this;return e._serversideRouting=u,e}y.default=o;var Kk,Zk,WO={},KO={},Qk=r&&r.__assign||function(){return(Qk=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Sf=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},O=(Object.defineProperty(KO,"__esModule",{value:!0}),Sf(EO)),bw=(KO.default=Qk({},O.default),r&&r.__extends||(Kk=function(e,t){return(Kk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Kk(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),b=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},p=(Object.defineProperty(WO,"__esModule",{value:!0}),b(y)),I=e,Xk=b(KO),Jk=b(c0),$k=I.internal.constants.BOLT_PROTOCOL_V4_2,j=(Zk=p.default,bw(eM,Zk),Object.defineProperty(eM.prototype,"version",{get:function(){return $k},enumerable:!1,configurable:!0}),Object.defineProperty(eM.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new Jk.default(Object.values(Xk.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),eM);function eM(){return null!==Zk&&Zk.apply(this,arguments)||this}WO.default=j;var gt={},g={},tM=r&&r.__assign||function(){return(tM=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ln=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},E=(Object.defineProperty(g,"__esModule",{value:!0}),ln(KO)),rc=(g.default=tM({},E.default),{}),T={},rM=r&&r.__assign||function(){return(rM=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},t=(Object.defineProperty(T,"__esModule",{value:!0}),n(g)),nM=(T.default=rM({},t.default),r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u}),P=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},oM=(Object.defineProperty(rc,"__esModule",{value:!0}),cm),iM=e,uM=P(T),aM=I0,sM=av,cM=iM.internal.temporalUtil.localDateTimeToEpochSecond;var lM=new Map;function fM(e,t,r){e=e,lM.has(e)||(n=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"}),lM.set(e,n));var n=lM.get(e),e=(0,iM.int)(t).multiply(1e3).add((0,iM.int)(r).div(1e6)).toNumber(),r=n.formatToParts(e).reduce(function(e,t){return"era"===t.type?e.adjustEra="B"===t.value.toUpperCase()?function(e){return e.subtract(1).negate()}:sM.identity:"hour"===t.type?e.hour=(0,iM.int)(t.value).modulo(24):"literal"!==t.type&&(e[t.type]=(0,iM.int)(t.value)),e},{}),e=(r.year=r.adjustEra(r.year),cM(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond));return r.timeZoneOffsetSeconds=e.subtract(t),r.hour=r.hour.modulo(24),r}function pM(e,t,r){if(!t&&!r)return e;var n,o,i,u=Object.create(Object.getPrototypeOf(e));for(n in e)!0===Object.prototype.hasOwnProperty.call(e,n)&&(o=e[n],u[n]=(0,iM.isInt)(o)?(i=o,r?i.toBigInt():i.toNumberOrInfinity()):o);return Object.freeze(u),u}rc.default={createDateTimeWithZoneIdTransformer:function(e,u){var n=e.disableLosslessIntegers,o=e.useBigInt;return uM.default.createDateTimeWithZoneIdTransformer(e).extendsWith({signature:105,fromStructure:function(e){oM.structure.verifyStructSize("DateTimeWithZoneId",3,e.size);var e=nM(e.fields,3),t=e[0],r=e[1],e=e[2],t=fM(e,t,r);return pM(new iM.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,(0,iM.int)(r),t.timeZoneOffsetSeconds,e),n,o)},toStructure:function(e){var t=cM(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=null!=e.timeZoneOffsetSeconds?e.timeZoneOffsetSeconds:(r=e.timeZoneId,i=t,o=e.nanosecond,n=fM(r,i,o),n=cM(n.year,n.month,n.day,n.hour,n.minute,n.second,o).subtract(i),i=i.subtract(n),n=fM(r,i,o),cM(n.year,n.month,n.day,n.hour,n.minute,n.second,o).subtract(i)),n=(null==e.timeZoneOffsetSeconds&&u.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.'),t.subtract(r)),o=(0,iM.int)(e.nanosecond),i=e.timeZoneId;return new oM.structure.Structure(105,[n,o,i])}})},createDateTimeWithOffsetTransformer:function(e){var n=e.disableLosslessIntegers,o=e.useBigInt;return uM.default.createDateTimeWithOffsetTransformer(e).extendsWith({signature:73,toStructure:function(e){var t=cM(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,iM.int)(e.nanosecond),e=(0,iM.int)(e.timeZoneOffsetSeconds),t=t.subtract(e);return new oM.structure.Structure(73,[t,r,e])},fromStructure:function(e){oM.structure.verifyStructSize("DateTimeWithZoneOffset",3,e.size);var e=nM(e.fields,3),t=e[0],r=e[1],e=e[2],t=(0,iM.int)(t).add(e),t=(0,aM.epochSecondAndNanoToLocalDateTime)(t,r);return pM(new iM.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,e,null),n,o)}})}};var dM,hM,h=r&&r.__extends||(dM=function(e,t){return(dM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}dM(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),bM=r&&r.__assign||function(){return(bM=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Hn=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Gt=(Object.defineProperty(gt,"__esModule",{value:!0}),Hn(WO)),yM=Hn(v),_M=A,vM=w_,mM=Hn(g),gM=Hn(rc),OM=Hn(c0),wM=e.internal.bookmarks.Bookmarks,EM=e.internal.constants.BOLT_PROTOCOL_V4_3,u=(hM=Gt.default,h(PM,hM),Object.defineProperty(PM.prototype,"version",{get:function(){return EM},enumerable:!1,configurable:!0}),Object.defineProperty(PM.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new OM.default(Object.values(mM.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),PM.prototype.requestRoutingInformation=function(e){var t=e.routingContext,t=void 0===t?{}:t,r=e.databaseName,r=void 0===r?null:r,n=e.sessionContext,n=void 0===n?{}:n,o=e.onError,e=e.onCompleted,o=new _M.RouteObserver({onProtocolError:this._onProtocolError,onError:o,onCompleted:e}),e=n.bookmarks||wM.empty();return this.write(yM.default.route(t,e.values(),r),o,!0),o},PM.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,u=e.onComplete,e=new _M.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return void 0!==e.patch_bolt&&t._applyPatches(e.patch_bolt),t._onLoginCompleted(e,n,u)}});return(0,vM.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(yM.default.hello(r,n,this._serversideRouting,["utc"]),e,!0),e},PM.prototype._applyPatches=function(e){e.includes("utc")&&this._applyUtcPatch()},PM.prototype._applyUtcPatch=function(){var t=this;this._transformer=new OM.default(Object.values(bM(bM({},mM.default),gM.default)).map(function(e){return e(t._config,t._log)}))},PM);function PM(){return null!==hM&&hM.apply(this,arguments)||this}gt.default=u;var TM,SM,Yl={},Kf=r&&r.__extends||(TM=function(e,t){return(TM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}TM(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),jM=r&&r.__assign||function(){return(jM=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},m=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Bl=(Object.defineProperty(Yl,"__esModule",{value:!0}),m(gt)),xf=e,CM=m(v),IM=A,RM=w_,AM=m(T),kM=m(rc),MM=m(c0),ql=xf.internal.constants,NM=ql.BOLT_PROTOCOL_V4_4,xM=ql.FETCH_ALL,DM=xf.internal.bookmarks.Bookmarks,Kl=(SM=Bl.default,Kf(LM,SM),Object.defineProperty(LM.prototype,"version",{get:function(){return NM},enumerable:!1,configurable:!0}),Object.defineProperty(LM.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new MM.default(Object.values(AM.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),LM.prototype.requestRoutingInformation=function(e){var t=e.routingContext,t=void 0===t?{}:t,r=e.databaseName,r=void 0===r?null:r,n=e.impersonatedUser,n=void 0===n?null:n,o=e.sessionContext,o=void 0===o?{}:o,i=e.onError,e=e.onCompleted,i=new IM.RouteObserver({onProtocolError:this._onProtocolError,onError:i,onCompleted:e}),e=o.bookmarks||DM.empty();return this.write(CM.default.routeV4x4(t,e.values(),{databaseName:r,impersonatedUser:n}),i,!0),i},LM.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,u=r.mode,a=r.impersonatedUser,s=r.notificationFilter,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,p=r.afterError,d=r.beforeComplete,h=r.afterComplete,b=r.flush,b=void 0===b||b,y=r.reactive,y=void 0!==y&&y,_=r.fetchSize,_=void 0===_?xM:_,v=r.highRecordWatermark,v=void 0===v?Number.MAX_VALUE:v,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new IM.ResultStreamObserver({server:this._server,reactive:y,fetchSize:_,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:p,beforeComplete:d,afterComplete:h,highRecordWatermark:v,lowRecordWatermark:r}),l=((0,RM.assertNotificationFilterIsEmpty)(s,this._onProtocolError,c),y);return this.write(CM.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,database:i,mode:u,impersonatedUser:a}),c,l&&b),y||this.write(CM.default.pull({n:_}),c,b),c},LM.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,u=e.notificationFilter,a=e.beforeError,s=e.afterError,c=e.beforeComplete,e=e.afterComplete,a=new IM.ResultStreamObserver({server:this._server,beforeError:a,afterError:s,beforeComplete:c,afterComplete:e});return a.prepareToHandleSingleResponse(),(0,RM.assertNotificationFilterIsEmpty)(u,this._onProtocolError,a),this.write(CM.default.begin({bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i}),a,!0),a},LM.prototype._applyUtcPatch=function(){var t=this;this._transformer=new MM.default(Object.values(jM(jM({},AM.default),kM.default)).map(function(e){return e(t._config,t._log)}))},LM);function LM(){return null!==SM&&SM.apply(this,arguments)||this}Yl.default=Kl;var _={},Hl={},UM=r&&r.__assign||function(){return(UM=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},FM=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},Jp=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},BM=(Object.defineProperty(Hl,"__esModule",{value:!0}),cm),VM=e,qM=Jp(T),id=Jp(rc);Hl.default=UM(UM(UM({},qM.default),id.default),{createNodeTransformer:function(e){return qM.default.createNodeTransformer(e).extendsWith({fromStructure:function(e){BM.structure.verifyStructSize("Node",4,e.size);var e=FM(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new VM.Node(t,r,n,e)}})},createRelationshipTransformer:function(e){return qM.default.createRelationshipTransformer(e).extendsWith({fromStructure:function(e){BM.structure.verifyStructSize("Relationship",8,e.size);var e=FM(e.fields,8),t=e[0],r=e[1],n=e[2],o=e[3],i=e[4],u=e[5],a=e[6],e=e[7];return new VM.Relationship(t,r,n,o,i,u,a,e)}})},createUnboundRelationshipTransformer:function(e){return qM.default.createUnboundRelationshipTransformer(e).extendsWith({fromStructure:function(e){BM.structure.verifyStructSize("UnboundRelationship",4,e.size);var e=FM(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new VM.UnboundRelationship(t,r,n,e)}})}});var WM,zM,Fl=r&&r.__extends||(WM=function(e,t){return(WM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}WM(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Vf=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(_,"__esModule",{value:!0}),Vf(Yl)),HM=w_,GM=Vf(Hl),YM=Vf(c0),KM=Vf(v),ZM=A,QM=e.internal.constants.BOLT_PROTOCOL_V5_0,Mh=(zM=c.default,Fl(XM,zM),Object.defineProperty(XM.prototype,"version",{get:function(){return QM},enumerable:!1,configurable:!0}),Object.defineProperty(XM.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new YM.default(Object.values(GM.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),XM.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,u=e.onComplete,e=new ZM.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return t._onLoginCompleted(e,n,u)}});return(0,HM.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(KM.default.hello(r,n,this._serversideRouting),e,!0),e},XM);function XM(){return null!==zM&&zM.apply(this,arguments)||this}_.default=Mh;var JM,$M,Vh={},Wh={},eN=r&&r.__assign||function(){return(eN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},nb=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ul=(Object.defineProperty(Wh,"__esModule",{value:!0}),nb(Hl)),Xh=(Wh.default=eN({},Ul.default),r&&r.__extends||(JM=function(e,t){return(JM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}JM(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),tN=r&&r.__assign||function(){return(tN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mh=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ub=(Object.defineProperty(Vh,"__esModule",{value:!0}),mh(_)),rN=w_,nN=mh(Wh),oN=mh(c0),iN=mh(v),uN=A,aN=e.internal.constants.BOLT_PROTOCOL_V5_1,Ll=($M=ub.default,Xh(sN,$M),Object.defineProperty(sN.prototype,"version",{get:function(){return aN},enumerable:!1,configurable:!0}),Object.defineProperty(sN.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new oN.default(Object.values(nN.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(sN.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),sN.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,u=e.onComplete,a={},e=new uN.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return a.metadata=e,t._onLoginCompleted(e)}});return(0,rN.assertNotificationFilterIsEmpty)(o,this._onProtocolError,e),this.write(iN.default.hello5x1(r,this._serversideRouting),e,!1),this.logon({authToken:n,onComplete:function(e){return u(tN(tN({},e),a.metadata))},onError:i,flush:!0})},sN.prototype.logon=function(e){var t=this,e=void 0===e?{}:e,r=e.authToken,n=e.onComplete,o=e.onError,e=e.flush,i=new uN.LoginObserver({onCompleted:function(){return t._onLoginCompleted(null,r,n)},onError:function(e){return t._onLoginError(e,o)}});return this.write(iN.default.logon(r),i,e),i},sN.prototype.logoff=function(e){var e=void 0===e?{}:e,t=e.onComplete,r=e.onError,e=e.flush,t=new uN.LogoffObserver({onCompleted:t,onError:r});return this.write(iN.default.logoff(),t,e),t},sN);function sN(){return null!==$M&&$M.apply(this,arguments)||this}Vh.default=Ll;var cN,lN,dt={},kh={},fN=r&&r.__assign||function(){return(fN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},zd=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},lb=(Object.defineProperty(kh,"__esModule",{value:!0}),zd(Wh)),mb=(kh.default=fN({},lb.default),r&&r.__extends||(cN=function(e,t){return(cN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}cN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),pN=r&&r.__assign||function(){return(pN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},S=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},or=(Object.defineProperty(dt,"__esModule",{value:!0}),S(Vh)),dN=S(kh),hN=S(c0),bN=S(v),yN=A,R=e.internal.constants,_N=R.BOLT_PROTOCOL_V5_2,vN=R.FETCH_ALL,zh=(lN=or.default,mb(mN,lN),Object.defineProperty(mN.prototype,"version",{get:function(){return _N},enumerable:!1,configurable:!0}),Object.defineProperty(mN.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new hN.default(Object.values(dN.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(mN.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),mN.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=(e.boltAgent,e.authToken),o=e.notificationFilter,i=e.onError,u=e.onComplete,a={},e=new yN.LoginObserver({onError:function(e){return t._onLoginError(e,i)},onCompleted:function(e){return a.metadata=e,t._onLoginCompleted(e)}});return this.write(bN.default.hello5x2(r,o,this._serversideRouting),e,!1),this.logon({authToken:n,onComplete:function(e){return u(pN(pN({},e),a.metadata))},onError:i,flush:!0})},mN.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,u=e.notificationFilter,a=e.beforeError,s=e.afterError,c=e.beforeComplete,e=e.afterComplete,a=new yN.ResultStreamObserver({server:this._server,beforeError:a,afterError:s,beforeComplete:c,afterComplete:e});return a.prepareToHandleSingleResponse(),this.write(bN.default.begin({bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i,notificationFilter:u}),a,!0),a},mN.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,u=r.mode,a=r.impersonatedUser,s=r.notificationFilter,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,p=r.afterError,d=r.beforeComplete,h=r.afterComplete,b=r.flush,b=void 0===b||b,y=r.reactive,y=void 0!==y&&y,_=r.fetchSize,_=void 0===_?vN:_,v=r.highRecordWatermark,v=void 0===v?Number.MAX_VALUE:v,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new yN.ResultStreamObserver({server:this._server,reactive:y,fetchSize:_,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:p,beforeComplete:d,afterComplete:h,highRecordWatermark:v,lowRecordWatermark:r}),l=y;return this.write(bN.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,database:i,mode:u,impersonatedUser:a,notificationFilter:s}),c,l&&b),y||this.write(bN.default.pull({n:_}),c,b),c},mN);function mN(){return null!==lN&&lN.apply(this,arguments)||this}dt.default=zh;var gN,ON,Pb={},Cb={},wN=r&&r.__assign||function(){return(wN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Al=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ub=(Object.defineProperty(Cb,"__esModule",{value:!0}),Al(kh)),gb=(Cb.default=wN({},Ub.default),r&&r.__extends||(gN=function(e,t){return(gN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}gN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),EN=r&&r.__assign||function(){return(EN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Yb=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Mb=(Object.defineProperty(Pb,"__esModule",{value:!0}),Yb(dt)),PN=Yb(Cb),TN=Yb(c0),SN=Yb(v),jN=A,CN=e.internal.constants.BOLT_PROTOCOL_V5_3,ty=(ON=Mb.default,gb(IN,ON),Object.defineProperty(IN.prototype,"version",{get:function(){return CN},enumerable:!1,configurable:!0}),Object.defineProperty(IN.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new TN.default(Object.values(PN.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),IN.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=e.boltAgent,o=e.authToken,i=e.notificationFilter,u=e.onError,a=e.onComplete,s={},e=new jN.LoginObserver({onError:function(e){return t._onLoginError(e,u)},onCompleted:function(e){return s.metadata=e,t._onLoginCompleted(e)}});return this.write(SN.default.hello5x3(r,n,i,this._serversideRouting),e,!1),this.logon({authToken:o,onComplete:function(e){return a(EN(EN({},e),s.metadata))},onError:u,flush:!0})},IN);function IN(){return null!==ON&&ON.apply(this,arguments)||this}Pb.default=ty;var RN,AN,ly={},Iy={},kN=r&&r.__assign||function(){return(kN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},fy=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},xp=(Object.defineProperty(Iy,"__esModule",{value:!0}),fy(Cb)),zy=(Iy.default=kN({},xp.default),r&&r.__extends||(RN=function(e,t){return(RN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}RN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),vd=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Yy=(Object.defineProperty(ly,"__esModule",{value:!0}),vd(Pb)),MN=vd(Iy),NN=vd(v),xN=A,DN=vd(c0),LN=e.internal.constants.BOLT_PROTOCOL_V5_4,ed=(AN=Yy.default,zy(UN,AN),Object.defineProperty(UN.prototype,"version",{get:function(){return LN},enumerable:!1,configurable:!0}),Object.defineProperty(UN.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new DN.default(Object.values(MN.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),UN.prototype.telemetry=function(e,t){var e=e.api,t=void 0===t?{}:t,r=t.onError,t=t.onCompleted,t=new xN.TelemetryObserver({onCompleted:t,onError:r});return this.write(NN.default.telemetry({api:e}),t,!1),t},UN);function UN(){return null!==AN&&AN.apply(this,arguments)||this}ly.default=ed;var FN,BN,Ky={},Ld={},VN=r&&r.__assign||function(){return(VN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i_=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Nh=(Object.defineProperty(Ld,"__esModule",{value:!0}),i_(Iy)),uy=(Ld.default=VN({},Nh.default),r&&r.__extends||(FN=function(e,t){return(FN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}FN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),qN=r&&r.__assign||function(){return(qN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Dl=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Cy=(Object.defineProperty(Ky,"__esModule",{value:!0}),Dl(ly)),WN=Dl(Ld),zN=Dl(c0),HN=Dl(v),GN=A,o_=e.internal.constants,YN=o_.BOLT_PROTOCOL_V5_5,KN=o_.FETCH_ALL,ZN=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),Z_=(BN=Cy.default,uy(QN,BN),Object.defineProperty(QN.prototype,"version",{get:function(){return YN},enumerable:!1,configurable:!0}),Object.defineProperty(QN.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new zN.default(Object.values(WN.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),QN.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=e.boltAgent,o=e.authToken,i=e.notificationFilter,u=e.onError,a=e.onComplete,s={},e=new GN.LoginObserver({onError:function(e){return t._onLoginError(e,u)},onCompleted:function(e){return s.metadata=e,t._onLoginCompleted(e)}});return this.write(HN.default.hello5x5(r,n,i,this._serversideRouting),e,!1),this.logon({authToken:o,onComplete:function(e){return a(qN(qN({},e),s.metadata))},onError:u,flush:!0})},QN.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,u=e.notificationFilter,a=e.beforeError,s=e.afterError,c=e.beforeComplete,e=e.afterComplete,a=new GN.ResultStreamObserver({server:this._server,beforeError:a,afterError:s,beforeComplete:c,afterComplete:e});return a.prepareToHandleSingleResponse(),this.write(HN.default.begin5x5({bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i,notificationFilter:u}),a,!0),a},QN.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,u=r.mode,a=r.impersonatedUser,s=r.notificationFilter,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,p=r.afterError,d=r.beforeComplete,h=r.afterComplete,b=r.flush,b=void 0===b||b,y=r.reactive,y=void 0!==y&&y,_=r.fetchSize,_=void 0===_?KN:_,v=r.highRecordWatermark,v=void 0===v?Number.MAX_VALUE:v,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,c=new GN.ResultStreamObserver({server:this._server,reactive:y,fetchSize:_,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:p,beforeComplete:d,afterComplete:h,highRecordWatermark:v,lowRecordWatermark:r,enrichMetadata:this._enrichMetadata}),l=y;return this.write(HN.default.runWithMetadata5x5(e,t,{bookmarks:n,txConfig:o,database:i,mode:u,impersonatedUser:a,notificationFilter:s}),c,l&&b),y||this.write(HN.default.pull({n:_}),c,b),c},QN.prototype._enrichMetadata=function(e){return Array.isArray(e.statuses)&&(e.statuses=e.statuses.map(function(e){return qN(qN({},e),{description:null!=e.neo4j_code?e.status_description:e.description,diagnostic_record:null!==e.diagnostic_record?qN(qN({},ZN),e.diagnostic_record):null})})),e},QN);function QN(){return null!==BN&&BN.apply(this,arguments)||this}Ky.default=Z_;var XN,JN,H_={},ev={},$N=r&&r.__assign||function(){return($N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ev=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},vv=(Object.defineProperty(ev,"__esModule",{value:!0}),Ev(Ld)),jv=(ev.default=$N({},vv.default),r&&r.__extends||(XN=function(e,t){return(XN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}XN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),e2=r&&r.__assign||function(){return(e2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Hh=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Uv=(Object.defineProperty(H_,"__esModule",{value:!0}),Hh(Ky)),t2=Hh(ev),r2=Hh(c0),n2=e.internal.constants.BOLT_PROTOCOL_V5_6,o2=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),Bv=(JN=Uv.default,jv(i2,JN),Object.defineProperty(i2.prototype,"version",{get:function(){return n2},enumerable:!1,configurable:!0}),Object.defineProperty(i2.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new r2.default(Object.values(t2.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),i2.prototype._enrichMetadata=function(e){return Array.isArray(e.statuses)&&(e.statuses=e.statuses.map(function(e){return e2(e2({},e),{diagnostic_record:null!==e.diagnostic_record?e2(e2({},o2),e.diagnostic_record):null})})),e},i2);function i2(){return null!==JN&&JN.apply(this,arguments)||this}H_.default=Bv;var u2,a2,zv={},Yv={},s2=r&&r.__assign||function(){return(s2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xv=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},em=(Object.defineProperty(Yv,"__esModule",{value:!0}),xv(ev)),R_=(Yv.default=s2({},em.default),r&&r.__extends||(u2=function(e,t){return(u2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}u2(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),c2=r&&r.__assign||function(){return(c2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Sv=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Cv=(Object.defineProperty(zv,"__esModule",{value:!0}),Sv(H_)),l2=Sv(Yv),f2=Sv(c0),p2=e.internal.constants.BOLT_PROTOCOL_V5_7,d2=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),um=(a2=Cv.default,R_(h2,a2),Object.defineProperty(h2.prototype,"version",{get:function(){return p2},enumerable:!1,configurable:!0}),Object.defineProperty(h2.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new f2.default(Object.values(l2.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),h2.prototype.enrichErrorMetadata=function(e){return c2(c2({},e),{cause:null!==e.cause&&void 0!==e.cause?this.enrichErrorMetadata(e.cause):null,code:e.neo4j_code,diagnostic_record:null!==e.diagnostic_record?c2(c2({},d2),e.diagnostic_record):null})},h2);function h2(){return null!==a2&&a2.apply(this,arguments)||this}zv.default=um;var b2,y2,Om={},md={},_2=r&&r.__assign||function(){return(_2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gd=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Cm=(Object.defineProperty(md,"__esModule",{value:!0}),gd(Yv)),xm=(md.default=_2({},Cm.default),r&&r.__extends||(b2=function(e,t){return(b2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}b2(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),Im=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Dp=(Object.defineProperty(Om,"__esModule",{value:!0}),Im(zv)),v2=Im(md),m2=Im(c0),g2=Im(v),O2=A,Od=e.internal.constants,w2=Od.BOLT_PROTOCOL_V5_8,E2=Od.FETCH_ALL,Tm=(y2=Dp.default,xm(P2,y2),Object.defineProperty(P2.prototype,"version",{get:function(){return w2},enumerable:!1,configurable:!0}),Object.defineProperty(P2.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new m2.default(Object.values(v2.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),P2.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,u=r.mode,a=r.impersonatedUser,s=r.notificationFilter,c=r.beforeKeys,l=r.afterKeys,f=r.beforeError,p=r.afterError,d=r.beforeComplete,h=r.afterComplete,b=r.flush,b=void 0===b||b,y=r.reactive,y=void 0!==y&&y,_=r.fetchSize,_=void 0===_?E2:_,v=r.highRecordWatermark,v=void 0===v?Number.MAX_VALUE:v,m=r.lowRecordWatermark,m=void 0===m?Number.MAX_VALUE:m,r=r.onDb,c=new O2.ResultStreamObserver({server:this._server,reactive:y,fetchSize:_,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:p,beforeComplete:d,afterComplete:h,highRecordWatermark:v,lowRecordWatermark:m,enrichMetadata:this._enrichMetadata,onDb:r}),l=y;return this.write(g2.default.runWithMetadata5x5(e,t,{bookmarks:n,txConfig:o,database:i,mode:u,impersonatedUser:a,notificationFilter:s}),c,l&&b),y||this.write(g2.default.pull({n:_}),c,b),c},P2);function P2(){return null!==y2&&y2.apply(this,arguments)||this}Om.default=Tm;var km={},N_={},T2=r&&r.__assign||function(){return(T2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Km=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Hm=(Object.defineProperty(N_,"__esModule",{value:!0}),Km(md)),S2=c0,j2=cm,C2=e,I2=198,R2=193,A2=200,k2=201,M2=202,N2=203,x2={INT8:A2,INT16:k2,INT32:M2,INT64:N2,FLOAT32:I2,FLOAT64:R2};function D2(e,t){(r=new DataView(new ArrayBuffer(2))).setInt16(0,1e3,!0);var r,n=1e3===new Int16Array(r.buffer)[0];if(n){var o=new DataView(new ArrayBuffer(t.byteLength)),i=new DataView(t),u=void 0,a=void 0,s=void 0;switch(e){case A2:s=1,u=o.setInt8.bind(o),a=i.getInt8.bind(i);break;case k2:s=2,u=o.setInt16.bind(o),a=i.getInt16.bind(i);break;case M2:s=4,u=o.setInt32.bind(o),a=i.getInt32.bind(i);break;case N2:s=8,u=o.setBigInt64.bind(o),a=i.getBigInt64.bind(i);break;case I2:s=4,u=o.setInt32.bind(o),a=i.getInt32.bind(i);break;case R2:s=8,u=o.setBigInt64.bind(o),a=i.getBigInt64.bind(i);break;default:throw(0,C2.newError)("Vector is of unsupported type ".concat(e))}for(var c=0;c<t.byteLength;c+=s)u(c,a(c,n));return o.buffer}return t}N_.default=T2(T2({},Hm.default),{createVectorTransformer:function(){return new S2.TypeTransformer({signature:86,isTypeInstance:function(e){return(0,C2.isVector)(e)},toStructure:function(e){var t=x2[e.getType()];if(void 0===t)throw(0,C2.newError)("Vector object has unknown type: ".concat(e.getType()));e=D2(t,e.asTypedArray().buffer);return new j2.structure.Structure(86,[Int8Array.from([t]),new Int8Array(e)])},fromStructure:function(e){var t=Uint8Array.from(e.fields[0])[0],r=D2(t,e.fields[1].buffer);switch(t){case A2:return new C2.Vector(new Int8Array(r));case k2:return new C2.Vector(new Int16Array(r));case M2:return new C2.Vector(new Int32Array(r));case N2:return new C2.Vector(new BigInt64Array(r));case I2:return new C2.Vector(new Float32Array(r));case R2:return new C2.Vector(new Float64Array(r));default:throw(0,C2.newError)("Received Vector structure with unsupported type marker: ".concat(t))}}})},createUnsupportedTypeTransformer:function(){return new S2.TypeTransformer({signature:63,isTypeInstance:function(e){return(0,C2.isUnsupportedType)(e)},toStructure:function(e){throw(0,C2.newError)("UnsupportedType object can not be transmitted")},fromStructure:function(e){return new C2.UnsupportedType(e.fields[0],e.fields[1],e.fields[2],e.fields[3].message)}})}});var L2,U2,Jm=r&&r.__extends||(L2=function(e,t){return(L2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}L2(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o0=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Wt=(Object.defineProperty(km,"__esModule",{value:!0}),o0(Om)),F2=o0(N_),B2=o0(c0),V2=e.internal.constants.BOLT_PROTOCOL_V6_0,d0=(U2=Wt.default,Jm(q2,U2),Object.defineProperty(q2.prototype,"version",{get:function(){return V2},enumerable:!1,configurable:!0}),Object.defineProperty(q2.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new B2.default(Object.values(F2.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),q2);function q2(){return null!==U2&&U2.apply(this,arguments)||this}km.default=d0;var y0={},W2=(Object.defineProperty(y0,"__esModule",{value:!0}),e);function z2(){}function H2(e){return e}var G2={onNext:z2,onCompleted:z2,onError:z2};function Y2(e){var e=void 0===e?{}:e,t=e.transformMetadata,r=e.enrichErrorMetadata,n=e.log,e=e.observer;this._pendingObservers=[],this._log=n,this._transformMetadata=t||H2,this._enrichErrorMetadata=r||H2,this._observer=Object.assign({onObserversCountChange:z2,onError:z2,onFailure:z2,onErrorApplyTransformation:H2},e)}Object.defineProperty(Y2.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),Y2.prototype.handleResponse=function(e){var t=e.fields[0];switch(e.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(W2.json.stringify(e))),this._currentObserver.onNext(t);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(W2.json.stringify(e)));try{var r=this._transformMetadata(t);this._currentObserver.onCompleted(r)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(W2.json.stringify(e)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(W2.json.stringify(e)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,W2.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,W2.newError)("Unknown Bolt protocol message: "+e))}},Y2.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(Y2.prototype,"_observersCount",{get:function(){return null==this._currentObserver?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),Y2.prototype._queueObserver=function(e){return(e=e||G2).onCompleted=e.onCompleted||z2,e.onError=e.onError||z2,e.onNext=e.onNext||z2,void 0===this._currentObserver?this._currentObserver=e:this._pendingObservers.push(e),this._observer.onObserversCountChange(this._observersCount),!0},Y2.prototype._notifyErrorToObservers=function(e){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(e);0<this._pendingObservers.length;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(e)}},Y2.prototype.hasOngoingObservableRequests=function(){return null!=this._currentObserver||0<this._pendingObservers.length},Y2.prototype._resetFailure=function(){this._currentFailure=null},Y2.prototype._handleErrorPayload=function(e){var t=function(e){{if("Neo.TransientError.Transaction.Terminated"===e)return"Neo.ClientError.Transaction.Terminated";if("Neo.TransientError.Transaction.LockClientStopped"===e)return"Neo.ClientError.Transaction.LockClientStopped"}return e}(e.code),r=null!=e.cause?this._handleErrorCause(e.cause):void 0,t=(0,W2.newError)(e.message,t,r,e.gql_status,e.description,e.diagnostic_record);return this._observer.onErrorApplyTransformation(t)},Y2.prototype._handleErrorCause=function(e){var t=null!=e.cause?this._handleErrorCause(e.cause):void 0,t=(0,W2.newGQLError)(e.message,t,e.gql_status,e.description,e.diagnostic_record);return this._observer.onErrorApplyTransformation(t)},y0.default=Y2;var K2,m0=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Z2=(Object.defineProperty(d_,"__esModule",{value:!0}),d_.default=function(e){var e=void 0===e?{}:e,t=e.version,r=e.chunker,n=e.dechunker,o=e.channel,i=e.disableLosslessIntegers,u=e.useBigInt,a=e.serversideRouting,s=e.server,c=e.log,l=e.observer;return function(e,t,r,n,o,i,u,a){if(!(e instanceof Z2.ProtocolVersion)||null==e)throw(0,Z2.newError)("Unknown Bolt protocol version: "+e);switch(!0){case e.isEqualTo({major:1,minor:0}):return new Q2.default(t,r,n,i,a,u);case e.isEqualTo({major:2,minor:0}):return new X2.default(t,r,n,i,a,u);case e.isEqualTo({major:3,minor:0}):return new J2.default(t,r,n,i,a,u);case e.isEqualTo({major:4,minor:0}):return new $2.default(t,r,n,i,a,u);case e.isEqualTo({major:4,minor:1}):return new ex.default(t,r,n,i,a,u,o);case e.isEqualTo({major:4,minor:2}):return new tx.default(t,r,n,i,a,u,o);case e.isEqualTo({major:4,minor:3}):return new rx.default(t,r,n,i,a,u,o);case e.isEqualTo({major:4,minor:4}):return new nx.default(t,r,n,i,a,u,o);case e.isEqualTo({major:5,minor:0}):return new ox.default(t,r,n,i,a,u,o);case e.isEqualTo({major:5,minor:1}):return new ix.default(t,r,n,i,a,u,o);case e.isEqualTo({major:5,minor:2}):return new ux.default(t,r,n,i,a,u,o);case e.isEqualTo({major:5,minor:3}):return new ax.default(t,r,n,i,a,u,o);case e.isEqualTo({major:5,minor:4}):return new sx.default(t,r,n,i,a,u,o);case e.isEqualTo({major:5,minor:5}):return new cx.default(t,r,n,i,a,u,o);case e.isEqualTo({major:5,minor:6}):return new lx.default(t,r,n,i,a,u,o);case e.isEqualTo({major:5,minor:7}):return new fx.default(t,r,n,i,a,u,o);case e.isEqualTo({major:5,minor:8}):return new px.default(t,r,n,i,a,u,o);case e.isEqualTo({major:6,minor:0}):return new dx.default(t,r,n,i,a,u,o);default:throw(0,Z2.newError)("Unknown Bolt protocol version: "+e)}}(t,s,r,{disableLosslessIntegers:i,useBigInt:u},a,function(t){var r=new hx.default({transformMetadata:t.transformMetadata.bind(t),enrichErrorMetadata:t.enrichErrorMetadata.bind(t),log:c,observer:l});return o.onerror=l.onError.bind(l),o.onmessage=function(e){return n.write(e)},n.onmessage=function(e){try{r.handleResponse(t.unpack(e))}catch(e){return l.onError(e)}},r},l.onProtocolError.bind(l),c)},e),Q2=m0(v_),X2=m0(E0),J2=m0(Og),$2=m0(Kg),ex=m0(y),tx=m0(WO),rx=m0(gt),nx=m0(Yl),ox=m0(_),ix=m0(Vh),ux=m0(dt),ax=m0(Pb),sx=m0(ly),cx=m0(Ky),lx=m0(H_),fx=m0(zv),px=m0(Om),dx=m0(km),hx=m0(y0);i=F,K2=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),x0=r&&r.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||K2(t,e,r)},B0=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(i,"__esModule",{value:!0}),i.RawRoutingTable=i.BoltProtocol=void 0,a0=B0(_d),zn=B0(d_),G0=B0(gt),B0=B0(T_),x0(A,i),i.BoltProtocol=G0.default,i.RawRoutingTable=B0.default,i.default={handshake:a0.default,create:zn.default};var bx,rg={},hy={},ug=r&&r.__extends||(bx=function(e,t){return(bx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}bx(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(hy,"__esModule",{value:!0});ug(_x,yx=e.ConnectionProvider),_x.prototype.acquireConnection=function(e){e=void 0===e?{}:e,e.accessMode,e.database,e.bookmarks,e=this._connection;return this._connection=null,Promise.resolve(e)};var yx,X0=_x;function _x(e){var t=yx.call(this)||this;return t._connection=e,t}hy.default=X0;var vx,dg={},Rg={},dy={},kg=r&&r.__extends||(vx=function(e,t){return(vx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}vx(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(dy,"__esModule",{value:!0});kg(gx,mx=e.Connection),Object.defineProperty(gx.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(gx.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(gx.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(gx.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(gx.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(gx.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),gx.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(gx.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(gx.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(gx.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),gx.prototype.connect=function(e,t,r,n){throw new Error("not implemented")},gx.prototype.write=function(e,t,r){throw new Error("not implemented")},gx.prototype.close=function(){throw new Error("not implemented")},gx.prototype.handleAndTransformError=function(e,t){return this._errorHandler?this._errorHandler.handleAndTransformError(e,t,this):e};var mx,Vg=gx;function gx(e){var t=mx.call(this)||this;return t._errorHandler=e,t}dy.default=Vg;var Ox,zg={},Dg=r&&r.__extends||(Ox=function(e,t){return(Ox=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ox(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),wx=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Ex=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},Rf=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Px=(Object.defineProperty(zg,"__esModule",{value:!0}),zg.createChannelConnection=function(i,u,a,s,e,c,l,t){void 0===c&&(c=null);void 0===t&&(t=function(e){return new Px.Channel(e)});var e=new Px.ChannelConfig(i,u,a.errorCode(),e),f=t(e);return Sx.default.handshake(f,s).then(function(e){var r=e.protocolVersion,e=e.consumeRemainingBuffer,n=new Px.Chunker(f),o=new Px.Dechunker,t=new Ax(f,a,i,s,u.disableLosslessIntegers,c,n,u.notificationFilter,function(t){return Sx.default.create({version:r,channel:f,chunker:n,dechunker:o,disableLosslessIntegers:u.disableLosslessIntegers,useBigInt:u.useBigInt,serversideRouting:c,server:t.server,log:t.logger,observer:{onObserversCountChange:t._handleOngoingRequestsNumberChange.bind(t),onError:t._handleFatalError.bind(t),onFailure:t._resetOnFailure.bind(t),onProtocolError:t._handleProtocolError.bind(t),onErrorApplyTransformation:function(e){return t.handleAndTransformError(e,t._address)}}})},u.telemetryDisabled,l);return e(function(e){return o.write(e)}),t}).catch(function(e){return f.close().then(function(){throw e})})},Dd),Tx=e,tO=Rf(dy),Sx=Rf(F),jx=Tx.error.PROTOCOL_ERROR,Cx=Tx.internal.logger.Logger,Ix=0;Rx=tO.default,Dg(kx,Rx),kx.prototype.beginTransaction=function(e){return this._sendTelemetryIfEnabled(e),this._protocol.beginTransaction(e)},kx.prototype.run=function(e,t,r){return this._sendTelemetryIfEnabled(r),this._protocol.run(e,t,r)},kx.prototype._sendTelemetryIfEnabled=function(e){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||null==e||null==e.apiTelemetryConfig||this._protocol.telemetry({api:e.apiTelemetryConfig.api},{onCompleted:e.apiTelemetryConfig.onTelemetrySuccess,onError:e.beforeError})},kx.prototype.commitTransaction=function(e){return this._protocol.commitTransaction(e)},kx.prototype.rollbackTransaction=function(e){return this._protocol.rollbackTransaction(e)},kx.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(kx.prototype,"authToken",{get:function(){return this._authToken},set:function(e){this._authToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(e){this._idleTimestamp=e},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),kx.prototype.connect=function(t,n,o,i){return wx(this,void 0,void 0,function(){var r=this;return Ex(this,function(e){switch(e.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,Tx.newError)("Connection does not support re-auth");return this._authToken=o,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,o)];case 1:return[2,e.sent()];case 2:return i?[4,new Promise(function(e,t){r._protocol.logoff({onError:t}),r._protocol.logon({authToken:o,onError:t,onComplete:function(){return e(r)},flush:!0})})]:[3,4];case 3:return[2,e.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:o,flush:!0}),[2,this]}})})},kx.prototype._initialize=function(e,n,o){var i=this,u=this;return new Promise(function(r,t){i._protocol.initialize({userAgent:e,boltAgent:n,authToken:o,notificationFilter:i._notificationFilter,onError:function(e){return t(e)},onComplete:function(e){var t;e&&(t=e.server,i.version&&!t||(i.version=t),t=e.connection_id,i.databaseId||(i.databaseId=t),e.hints&&(null!=(t=e.hints["connection.recv_timeout_seconds"])&&(t=(0,Tx.toNumber)(t),Number.isInteger(t)&&0<t?i._ch.setupReceiveTimeout(1e3*t):i._log.info("Server located at ".concat(i._address," supplied an invalid connection receive timeout value (").concat(t,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")),!0===e.hints["telemetry.enabled"]&&(i._telemetryDisabledConnection=!1),i.SSREnabledHint=e.hints["ssr.enabled"]),i._ssrCallback(null!=(t=i.SSREnabledHint)&&t,"OPEN")),r(u)}})})},kx.prototype.protocol=function(){return this._protocol},Object.defineProperty(kx.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),kx.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(Tx.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},kx.prototype._setIdle=function(e){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(e)},kx.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},kx.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},kx.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},kx.prototype.resetAndFlush=function(){var r=this;return new Promise(function(e,t){r._reset({onError:function(e){r._isBroken?t(e):(e=r._handleProtocolError("Received FAILURE as a response for RESET: ".concat(e)),t(e))},onComplete:function(){e()}})})},kx.prototype._resetOnFailure=function(){var e=this;this.isOpen()&&this._reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},kx.prototype._reset=function(t){var e,r=this;this._reseting?this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(e){t.onError(e)},onComplete:function(){t.onComplete()}}):(this._resetObservers.push(t),this._reseting=!0,e=function(e){r._reseting=!1;var t=r._resetObservers;r._resetObservers=[],t.forEach(e)},this._protocol.reset({onError:function(t){e(function(e){return e.onError(t)})},onComplete:function(){e(function(e){return e.onComplete()})}}))},kx.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},kx.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},kx.prototype._handleOngoingRequestsNumberChange=function(e){this._idle||(0===e?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},kx.prototype.close=function(){return wx(this,void 0,void 0,function(){var t;return Ex(this,function(e){switch(e.label){case 0:return this._ssrCallback(null!=(t=this.SSREnabledHint)&&t,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},kx.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},kx.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();e=(0,Tx.newError)(e,jx);return this._handleFatalError(e),e};var Rx,Ax=kx;function kx(e,t,r,n,o,i,u,a,s,c,l){void 0===o&&(o=!1),void 0===i&&(i=null),void 0===l&&(l=function(e){});var f,p,t=Rx.call(this,t)||this;return t._authToken=null,t._idle=!1,t._reseting=!1,t._resetObservers=[],t._id=Ix++,t._address=r,t._server={address:r.asHostPort()},t._creationTimestamp=Date.now(),t._disableLosslessIntegers=o,t._ch=e,t._chunker=u,t._log=(f=t,new Cx((p=n)._level,function(e,t){return p._loggerFunction(e,"".concat(f," ").concat(t))})),t._serversideRouting=i,t._notificationFilter=a,t._telemetryDisabledDriverConfig=!0===c,t._telemetryDisabledConnection=!0,t._ssrCallback=l,t._dbConnectionId=null,t._protocol=s(t),t._isBroken=!1,t._log.isDebugEnabled()&&t._log.debug("created towards ".concat(r)),t}zg.default=Ax;var Mx,Nx,Pg={},oO=r&&r.__extends||(Mx=function(e,t){return(Mx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Mx(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),lm=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},pO=(Object.defineProperty(Pg,"__esModule",{value:!0}),lm(dy)),aO=(Nx=pO.default,oO(xx,Nx),xx.prototype.beginTransaction=function(e){return this._delegate.beginTransaction(e)},xx.prototype.run=function(e,t,r){return this._delegate.run(e,t,r)},xx.prototype.commitTransaction=function(e){return this._delegate.commitTransaction(e)},xx.prototype.rollbackTransaction=function(e){return this._delegate.rollbackTransaction(e)},xx.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(xx.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(xx.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(xx.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(xx.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(e){this._delegate.authToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(xx.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(xx.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(xx.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(xx.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(xx.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(e){this._delegate.idleTimestamp=e},enumerable:!1,configurable:!0}),xx.prototype.isOpen=function(){return this._delegate.isOpen()},xx.prototype.protocol=function(){return this._delegate.protocol()},xx.prototype.connect=function(e,t,r,n){return this._delegate.connect(e,t,r,n)},xx.prototype.write=function(e,t,r){return this._delegate.write(e,t,r)},xx.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},xx.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},xx.prototype.close=function(){return this._delegate.close()},xx.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},xx);function xx(e,t){var r=Nx.call(this,t)||this;return t&&(r._originalErrorHandler=e._errorHandler,e._errorHandler=r._errorHandler),r._delegate=e,r}Pg.default=aO;S_={};Object.defineProperty(S_,"__esModule",{value:!0});var Dx,Lx,Ux,Fx,Bx=e.error.SERVICE_UNAVAILABLE,Vx=e.error.SESSION_EXPIRED;function qx(e,t,r,n){this._errorCode=e,this._handleUnavailability=t||Wx,this._handleWriteFailure=r||Wx,this._handleSecurityError=n||Wx}function Wx(e){return e}qx.create=function(e){return new qx(e.errorCode,e.handleUnavailability,e.handleWriteFailure,e.handleSecurityError)},qx.prototype.errorCode=function(){return this._errorCode},qx.prototype.handleAndTransformError=function(e,t,r){return null!=(n=e)&&null!=n.code&&n.code.startsWith("Neo.ClientError.Security.")?this._handleSecurityError(e,t,r):function(e){if(e)return e.code===Vx||e.code===Bx||"Neo.TransientError.General.DatabaseUnavailable"===e.code;return}(e)?this._handleUnavailability(e,t,r):function(e){if(e)return"Neo.ClientError.Cluster.NotALeader"===e.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===e.code;return}(e)?this._handleWriteFailure(e,t,r):e;var n},S_.default=qx,bO=Rg,Lx=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),Ux=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),sv=r&&r.__importStar||(Dx=function(e){return(Dx=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Dx(e),n=0;n<r.length;n++)"default"!==r[n]&&Lx(t,e,r[n]);return Ux(t,e),t}),Zg=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(bO,"__esModule",{value:!0}),bO.createChannelConnection=bO.ConnectionErrorHandler=bO.DelegateConnection=bO.ChannelConnection=bO.Connection=void 0,jO=Zg(dy),bO.Connection=jO.default,Fx=sv(zg),bO.ChannelConnection=Fx.default,Object.defineProperty(bO,"createChannelConnection",{enumerable:!0,get:function(){return Fx.createChannelConnection}}),sv=Zg(Pg),bO.DelegateConnection=sv.default,sv=Zg(S_),bO.ConnectionErrorHandler=sv.default,bO.default=jO.default;var kO={},zx=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Hx=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},Gx=(Object.defineProperty(kO,"__esModule",{value:!0}),e),Yx=iv;function Kx(e){var t=e.authTokenManager,r=e.userAgent,e=e.boltAgent;this._authTokenManager=t||(0,Gx.staticAuthTokenManager)({}),this._userAgent=r,this._boltAgent=e}Kx.prototype.authenticate=function(e){return zx(this,arguments,void 0,function(e){var t,r=e.connection,n=e.auth,o=e.skipReAuth,i=e.waitReAuth,u=e.forceReAuth;return Hx(this,function(e){switch(e.label){case 0:return null==n?[3,3]:(t=!0===r.supportsReAuth&&(!Yx.object.equals(r.authToken,n)&&!0!==o||!0===u),null==r.authToken||t?[4,r.connect(this._userAgent,this._boltAgent,n,i||!1)]:[3,2]);case 1:return[2,e.sent()];case 2:return[2,r];case 3:return[4,this._authTokenManager.getToken()];case 4:return t=e.sent(),Yx.object.equals(t,r.authToken)?[3,6]:[4,r.connect(this._userAgent,this._boltAgent,t,!1)];case 5:return[2,e.sent()];case 6:return[2,r]}})})},Kx.prototype.handleError=function(e){var t=e.connection,e=e.code;return!(!t||!e.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(t.authToken,e)},kO.default=Kx;var py={},Zx=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},Qx=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function Xx(e){e=e.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=e}Object.defineProperty(py,"__esModule",{value:!0}),Xx.prototype.check=function(r){return Zx(this,void 0,void 0,function(){var t;return Qx(this,function(e){switch(e.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,0===this._connectionLivenessCheckTimeout||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,e.sent()];case 2:return[2,!0]}})})},Object.defineProperty(Xx.prototype,"_isCheckDisabled",{get:function(){return null==this._connectionLivenessCheckTimeout||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),Xx.prototype._isNewlyCreatedConnection=function(e){return null==e.authToken},py.default=Xx;var Ff={},Jx=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},$x=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},eD=(Object.defineProperty(Ff,"__esModule",{value:!0}),Dd);function tD(e){var t=e.clientCertificateProvider,e=e.loader;this._clientCertificateProvider=t,this._loader=e||eD.ClientCertificatesLoader,this._clientCertificate=null}tD.prototype.getClientCertificate=function(){return Jx(this,void 0,void 0,function(){var t,r,n=this;return $x(this,function(e){switch(e.label){case 0:return(t=null!=this._clientCertificateProvider)?(r=null==this._clientCertificate)?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]:[3,3];case 1:r=e.sent(),e.label=2;case 2:t=r,e.label=3;case 3:return t&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(e){return n._clientCertificate=e,n._clientCertificate}).catch(function(e){throw n._clientCertificate=null,e})),[2,this._clientCertificate]}})})},Ff.default=tD;var rD,nD,$l=r&&r.__extends||(rD=function(e,t){return(rD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}rD(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),oD=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},iD=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},uD=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},aD=r&&r.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},o=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},sD=(Object.defineProperty(dg,"__esModule",{value:!0}),Rg),cD=e,lD=o(kO),fD=iv,pD=o(py),dD=o(Ff),hD=cD.error.SERVICE_UNAVAILABLE,bD=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],Sf=cD.internal.pool,yD=Sf.Pool,_D=Sf.PoolConfig,EO=(nD=cD.ConnectionProvider,$l(vD,nD),vD.prototype._createConnectionErrorHandler=function(){return new sD.ConnectionErrorHandler(hD)},vD.prototype._getClientCertificate=function(){return oD(this,void 0,void 0,function(){return iD(this,function(e){return[2,this._config.clientCertificate.getClientCertificate()]})})},vD.prototype._createConnection=function(e,r,n){var o=this,i=e.auth;return this._createChannelConnection(r).then(function(t){return t.release=function(){return t.idleTimestamp=Date.now(),n(r,t)},o._openConnections[t.id]=t,o._authenticationProvider.authenticate({connection:t,auth:i}).catch(function(e){throw o._destroyConnection(t),e})})},vD.prototype._validateConnectionOnAcquire=function(e,t){return oD(this,arguments,void 0,function(e,t){var r,n=e.auth,o=e.skipReAuth;return iD(this,function(e){switch(e.label){case 0:if(!this._validateConnection(t))return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(t)];case 2:return e.sent(),[3,4];case 3:return r=e.sent(),this._log.debug("The connection ".concat(t.id," is not alive because of an error ").concat(r.code," '").concat(r.message,"'")),[2,!1];case 4:return e.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:t,auth:n,skipReAuth:o})];case 5:return e.sent(),[2,!0];case 6:return r=e.sent(),this._log.debug("The connection ".concat(t.id," is not valid because of an error ").concat(r.code," '").concat(r.message,"'")),[2,!1];case 7:return[2]}})})},vD.prototype._validateConnectionOnRelease=function(e){return!0!==e._sticky&&this._validateConnection(e)},vD.prototype._validateConnection=function(e){return!!e.isOpen()&&!(this._config.maxConnectionLifetime<Date.now()-e.creationTimestamp)},vD.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},vD.prototype._verifyConnectivityAndGetServerVersion=function(e){return oD(this,arguments,void 0,function(e){var t,r,n=e.address;return iD(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:t=e.sent(),r=new cD.ServerInfo(t.server,t.protocol().version),e.label=2;case 2:return e.trys.push([2,,5,7]),t.protocol().isLastMessageLogon()?[3,4]:[4,t.resetAndFlush()];case 3:e.sent(),e.label=4;case 4:return[3,7];case 5:return[4,t.release()];case 6:return e.sent(),[7];case 7:return[2,r]}})})},vD.prototype._verifyAuthentication=function(e){return oD(this,arguments,void 0,function(e){var t,r,n,o,i,u=e.getAddress,a=e.auth;return iD(this,function(e){switch(e.label){case 0:t=[],e.label=1;case 1:return e.trys.push([1,8,9,11]),[4,u()];case 2:return r=e.sent(),[4,this._connectionPool.acquire({auth:a,skipReAuth:!0},r)];case 3:if(n=e.sent(),t.push(n),o=!n.protocol().isLastMessageLogon(),n.supportsReAuth)return o&&n.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:n,auth:a,waitReAuth:!0,forceReAuth:!0})]:[3,5];throw(0,cD.newError)("Driver is connected to a database that does not support user switch.");case 4:return e.sent(),[3,7];case 5:return!o||n.supportsReAuth?[3,7]:[4,this._connectionPool.acquire({auth:a},r,{requireNew:!0})];case 6:(i=e.sent())._sticky=!0,t.push(i),e.label=7;case 7:return[2,!0];case 8:if(i=e.sent(),bD.includes(i.code))return[2,!1];throw i;case 9:return[4,Promise.all(t.map(function(e){return e.release()}))];case 10:return e.sent(),[7];case 11:return[2]}})})},vD.prototype._verifyStickyConnection=function(e){return oD(this,arguments,void 0,function(e){var t,r,n=e.auth,o=e.connection;return e.address,iD(this,function(e){switch(e.label){case 0:return(t=fD.object.equals(n,o.authToken),r=!t,o._sticky=t&&!o.supportsReAuth,r||o._sticky)?[4,o.release()]:[3,2];case 1:throw e.sent(),(0,cD.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},vD.prototype.close=function(){return oD(this,void 0,void 0,function(){return iD(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(e){return e.close()}))];case 2:return e.sent(),[2]}})})},vD._installIdleObserverOnConnection=function(e,t){e._setIdle(t)},vD._removeIdleObserverOnConnection=function(e){e._unsetIdle()},vD.prototype._handleSecurityError=function(e,t,r){return this._authenticationProvider.handleError({connection:r,code:e.code})&&(e.retriable=!0,e.retryable=!0),"Neo.ClientError.Security.AuthorizationExpired"===e.code&&this._connectionPool.apply(t,function(e){e.authToken=null}),r&&r.close().catch(function(){}),e},vD);function vD(e,t){var r=e.id,n=e.config,o=e.log,i=e.userAgent,u=e.boltAgent,a=e.authTokenManager,e=e.newPool,e=void 0===e?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(yD.bind.apply(yD,aD([void 0],uD(e),!1)))}:e,s=(void 0===t&&(t=null),nD.call(this)||this);return s._id=r,s._config=n,s._log=o,s._clientCertificateHolder=new dD.default({clientCertificateProvider:s._config.clientCertificate}),s._authenticationProvider=new lD.default({authTokenManager:a,userAgent:i,boltAgent:u}),s._livenessCheckProvider=new pD.default({connectionLivenessCheckTimeout:n.connectionLivenessCheckTimeout}),s._userAgent=i,s._boltAgent=u,s._createChannelConnection=t||function(n){return oD(s,void 0,void 0,function(){var t,r;return iD(this,function(e){switch(e.label){case 0:return t=sD.createChannelConnection,r=[n,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,t.apply(void 0,r.concat([e.sent()]))]}})})},s._connectionPool=e({create:s._createConnection.bind(s),destroy:s._destroyConnection.bind(s),validateOnAcquire:s._validateConnectionOnAcquire.bind(s),validateOnRelease:s._validateConnectionOnRelease.bind(s),installIdleObserver:vD._installIdleObserverOnConnection.bind(s),removeIdleObserver:vD._removeIdleObserverOnConnection.bind(s),config:_D.fromDriverConfig(n),log:s._log}),s._openConnections={},s}dg.default=EO;var mD,gD,O={},b=r&&r.__extends||(mD=function(e,t){return(mD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}mD(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),OD=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},wD=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},I=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},p=(Object.defineProperty(O,"__esModule",{value:!0}),I(dg)),ED=Rg,bw=e.internal.constants,PD=bw.BOLT_PROTOCOL_V3,TD=bw.BOLT_PROTOCOL_V4_0,SD=bw.BOLT_PROTOCOL_V4_4,jD=bw.BOLT_PROTOCOL_V5_1,CD=e.error.SERVICE_UNAVAILABLE,j=(gD=p.default,b(ID,gD),ID.prototype.acquireConnection=function(){return OD(this,arguments,void 0,function(e){var t,r,n=this,e=void 0===e?{}:e,o=(e.accessMode,e.database),i=(e.bookmarks,e.auth),u=e.forceReAuth;return wD(this,function(e){switch(e.label){case 0:return t=ED.ConnectionErrorHandler.create({errorCode:CD,handleSecurityError:function(e,t,r){return n._handleSecurityError(e,t,r,o)}}),[4,this._connectionPool.acquire({auth:i,forceReAuth:u},this._address)];case 1:return(r=e.sent(),i)?[4,this._verifyStickyConnection({auth:i,connection:r,address:this._address})]:[3,3];case 2:return e.sent(),[2,r];case 3:return[2,new ED.DelegateConnection(r,t)]}})})},ID.prototype._handleSecurityError=function(e,t,r,n){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(t," for database '").concat(n,"' because of an error ").concat(e.code," '").concat(e.message,"'")),gD.prototype._handleSecurityError.call(this,e,t,r)},ID.prototype._hasProtocolVersion=function(n){return OD(this,void 0,void 0,function(){var t,r;return wD(this,function(e){switch(e.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return t=e.sent(),r=t.protocol()?t.protocol().version:null,[4,t.close()];case 2:return e.sent(),r?[2,n(r)]:[2,!1]}})})},ID.prototype.supportsMultiDb=function(){return OD(this,void 0,void 0,function(){return wD(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e.isGreaterOrEqualTo(TD)})];case 1:return[2,e.sent()]}})})},ID.prototype.getNegotiatedProtocolVersion=function(){var r=this;return new Promise(function(e,t){r._hasProtocolVersion(e).catch(t)})},ID.prototype.supportsTransactionConfig=function(){return OD(this,void 0,void 0,function(){return wD(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e.isGreaterOrEqualTo(PD)})];case 1:return[2,e.sent()]}})})},ID.prototype.supportsUserImpersonation=function(){return OD(this,void 0,void 0,function(){return wD(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e.isGreaterOrEqualTo(SD)})];case 1:return[2,e.sent()]}})})},ID.prototype.supportsSessionAuth=function(){return OD(this,void 0,void 0,function(){return wD(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e.isGreaterOrEqualTo(jD)})];case 1:return[2,e.sent()]}})})},ID.prototype.verifyAuthentication=function(e){return OD(this,arguments,void 0,function(e){var t=this,r=e.auth;return wD(this,function(e){return[2,this._verifyAuthentication({auth:r,getAddress:function(){return t._address}})]})})},ID.prototype.verifyConnectivityAndGetServerInfo=function(){return OD(this,void 0,void 0,function(){return wD(this,function(e){switch(e.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,e.sent()]}})})},ID);function ID(e){var t=e.id,r=e.config,n=e.log,o=e.address,i=e.userAgent,u=e.boltAgent,a=e.authTokenManager,e=e.newPool,t=gD.call(this,{id:t,config:r,log:n,userAgent:i,boltAgent:u,authTokenManager:a,newPool:e})||this;return t._address=o,t}O.default=j;var ln={},KO={},E={},n={},RD=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},AD=r&&r.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},kD=(Object.defineProperty(n,"__esModule",{value:!0}),n.createValidRoutingTable=BD,e),t=kD.internal.constants,MD=t.ACCESS_MODE_WRITE,ND=t.ACCESS_MODE_READ,xD=kD.internal.serverAddress.ServerAddress,DD=kD.error.PROTOCOL_ERROR,LD=(UD.fromRawRoutingTable=BD,UD.prototype.forget=function(e){this.readers=FD(this.readers,e),this.writers=FD(this.writers,e)},UD.prototype.forgetRouter=function(e){this.routers=FD(this.routers,e)},UD.prototype.forgetWriter=function(e){this.writers=FD(this.writers,e)},UD.prototype.isStaleFor=function(e){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||e===ND&&0===this.readers.length||e===MD&&0===this.writers.length},UD.prototype.isExpiredFor=function(e){return this.expirationTime.add(e).lessThan(Date.now())},UD.prototype.allServers=function(){return AD(AD(AD([],RD(this.routers),!1),RD(this.readers),!1),RD(this.writers),!1)},UD.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},UD);function UD(e){var e=void 0===e?{}:e,t=e.database,r=e.routers,n=e.readers,o=e.writers,i=e.expirationTime,e=e.ttl;this.database=t||null,this.databaseName=t||"default database",this.routers=r||[],this.readers=n||[],this.writers=o||[],this.expirationTime=i||(0,kD.int)(0),this.ttl=e}function FD(e,t){return e.filter(function(e){return e.asKey()!==t.asKey()})}function BD(e,t,r){var n=r.ttl,o=function(t,r){try{var e=(0,kD.int)(Date.now()),n=(0,kD.int)(t.ttl).multiply(1e3).add(e);return n.lessThan(e)?kD.Integer.MAX_VALUE:n}catch(e){throw(0,kD.newError)("Unable to parse TTL entry from router ".concat(r," from raw routing table:\n").concat(kD.json.stringify(t),"\nError message: ").concat(e.message),DD)}}(r,t),i=function(t,r){try{var n=[],o=[],i=[];return t.servers.forEach(function(e){var t=e.role,e=e.addresses;"ROUTE"===t?n=qD(e).map(function(e){return xD.fromUrl(e)}):"WRITE"===t?i=qD(e).map(function(e){return xD.fromUrl(e)}):"READ"===t&&(o=qD(e).map(function(e){return xD.fromUrl(e)}))}),{routers:n,readers:o,writers:i}}catch(e){throw(0,kD.newError)("Unable to parse servers entry from router ".concat(r," from addresses:\n").concat(kD.json.stringify(t.servers),"\nError message: ").concat(e.message),DD)}}(r,t),u=i.routers,a=i.readers,i=i.writers;return VD(u,"routers",t),VD(a,"readers",t),new LD({database:e||r.db,routers:u,readers:a,writers:i,expirationTime:o,ttl:n})}function VD(e,t,r){if(0===e.length)throw(0,kD.newError)("Received no "+t+" from router "+r,DD)}function qD(e){if(Array.isArray(e))return Array.from(e);throw new TypeError("Array expected but got: "+e)}n.default=LD;var P=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},WD=(Object.defineProperty(E,"__esModule",{value:!0}),P(n));function zD(e){this._routingContext=e}zD.prototype.lookupRoutingTableOnRouter=function(t,r,n,o){var i=this;return t._acquireConnection(function(e){return i._requestRawRoutingTable(e,t,r,n,o).then(function(e){return e.isNull?null:WD.default.fromRawRoutingTable(r,n,e)})})},zD.prototype._requestRawRoutingTable=function(r,n,o,e,i){var u=this;return new Promise(function(e,t){r.protocol().requestRoutingInformation({routingContext:u._routingContext,databaseName:o,impersonatedUser:i,sessionContext:{bookmarks:n._lastBookmarks,mode:n._mode,database:n._database,afterComplete:n._onComplete},onCompleted:e,onError:t})})},E.default=zD;var HD,GD,YD,I0=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},av=(Object.defineProperty(KO,"__esModule",{value:!0}),KO.RoutingTable=KO.Rediscovery=void 0,I0(E)),g=(KO.Rediscovery=av.default,I0(n)),Hn=(KO.RoutingTable=g.default,KO.default=av.default,r&&r.__extends||(HD=function(e,t){return(HD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}HD(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})),KD=r&&r.__assign||function(){return(KD=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ZD=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),QD=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Gt=r&&r.__importStar||(GD=function(e){return(GD=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=GD(e),n=0;n<r.length;n++)"default"!==r[n]&&ZD(t,e,r[n]);return QD(t,e),t}),XD=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},JD=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},$D=r&&r.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eL=r&&r.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},h=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},tL=(Object.defineProperty(ln,"__esModule",{value:!0}),e),rL=Gt(KO),nL=Dd,oL=h(hy),u=h(dg),iL=Zl,uL=Rg,aL=iv,sL=tL.error.SERVICE_UNAVAILABLE,cL=tL.error.SESSION_EXPIRED,lL=tL.internal.bookmarks.Bookmarks,m=tL.internal.constants,fL=m.ACCESS_MODE_READ,pL=m.ACCESS_MODE_WRITE,dL=m.BOLT_PROTOCOL_V3,hL=m.BOLT_PROTOCOL_V4_0,bL=m.BOLT_PROTOCOL_V4_4,yL=m.BOLT_PROTOCOL_V5_1,_L=null,vL=(0,tL.int)(3e4),ql=(YD=u.default,Hn(mL,YD),mL.prototype._createConnectionErrorHandler=function(){return new uL.ConnectionErrorHandler(cL)},mL.prototype._handleUnavailability=function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forget(t,r||_L),e},mL.prototype._handleSecurityError=function(e,t,r,n){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(t," for database '").concat(n,"' because of an error ").concat(e.code," '").concat(e.message,"'")),YD.prototype._handleSecurityError.call(this,e,t,r,n)},mL.prototype._handleWriteFailure=function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forgetWriter(t,r||_L),(0,tL.newError)("No longer possible to write to server at "+t,cL,e)},mL.prototype.acquireConnection=function(){return XD(this,arguments,void 0,function(e){var n,t,r,o,i=this,e=void 0===e?{}:e,u=e.accessMode,a=e.database,s=e.bookmarks,c=e.impersonatedUser,l=e.onDatabaseNameResolved,f=e.auth,p=e.homeDb;return JD(this,function(e){switch(e.label){case 0:return(n={database:a||_L},t=new uL.ConnectionErrorHandler(cL,function(e,t){return i._handleUnavailability(e,t,n.database)},function(e,t){return i._handleWriteFailure(e,t,null!=p?p:n.database)},function(e,t,r){return i._handleSecurityError(e,t,r,n.database)}),this._startTime=(new Date).getTime(),this.SSREnabled()&&void 0!==p&&""===a)?!(r=this._routingTableRegistry.get(p,function(){return new rL.RoutingTable({database:p})}))||r.isStaleFor(u)?[3,2]:[4,this._getConnectionFromRoutingTable(r,f,u,t)]:[3,2];case 1:if(r=e.sent(),this.SSREnabled())return[2,r];r.release(),e.label=2;case 2:return[4,this._freshRoutingTable({accessMode:u,database:n.database,bookmarks:s,impersonatedUser:c,auth:f,onDatabaseNameResolved:function(e){n.database=n.database||e,l&&l(e)}})];case 3:return o=e.sent(),[2,this._getConnectionFromRoutingTable(o,f,u,t)]}})})},mL.prototype._getConnectionFromRoutingTable=function(i,u,a,s){return XD(this,void 0,void 0,function(){var t,r,n,o;return JD(this,function(e){switch(e.label){case 0:if(a===fL)r=this._loadBalancingStrategy.selectReader(i.readers),t="read";else{if(a!==pL)throw(0,tL.newError)("Illegal mode "+a);r=this._loadBalancingStrategy.selectWriter(i.writers),t="write"}if(!r)throw(0,tL.newError)("Failed to obtain connection towards ".concat(t," server. Known routing table is: ").concat(i),cL);e.label=1;case 1:return e.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:u,startTime:this._startTime},r)];case 2:return(n=e.sent(),u)?[4,this._verifyStickyConnection({auth:u,connection:n,address:r})]:[3,4];case 3:return e.sent(),[2,n];case 4:return[2,new uL.DelegateConnection(n,s)];case 5:throw o=e.sent(),s.handleAndTransformError(o,r);case 6:return[2]}})})},mL.prototype._hasProtocolVersion=function(u){return XD(this,void 0,void 0,function(){var t,r,n,o,i;return JD(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:t=e.sent(),n=0,e.label=2;case 2:if(!(n<t.length))return[3,8];e.label=3;case 3:return e.trys.push([3,6,,7]),[4,this._createChannelConnection(t[n])];case 4:return i=e.sent(),o=i.protocol()?i.protocol().version:null,[4,i.close()];case 5:return e.sent(),o?[2,u(o)]:[2,!1];case 6:return i=e.sent(),r=i,[3,7];case 7:return n++,[3,2];case 8:if(r)throw r;return[2,!1]}})})},mL.prototype.supportsMultiDb=function(){return XD(this,void 0,void 0,function(){return JD(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e.isGreaterOrEqualTo(hL)})];case 1:return[2,e.sent()]}})})},mL.prototype.supportsTransactionConfig=function(){return XD(this,void 0,void 0,function(){return JD(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e.isGreaterOrEqualTo(dL)})];case 1:return[2,e.sent()]}})})},mL.prototype.supportsUserImpersonation=function(){return XD(this,void 0,void 0,function(){return JD(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e.isGreaterOrEqualTo(bL)})];case 1:return[2,e.sent()]}})})},mL.prototype.supportsSessionAuth=function(){return XD(this,void 0,void 0,function(){return JD(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e.isGreaterOrEqualTo(yL)})];case 1:return[2,e.sent()]}})})},mL.prototype.getNegotiatedProtocolVersion=function(){var r=this;return new Promise(function(e,t){r._hasProtocolVersion(e).catch(t)})},mL.prototype.verifyAuthentication=function(e){return XD(this,arguments,void 0,function(e){var t=this,n=e.database,o=e.accessMode,i=e.auth;return JD(this,function(e){return this._startTime=(new Date).getTime(),[2,this._verifyAuthentication({auth:i,getAddress:function(){return XD(t,void 0,void 0,function(){var t,r;return JD(this,function(e){switch(e.label){case 0:return t={database:n||_L},[4,this._freshRoutingTable({accessMode:o,database:t.database,auth:i,onDatabaseNameResolved:function(e){t.database=t.database||e}})];case 1:if(r=e.sent(),0===(r=o===pL?r.writers:r.readers).length)throw(0,tL.newError)("No servers available for database '".concat(t.database,"' with access mode '").concat(o,"'"),sL);return[2,r[0]]}})})}})]})})},mL.prototype.verifyConnectivityAndGetServerInfo=function(e){return XD(this,arguments,void 0,function(e){var t,r,n,o,i,u,a,s,c,l=e.database,f=e.accessMode;return JD(this,function(e){switch(e.label){case 0:return t={database:l||_L},this._startTime=(new Date).getTime(),[4,this._freshRoutingTable({accessMode:f,database:t.database,onDatabaseNameResolved:function(e){t.database=t.database||e}})];case 1:r=e.sent(),r=f===pL?r.writers:r.readers,n=(0,tL.newError)("No servers available for database '".concat(t.database,"' with access mode '").concat(f,"'"),sL),e.label=2;case 2:e.trys.push([2,9,10,11]),o=$D(r),i=o.next(),e.label=3;case 3:if(i.done)return[3,8];u=i.value,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:u})];case 5:return[2,e.sent()];case 6:return a=e.sent(),n=a,[3,7];case 7:return i=o.next(),[3,3];case 8:return[3,11];case 9:return a=e.sent(),s={error:a},[3,11];case 10:try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(s)throw s.error}return[7];case 11:throw n}})})},mL.prototype.forget=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},mL.prototype.forgetWriter=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forgetWriter(t)}})},mL.prototype._freshRoutingTable=function(e){var e=void 0===e?{}:e,t=e.accessMode,r=e.database,n=e.bookmarks,o=e.impersonatedUser,i=e.onDatabaseNameResolved,e=e.auth,u=this._routingTableRegistry.get(r,function(){return new rL.RoutingTable({database:r})});return u.isStaleFor(t)?(this._log.info('Routing table is stale for database: "'.concat(r,'" and access mode: "').concat(t,'": ').concat(u)),this._refreshRoutingTable(u,n,o,e).then(function(e){return i(e.database),e})):u},mL.prototype._refreshRoutingTable=function(e,t,r,n){var o=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(o,e,t,r,n):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(o,e,t,r,n)},mL.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(u,a,s,c,l){return XD(this,void 0,void 0,function(){var t,r,n,o,i;return JD(this,function(e){switch(e.label){case 0:return t=[],[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,a,s,c,l)];case 1:return(t=eL.apply(void 0,[e.sent(),2]),r=t[0],n=t[1],r)?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(u,a,s,c,l)];case 3:i=eL.apply(void 0,[e.sent(),2]),o=i[0],i=i[1],r=o,n=i||n,e.label=4;case 4:return[4,this._applyRoutingTableIfPossible(a,r,n)];case 5:return[2,e.sent()]}})})},mL.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(o,i,u,a,s){return XD(this,void 0,void 0,function(){var t,r,n;return JD(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(o,i,u,a,s)];case 1:return r=eL.apply(void 0,[e.sent(),2]),t=r[0],r=r[1],t?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(o,this._seedRouter,i,u,a,s)];case 2:n=eL.apply(void 0,[e.sent(),2]),t=n[0],r=n[1],e.label=3;case 3:return[4,this._applyRoutingTableIfPossible(i,t,r)];case 4:return[2,e.sent()]}})})},mL.prototype._fetchRoutingTableUsingKnownRouters=function(n,o,i,u,a){return XD(this,void 0,void 0,function(){var t,r;return JD(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTable(n,o,i,u,a)];case 1:return(t=eL.apply(void 0,[e.sent(),2]),r=t[0],t=t[1],r)?[2,[r,null]]:(r=n.length-1,mL._forgetRouter(o,n,r),[2,[null,t]])}})})},mL.prototype._fetchRoutingTableUsingSeedRouter=function(r,n,o,i,u,a){return XD(this,void 0,void 0,function(){var t;return JD(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return t=e.sent(),t=t.filter(function(e){return r.indexOf(e)<0}),[4,this._fetchRoutingTable(t,o,i,u,a)];case 2:return[2,e.sent()]}})})},mL.prototype._resolveSeedRouter=function(n){return XD(this,void 0,void 0,function(){var t,r=this;return JD(this,function(e){switch(e.label){case 0:return[4,this._hostNameResolver.resolve(n)];case 1:return t=e.sent(),[4,Promise.all(t.map(function(e){return r._dnsResolver.resolve(e)}))];case 2:return t=e.sent(),[2,[].concat.apply([],t)]}})})},mL.prototype._fetchRoutingTable=function(s,c,l,f,p){return XD(this,void 0,void 0,function(){var t=this;return JD(this,function(e){return[2,s.reduce(function(i,u,a){return XD(t,void 0,void 0,function(){var t,r,n,o;return JD(this,function(e){switch(e.label){case 0:return[4,i];case 1:return(t=eL.apply(void 0,[e.sent(),1]),t=t[0])?[2,[t,null]]:(mL._forgetRouter(c,s,a-1),[4,this._createSessionForRediscovery(u,l,f,p)]);case 2:if(t=eL.apply(void 0,[e.sent(),2]),r=t[0],n=t[1],!r)return[3,8];e.label=3;case 3:return e.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(r,c.database,u,f)];case 4:return[2,[e.sent(),null]];case 5:return o=e.sent(),[2,this._handleRediscoveryError(o,u)];case 6:return r.close(),[7];case 7:return[3,9];case 8:return[2,[null,n]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},mL.prototype._createSessionForRediscovery=function(o,i,u,a){return XD(this,void 0,void 0,function(){var t,r,n=this;return JD(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:a,startTime:this._startTime},o)];case 1:return(t=e.sent(),a)?[4,this._verifyStickyConnection({auth:a,connection:t,address:o})]:[3,3];case 2:e.sent(),e.label=3;case 3:return r=uL.ConnectionErrorHandler.create({errorCode:cL,handleSecurityError:function(e,t,r){return n._handleSecurityError(e,t,r)}}),r=t._sticky?new uL.DelegateConnection(t):new uL.DelegateConnection(t,r),r=new oL.default(r),t.protocol().version.isLessThan({major:4,minor:0})?[2,[new tL.Session({mode:pL,bookmarks:lL.empty(),connectionProvider:r}),null]]:[2,[new tL.Session({mode:fL,database:"system",bookmarks:i,connectionProvider:r,impersonatedUser:u}),null]];case 4:return r=e.sent(),[2,this._handleRediscoveryError(r,o)];case 5:return[2]}})})},mL.prototype._handleRediscoveryError=function(e,t){if(["Neo.ClientError.Database.DatabaseNotFound","Neo.ClientError.Transaction.InvalidBookmark","Neo.ClientError.Transaction.InvalidBookmarkMixture","Neo.ClientError.Statement.ArgumentError","Neo.ClientError.Request.Invalid","Neo.ClientError.Statement.TypeError","N/A"].includes(e.code)||null!=(n=(r=e).code)&&n.startsWith("Neo.ClientError.Security.")&&!["Neo.ClientError.Security.AuthorizationExpired"].includes(r.code))throw e;if("Neo.ClientError.Procedure.ProcedureNotFound"===e.code)throw(0,tL.newError)("Server at ".concat(t.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),sL,e);var r,n;return this._log.warn("unable to fetch routing table because of an error ".concat(e)),[null,e]},mL.prototype._applyRoutingTableIfPossible=function(t,r,n){return XD(this,void 0,void 0,function(){return JD(this,function(e){switch(e.label){case 0:if(r)return 0===r.writers.length&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(r)];throw(0,tL.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),sL,n);case 1:return e.sent(),[2,r]}})})},mL.prototype._updateRoutingTable=function(t){return XD(this,void 0,void 0,function(){return JD(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return e.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},mL._forgetRouter=function(e,t,r){t=t[r];e&&t&&e.forgetRouter(t)},mL.prototype._channelSsrCallback=function(e,t){if("OPEN"===t)!0===e?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else{if("CLOSE"!==t)throw(0,tL.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'");!0===e?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1}},mL.prototype.SSREnabled=function(){return 0<this._withSSR&&0===this._withoutSSR},mL);function mL(e){var t=e.id,r=e.address,n=e.routingContext,o=e.hostNameResolver,i=e.config,u=e.log,a=e.userAgent,s=e.boltAgent,c=e.authTokenManager,l=e.routingTablePurgeDelay,e=e.newPool,f=YD.call(this,{id:t,config:i,log:u,userAgent:a,boltAgent:s,authTokenManager:c,newPool:e},function(n){return XD(f,void 0,void 0,function(){var t,r;return JD(this,function(e){switch(e.label){case 0:return t=uL.createChannelConnection,r=[n,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,t.apply(void 0,r.concat([e.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return f._routingContext=KD(KD({},n),{address:r.toString()}),f._seedRouter=r,f._rediscovery=new rL.default(f._routingContext),f._loadBalancingStrategy=new iL.LeastConnectedLoadBalancingStrategy(f._connectionPool),f._startTime=0,f._hostNameResolver=o,f._dnsResolver=new nL.HostNameResolver,f._log=u,f._useSeedRouter=!0,f._routingTableRegistry=new FL(l?(0,tL.int)(l):vL),f._refreshRoutingTable=aL.functional.reuseOngoingRequest(f._refreshRoutingTable,f),f._withSSR=0,f._withoutSSR=0,f}ln.default=ql;BL.prototype.register=function(e){return this._tables.set(e.database,e),this},BL.prototype.apply=function(e,t){var t=void 0===t?{}:t,r=t.applyWhenExists,t=t.applyWhenDontExists,t=void 0===t?function(){}:t;return this._tables.has(e)?r(this._tables.get(e)):"string"==typeof e||null===e?t():this._forEach(r),this},BL.prototype.get=function(e,t){return this._tables.has(e)?this._tables.get(e):"function"==typeof t?t():t},BL.prototype.removeExpired=function(){var t=this;return this._removeIf(function(e){return e.isExpiredFor(t._routingTablePurgeDelay)})},BL.prototype._forEach=function(e){var t,r;try{for(var n=$D(this._tables),o=n.next();!o.done;o=n.next())e(eL(o.value,2)[1])}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},BL.prototype._remove=function(e){return this._tables.delete(e),this},BL.prototype._removeIf=function(e){var t,r;try{for(var n=$D(this._tables),o=n.next();!o.done;o=n.next()){var i=eL(o.value,2),u=i[0];e(i[1])&&this._remove(u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this};var gL,OL,wL,EL,PL,TL,SL,jL,CL,IL,RL,AL,x,kL,rc,ML,NL,xL,DL,LL,UL,FL=BL;function BL(e){this._tables=new Map,this._routingTablePurgeDelay=e}function VL(e,t,r){void 0===r&&(r={}),NL(e,"Bolt URL");var n,o=LL.parseDatabaseUrl(e),i=!1,u=!1;switch(o.scheme){case"bolt":break;case"bolt+s":u=!0,n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":u=!0,n="TRUST_ALL_CERTIFICATES";break;case"neo4j":i=!0;break;case"neo4j+s":n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",i=u=!0;break;case"neo4j+ssc":n="TRUST_ALL_CERTIFICATES",i=u=!0;break;default:throw new Error("Unknown scheme: ".concat(o.scheme))}if(u){if("encrypted"in r||"trust"in r)throw new Error("Encryption/trust can only be configured either through URL or config, not both");r.encrypted=ML,r.trust=n,r.clientCertificate=(0,x.resolveCertificateProvider)(r.clientCertificate)}var a=function(e){if("object"==typeof(t=e)&&null!=t&&"getToken"in t&&"handleSecurityException"in t&&"function"==typeof t.getToken&&"function"==typeof t.handleSecurityException)return e;var t=e;return(t=t||{}).scheme=t.scheme||"none",(0,x.staticAuthTokenManager)({authToken:t})}(t),s=(r.userAgent=r.userAgent||UL,r.boltAgent=x.internal.boltAgent.fromVersion(AL.default),DL.fromUrl(o.hostAndPort)),t={address:s,typename:i?"Routing":"Direct",routing:i};return new RL.Driver(t,r,function(){{if(i)return function(e,t,r,n){return new kL.RoutingConnectionProvider({id:e,config:t,log:r,hostNameResolver:n,authTokenManager:a,address:s,userAgent:t.userAgent,boltAgent:t.boltAgent,routingContext:o.query})};if(xL(o.query))return function(e,t,r){return new kL.DirectConnectionProvider({id:e,config:t,log:r,authTokenManager:a,address:s,userAgent:t.userAgent,boltAgent:t.boltAgent})};throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(e,"'"))}}())}function qL(r,n){return CL(this,void 0,void 0,function(){var t;return IL(this,function(e){switch(e.label){case 0:t=VL(r,{scheme:"none",principal:"",credentials:""},n),e.label=1;case 1:return e.trys.push([1,,3,5]),[4,t.getNegotiatedProtocolVersion()];case 2:return e.sent(),[2,!0];case 3:return[4,t.close()];case 4:return e.sent(),[7];case 5:return[2]}})})}return xf=rg,gL=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(xf,"__esModule",{value:!0}),xf.RoutingConnectionProvider=xf.DirectConnectionProvider=xf.PooledConnectionProvider=xf.SingleConnectionProvider=void 0,OL=hy,Object.defineProperty(xf,"SingleConnectionProvider",{enumerable:!0,get:function(){return gL(OL).default}}),wL=dg,Object.defineProperty(xf,"PooledConnectionProvider",{enumerable:!0,get:function(){return gL(wL).default}}),EL=O,Object.defineProperty(xf,"DirectConnectionProvider",{enumerable:!0,get:function(){return gL(EL).default}}),PL=ln,Object.defineProperty(xf,"RoutingConnectionProvider",{enumerable:!0,get:function(){return gL(PL).default}}),Bl=jt,SL=r&&r.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),jL=r&&r.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Kf=r&&r.__importStar||(TL=function(e){return(TL=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=TL(e),n=0;n<r.length;n++)"default"!==r[n]&&SL(t,e,r[n]);return jL(t,e),t}),Kl=r&&r.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||SL(t,e,r)},Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.packstream=Bl.channel=Bl.buf=Bl.bolt=Bl.loadBalancing=void 0,Bl.loadBalancing=Kf(Zl),Bl.bolt=Kf(F),Bl.buf=Kf(vh),Bl.channel=Kf(Dd),Bl.packstream=Kf(cm),Kl(rg,Bl),T=L,CL=r&&r.__awaiter||function(e,u,a,s){return new(a=a||Promise)(function(r,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function o(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((s=s.apply(e,u||[])).next())})},IL=r&&r.__generator||function(n,o){var i,u,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=e(0),c.throw=e(1),c.return=e(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;s=c&&t[c=0]?0:s;)try{if(i=1,u&&(a=2&t[0]?u.return:t[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,t[1])).done)return a;switch(u=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,u=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(n,s)}catch(e){t=[6,e],u=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},Jp=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(T,"__esModule",{value:!0}),T.UnboundRelationship=T.Relationship=T.Node=T.Record=T.ServerInfo=T.GqlStatusObject=T.Notification=T.QueryStatistics=T.ProfiledPlan=T.Plan=T.ResultSummary=T.RxResult=T.RxManagedTransaction=T.RxTransaction=T.RxSession=T.EagerResult=T.Result=T.ManagedTransaction=T.Transaction=T.Session=T.Driver=T.temporal=T.spatial=T.graph=T.error=T.routing=T.session=T.types=T.logging=T.auth=T.isRetryableError=T.isRetriableError=T.Neo4jError=T.integer=T.isUnsupportedType=T.isUnboundRelationship=T.isRelationship=T.isPathSegment=T.isPath=T.isNode=T.isDateTime=T.isLocalDateTime=T.isDate=T.isTime=T.isLocalTime=T.isDuration=T.isPoint=T.isInt=T.int=T.authTokenManagers=void 0,T.StandardCase=T.RecordObjectMapping=T.mappingDecorators=T.rule=T.Rules=T.Rule=T.VectorType=T.Vector=T.vector=T.isVector=T.clientCertificateProviders=T.notificationFilterMinimumSeverityLevel=T.notificationFilterDisabledClassification=T.notificationFilterDisabledCategory=T.notificationSeverityLevel=T.notificationClassification=T.notificationCategory=T.resultTransformers=T.bookmarkManager=T.DateTime=T.LocalDateTime=T.Date=T.Time=T.LocalTime=T.Duration=T.Integer=T.Point=T.PathSegment=T.Path=void 0,T.driver=VL,T.hasReachableServer=qL,RL=U,Object.defineProperty(T,"Driver",{enumerable:!0,get:function(){return RL.Driver}}),AL=Jp(l),x=e,Object.defineProperty(T,"authTokenManagers",{enumerable:!0,get:function(){return x.authTokenManagers}}),Object.defineProperty(T,"Neo4jError",{enumerable:!0,get:function(){return x.Neo4jError}}),Object.defineProperty(T,"isRetriableError",{enumerable:!0,get:function(){return x.isRetriableError}}),Object.defineProperty(T,"isRetryableError",{enumerable:!0,get:function(){return x.isRetryableError}}),Object.defineProperty(T,"error",{enumerable:!0,get:function(){return x.error}}),Object.defineProperty(T,"Integer",{enumerable:!0,get:function(){return x.Integer}}),Object.defineProperty(T,"int",{enumerable:!0,get:function(){return x.int}}),Object.defineProperty(T,"isInt",{enumerable:!0,get:function(){return x.isInt}}),Object.defineProperty(T,"isPoint",{enumerable:!0,get:function(){return x.isPoint}}),Object.defineProperty(T,"Point",{enumerable:!0,get:function(){return x.Point}}),Object.defineProperty(T,"Date",{enumerable:!0,get:function(){return x.Date}}),Object.defineProperty(T,"DateTime",{enumerable:!0,get:function(){return x.DateTime}}),Object.defineProperty(T,"Duration",{enumerable:!0,get:function(){return x.Duration}}),Object.defineProperty(T,"isDate",{enumerable:!0,get:function(){return x.isDate}}),Object.defineProperty(T,"isDateTime",{enumerable:!0,get:function(){return x.isDateTime}}),Object.defineProperty(T,"isDuration",{enumerable:!0,get:function(){return x.isDuration}}),Object.defineProperty(T,"isLocalDateTime",{enumerable:!0,get:function(){return x.isLocalDateTime}}),Object.defineProperty(T,"isLocalTime",{enumerable:!0,get:function(){return x.isLocalTime}}),Object.defineProperty(T,"isNode",{enumerable:!0,get:function(){return x.isNode}}),Object.defineProperty(T,"isPath",{enumerable:!0,get:function(){return x.isPath}}),Object.defineProperty(T,"isPathSegment",{enumerable:!0,get:function(){return x.isPathSegment}}),Object.defineProperty(T,"isRelationship",{enumerable:!0,get:function(){return x.isRelationship}}),Object.defineProperty(T,"isTime",{enumerable:!0,get:function(){return x.isTime}}),Object.defineProperty(T,"isUnboundRelationship",{enumerable:!0,get:function(){return x.isUnboundRelationship}}),Object.defineProperty(T,"isUnsupportedType",{enumerable:!0,get:function(){return x.isUnsupportedType}}),Object.defineProperty(T,"LocalDateTime",{enumerable:!0,get:function(){return x.LocalDateTime}}),Object.defineProperty(T,"LocalTime",{enumerable:!0,get:function(){return x.LocalTime}}),Object.defineProperty(T,"Time",{enumerable:!0,get:function(){return x.Time}}),Object.defineProperty(T,"Node",{enumerable:!0,get:function(){return x.Node}}),Object.defineProperty(T,"Path",{enumerable:!0,get:function(){return x.Path}}),Object.defineProperty(T,"PathSegment",{enumerable:!0,get:function(){return x.PathSegment}}),Object.defineProperty(T,"Relationship",{enumerable:!0,get:function(){return x.Relationship}}),Object.defineProperty(T,"UnboundRelationship",{enumerable:!0,get:function(){return x.UnboundRelationship}}),Object.defineProperty(T,"Record",{enumerable:!0,get:function(){return x.Record}}),Object.defineProperty(T,"ResultSummary",{enumerable:!0,get:function(){return x.ResultSummary}}),Object.defineProperty(T,"Plan",{enumerable:!0,get:function(){return x.Plan}}),Object.defineProperty(T,"ProfiledPlan",{enumerable:!0,get:function(){return x.ProfiledPlan}}),Object.defineProperty(T,"QueryStatistics",{enumerable:!0,get:function(){return x.QueryStatistics}}),Object.defineProperty(T,"Notification",{enumerable:!0,get:function(){return x.Notification}}),Object.defineProperty(T,"GqlStatusObject",{enumerable:!0,get:function(){return x.GqlStatusObject}}),Object.defineProperty(T,"ServerInfo",{enumerable:!0,get:function(){return x.ServerInfo}}),Object.defineProperty(T,"Result",{enumerable:!0,get:function(){return x.Result}}),Object.defineProperty(T,"EagerResult",{enumerable:!0,get:function(){return x.EagerResult}}),Object.defineProperty(T,"auth",{enumerable:!0,get:function(){return x.auth}}),Object.defineProperty(T,"Session",{enumerable:!0,get:function(){return x.Session}}),Object.defineProperty(T,"Transaction",{enumerable:!0,get:function(){return x.Transaction}}),Object.defineProperty(T,"ManagedTransaction",{enumerable:!0,get:function(){return x.ManagedTransaction}}),Object.defineProperty(T,"bookmarkManager",{enumerable:!0,get:function(){return x.bookmarkManager}}),Object.defineProperty(T,"routing",{enumerable:!0,get:function(){return x.routing}}),Object.defineProperty(T,"resultTransformers",{enumerable:!0,get:function(){return x.resultTransformers}}),Object.defineProperty(T,"notificationCategory",{enumerable:!0,get:function(){return x.notificationCategory}}),Object.defineProperty(T,"notificationClassification",{enumerable:!0,get:function(){return x.notificationClassification}}),Object.defineProperty(T,"notificationSeverityLevel",{enumerable:!0,get:function(){return x.notificationSeverityLevel}}),Object.defineProperty(T,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return x.notificationFilterDisabledCategory}}),Object.defineProperty(T,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return x.notificationFilterDisabledClassification}}),Object.defineProperty(T,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return x.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(T,"clientCertificateProviders",{enumerable:!0,get:function(){return x.clientCertificateProviders}}),Object.defineProperty(T,"isVector",{enumerable:!0,get:function(){return x.isVector}}),Object.defineProperty(T,"Vector",{enumerable:!0,get:function(){return x.Vector}}),Object.defineProperty(T,"VectorType",{enumerable:!0,get:function(){return x.VectorType}}),Object.defineProperty(T,"vector",{enumerable:!0,get:function(){return x.vector}}),Object.defineProperty(T,"Rule",{enumerable:!0,get:function(){return x.Rule}}),Object.defineProperty(T,"Rules",{enumerable:!0,get:function(){return x.Rules}}),Object.defineProperty(T,"rule",{enumerable:!0,get:function(){return x.rule}}),Object.defineProperty(T,"mappingDecorators",{enumerable:!0,get:function(){return x.mappingDecorators}}),Object.defineProperty(T,"RecordObjectMapping",{enumerable:!0,get:function(){return x.RecordObjectMapping}}),Object.defineProperty(T,"StandardCase",{enumerable:!0,get:function(){return x.StandardCase}}),kL=jt,rc=Jp(w),T.RxSession=rc.default,id=Jp(sr),T.RxTransaction=id.default,Vf=Jp(G),T.RxManagedTransaction=Vf.default,Jp=Jp(C),T.RxResult=Jp.default,c=x.internal.util,ML=c.ENCRYPTION_ON,NL=c.assertString,xL=c.isEmptyObjectOrNull,DL=x.internal.serverAddress.ServerAddress,LL=x.internal.urlUtil,UL="neo4j-javascript/"+AL.default,c={console:function(e){return{level:e,logger:function(e,t){return console.log("".concat(r.Date.now()," ").concat(e.toUpperCase()," ").concat(t))}}}},T.logging=c,Fl={Node:x.Node,Relationship:x.Relationship,UnboundRelationship:x.UnboundRelationship,PathSegment:x.PathSegment,Path:x.Path,Result:x.Result,EagerResult:x.EagerResult,ResultSummary:x.ResultSummary,Record:x.Record,Point:x.Point,Date:x.Date,DateTime:x.DateTime,Duration:x.Duration,LocalDateTime:x.LocalDateTime,LocalTime:x.LocalTime,Time:x.Time,Integer:x.Integer,Vector:x.Vector,VectorType:x.VectorType,Rule:x.Rule,Rules:x.Rules},T.types=Fl,Mh={READ:RL.READ,WRITE:RL.WRITE},T.session=Mh,nb={toNumber:x.toNumber,toString:x.toString,inSafeRange:x.inSafeRange},T.integer=nb,Hl={isPoint:x.isPoint},T.spatial=Hl,Ul={isDuration:x.isDuration,isLocalTime:x.isLocalTime,isTime:x.isTime,isDate:x.isDate,isLocalDateTime:x.isLocalDateTime,isDateTime:x.isDateTime},T.temporal=Ul,w_={isNode:x.isNode,isPath:x.isPath,isPathSegment:x.isPathSegment,isRelationship:x.isRelationship,isUnboundRelationship:x.isUnboundRelationship},T.graph=w_,nb={authTokenManagers:x.authTokenManagers,driver:VL,hasReachableServer:qL,int:x.int,isInt:x.isInt,isPoint:x.isPoint,isDuration:x.isDuration,isLocalTime:x.isLocalTime,isTime:x.isTime,isDate:x.isDate,isLocalDateTime:x.isLocalDateTime,isDateTime:x.isDateTime,isNode:x.isNode,isPath:x.isPath,isPathSegment:x.isPathSegment,isRelationship:x.isRelationship,isUnboundRelationship:x.isUnboundRelationship,isUnsupportedType:x.isUnsupportedType,integer:nb,Neo4jError:x.Neo4jError,isRetriableError:x.isRetriableError,isRetryableError:x.isRetryableError,auth:x.auth,logging:c,types:Fl,session:Mh,routing:x.routing,error:x.error,graph:w_,spatial:Hl,temporal:Ul,Driver:RL.Driver,Session:x.Session,Transaction:x.Transaction,ManagedTransaction:x.ManagedTransaction,Result:x.Result,EagerResult:x.EagerResult,RxSession:rc.default,RxTransaction:id.default,RxManagedTransaction:Vf.default,RxResult:Jp.default,ResultSummary:x.ResultSummary,Plan:x.Plan,ProfiledPlan:x.ProfiledPlan,QueryStatistics:x.QueryStatistics,Notification:x.Notification,GqlStatusObject:x.GqlStatusObject,ServerInfo:x.ServerInfo,Record:x.Record,Node:x.Node,Relationship:x.Relationship,UnboundRelationship:x.UnboundRelationship,Path:x.Path,PathSegment:x.PathSegment,Point:x.Point,Integer:x.Integer,Duration:x.Duration,LocalTime:x.LocalTime,Time:x.Time,Date:x.Date,LocalDateTime:x.LocalDateTime,DateTime:x.DateTime,bookmarkManager:x.bookmarkManager,resultTransformers:x.resultTransformers,notificationCategory:x.notificationCategory,notificationSeverityLevel:x.notificationSeverityLevel,notificationFilterDisabledCategory:x.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:x.notificationFilterMinimumSeverityLevel,clientCertificateProviders:x.clientCertificateProviders,isVector:x.isVector,vector:x.vector,rule:x.rule,mappingDecorators:x.mappingDecorators,RecordObjectMapping:x.RecordObjectMapping,StandardCase:x.StandardCase},T.default=nb,D(L)});